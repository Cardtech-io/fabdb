(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{322:function(t,e,r){"use strict";r.r(e);var n=r(11),a={history:[],write:function(t,e){this.history.push({action:t,message:e})}},s={props:{deck:{type:Array,required:!0},cardBack:{type:String,required:!0}},data:function(){return{capture:!1}},computed:{total:function(){var t=Math.ceil(this.deck.length/20);return t>4?4:t}},methods:{draw:function(){var t=this.deck.pop();this.$parent.hand.push(t),a.write("draw",'Drew "'+t.name+'"')},drawMany:function(t){for(var e=0;e<t;e++)this.draw()},drawNumber:function(t){t.stopPropagation(),!isNaN(t.key)&&this.capture&&this.drawMany(t.key)},position:function(t){return{left:2*t+"px",top:2*t+"px"}}},mounted:function(){var t=this;document.addEventListener("keyup",this.drawNumber),this.$eventHub.$on("end-turn",(function(){var e=t.$parent.hero.stats.intellect-t.$parent.hand.length;e>0&&t.drawMany(e)}))}},i=r(0),o=Object(i.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"w-full h-full relative",on:{click:function(e){return e.preventDefault(),t.draw.apply(null,arguments)},keyup:function(e){return e.preventDefault(),t.drawNumber.apply(null,arguments)},mouseenter:function(e){e.preventDefault(),t.capture=!0},mouseleave:function(e){e.preventDefault(),t.capture=!1}}},[r("img",{staticClass:"z-0 invisible",attrs:{src:t.cardBack}}),t._v(" "),t._l(t.total,(function(e,n){return r("img",{staticClass:"absolute rounded-card border border-gray-200 z-25",style:t.position(n),attrs:{src:t.cardBack,alt:""}})})),t._v(" "),r("div",{staticClass:"absolute z-50 w-full flex justify-center text-white text-center font-serif uppercase text-2xl top-2/3"},[r("div",{staticClass:"flex justify-center items-center inline-block bg-semi-black rounded-full relative h-16 w-16",staticStyle:{left:"4px"}},[r("span",[t._v("\n                "+t._s(t.deck.length)+"\n            ")])])])],2)}),[],!1,null,null,null).exports,c={mixins:[r(7).a],methods:{drag:function(t,e,r){t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("from",e),t.dataTransfer.setData("index",r)},drop:function(t,e){var r=t.dataTransfer.getData("from"),n=t.dataTransfer.getData("index"),s=null===n?this.$parent[r].pop():this.$parent[r].splice(n,1)[0];this.$parent[e].push(s);var i="";switch(e){case"pitch":case"discard":i=this.ucfirst(e)+'ed "'+s.name+'".';break;case"banished":i='Banished "'+s.name+'".';break;case"hand":i='Moved "'+s.name+'" back to hand.';break;case"arsenal":i='Moved "'+s.name+'" to arsenal.'}a.write("move-card",i)}}},l={props:{hand:{type:Array,required:!0}},mixins:[c],data:function(){return{focused:null}},methods:{setFocused:function(t){this.focused=t},classes:function(t){return{"opacity-50":null!==this.focused&&this.focused!==t,"opacity-0":null===this.focused||this.focused===t}},transform:function(t){var e=this.hand.length;if(1!==e){var r=10*e>60?60/e:10,n=-(e-1)*r/2+t*r;return{transform:"rotate("+n+"deg)",marginTop:Math.abs(n)*(.22*Math.abs(n))+"px"}}}},mounted:function(){var t=this;this.$eventHub.$on("end-turn",(function(){t.focused=null}))}},u=Object(i.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"w-full"},[r("div",{staticClass:"relative w-full flex justify-center items-start -space-x-10 my-8 min-h-96",on:{drop:function(e){return t.drop(e,"hand")},dragover:function(t){t.preventDefault()},dragenter:function(t){t.preventDefault()}}},t._l(t.hand,(function(e,n){return r("div",{staticClass:"relative z-0 w-200 hover:z-25 cursor-pointer",style:t.transform(n),attrs:{draggable:""},on:{mouseover:function(e){return t.setFocused(n)},mouseout:function(e){return t.setFocused(null)},dragstart:function(e){return t.drag(e,"hand",n)}}},[r("card-image",{attrs:{card:e}}),t._v(" "),r("div",{staticClass:"transition absolute top-0 bottom-0 w-full bg-gray-200 rounded-card",class:t.classes(n)})],1)})),0)])}),[],!1,null,null,null).exports,d={data:function(){return{history:a.history,open:!1}},methods:{toggle:function(){this.open=!this.open}}},f=Object(i.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"absolute bottom-0 right-0"},[t.open?r("div",{staticClass:"transition flex flex-col h-96 -mt-96 -ml-40 mb-4 overflow-hidden w-56 bg-gray-100 rounded-lg shadow-lg z-100",class:{"opacity-100":t.open,"opacity-0":!t.open}},[r("header",{staticClass:"relative bg-primary px-4 py-2 text-center font-serif uppercase text-white z-50"},[t._v("\n            History\n        ")]),t._v(" "),r("div",{staticClass:"relative flex-grow py-2"},[r("div",{staticClass:"absolute bottom-0 w-full space-y-1 z-25"},t._l(t.history,(function(e){return r("div",{staticClass:"px-4 odd:bg-black"},[t._v("\n                    "+t._s(e.message)+"\n                ")])})),0)])]):t._e(),t._v(" "),r("button",{staticClass:"transition duration-300 transform bg-primary hover:bg-secondary rounded-full h-16 w-16 flex justify-center items-center text-white shadow-lg hover:scale-110",on:{click:t.toggle}},[r("svg",{staticClass:"h-10 w-10",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}})])])])}),[],!1,null,null,null).exports,p={props:{pile:{type:String,required:!0},name:{type:String,required:!0}},mixins:[c],computed:{top4:function(){return this.stack.slice(-4)},stack:function(){return this.$parent[this.pile]}},methods:{position:function(t){return{left:2*t+"px",top:2*t+"px"}}}},h=Object(i.a)(p,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"h-full",on:{drop:function(e){return t.drop(e,t.pile)},dragover:function(t){t.preventDefault()},dragenter:function(t){t.preventDefault()}}},[t.stack.length?r("div",{staticClass:"w-full h-full relative"},[t._l(t.top4,(function(e,n){return r("img",{staticClass:"absolute rounded-card border border-gray-200 z-25",style:t.position(n),attrs:{src:e.image},on:{dragstart:function(e){return t.drag(e,t.pile,n)}}})})),t._v(" "),r("div",{staticClass:"absolute z-50 w-full flex justify-center text-white text-center font-serif uppercase text-2xl top-2/3"},[r("div",{staticClass:"flex justify-center items-center inline-block bg-semi-black rounded-full relative h-12 w-12",staticStyle:{left:"4px"}},[r("span",[t._v("\n                    "+t._s(t.stack.length)+"\n                ")])])])],2):r("div",{staticClass:"bg-gray-300 font-serif text-xl uppercase rounded-card h-full pt-32 text-center"},[t._v(t._s(t.name))])])}),[],!1,null,null,null).exports,m={props:{tester:{type:r(43).a,required:!0}},components:{Deck:o,Hand:u,History:f,Stack:h},data:function(){return{arsenal:[],banished:[],deck:[],discard:[],hand:[],hero:this.tester.hero,pitch:[]}},methods:{endTurn:function(){for(;this.pitch.length;){var t=this.pitch.pop();this.deck.unshift(t),a.write("move-card",'Moved "'+t.name+'" to bottom of deck.')}this.$eventHub.$emit("end-turn")},reset:function(){this.deck=n.a.shuffle(this.tester.mainDeck.hydrate().cards),this.banished=[],this.discard=[]}},mounted:function(){this.reset()}},v=Object(i.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"relative"},[r("div",{staticClass:"flex justify-center items-stretch space-x-4"},[r("div",{staticClass:"w-200"},[r("stack",{attrs:{pile:"banished",name:"Banished"}})],1),t._v(" "),r("div",{staticClass:"w-200"},[r("stack",{attrs:{pile:"arsenal",name:"Arsenal"}})],1),t._v(" "),r("div",{staticClass:"pr-4"},[r("div",{staticClass:"w-200"},[r("card-image",{staticClass:"h-full",attrs:{card:t.hero}})],1)]),t._v(" "),r("div",{staticClass:"pl-4"},[r("div",{staticClass:"w-200"},[r("deck",{staticClass:"cursor-pointer",attrs:{deck:t.deck,"card-back":t.tester.deck.cardBackImage}})],1)]),t._v(" "),r("div",{staticClass:"w-200"},[r("stack",{attrs:{pile:"pitch",name:"Pitched"}})],1),t._v(" "),r("div",{staticClass:"w-200"},[r("stack",{attrs:{pile:"discard",name:"Discarded"}})],1)]),t._v(" "),r("hand",{attrs:{hand:t.hand}}),t._v(" "),r("button",{staticClass:"block w-auto relative button-primary rounded-full px-4 py-2 font-serif uppercase text-lg -top-24 mx-auto",on:{click:t.endTurn}},[t._v("\n            End turn\n        ")])],1)}),[],!1,null,null,null);e.default=v.exports},43:function(t,e,r){"use strict";r(11);function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.deck=e,this.mainDeck=e.cards.other(),this.sideboard=e.sideboard.other(),this.hero=e.hero,this.slug=e.slug}var e,r,a;return e=t,(r=[{key:"move",value:function(t,e,r){r.add(t),e.remove(t)}},{key:"hydrate",value:function(){this.mainDeck=this.mainDeck.hydrate(),this.sideboardStack=this.sideboard.hydrate()}}])&&n(e.prototype,r),a&&n(e,a),t}();e.a=a},7:function(t,e,r){"use strict";r(206);var n=r(254),a=r.n(n),s={a:"link",h1:"text-4xl",h2:"text-2xl",h3:"text-xl",ol:"list-decimal ml-8",p:"my-4",ul:"list-disc ml-8"},i=Object.keys(s).map((function(t){return{type:"output",regex:new RegExp("<".concat(t,"(.*)>"),"g"),replace:"<".concat(t,' class="').concat(s[t],'" $1>')}})),o=(r(26),[]),c="left",l={left:"sm:float-left sm:m-4 sm:ml-0",right:"sm:float-right sm:m-4 sm:mr-0"},u=[{type:"lang",regex:/\^cards\((([A-Z]{3}[0-9]{3},?)+)\)/gi,replace:function(t,e){return o.push(e),"%CARDS"+(o.length-1)+"%"}},{type:"output",filter:function(t){for(var e=0;e<o.length;++e){var r=o[e].split(","),n=r.map((function(t){return'<card-ad identifier="'+t+'"></card-ad>'})),a="%CARDS"+e+"%",s="";if(1===r.length){var i="right"===c?"left":"right";s=l[i],c=i}else s="flex items-start justify-center";t=t.replace(new RegExp(a,"gi"),'<div class="'+s+'">'+n.join("\n")+"</div>")}return o=[],t}}],d=[],f=[{type:"lang",regex:/\^deck\(([A-Z]+)\)/gi,replace:function(t,e){return d.push(e),"%DECK"+(d.length-1)+"%"}},{type:"output",filter:function(t){for(var e=0;e<d.length;++e){var r="<p>%DECK"+e+"% *</p>",n='<div class="block sm:m-8 mt-0 sm:float-right border border-gray-400"><iframe src="'+(window.location.protocol+"//"+window.location.hostname+"/decks/embed/"+d[e])+'" width="350" height="1200" id="deck-'+e+'" sandbox="allow-same-origin allow-scripts" scrolling="yes"></iframe></div>';t=t.replace(new RegExp(r,"gi"),n)}return d=[],t}}];var p,h=new a.a.Converter({extensions:[u,f].concat((p=i,function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(p)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()),[{type:"output",regex:/<blockquote>([^]+?)<\/blockquote>/gi,replace:'<blockquote class="relative py-2 px-8 pl-12 my-8 text-xl italic border border-l-4 quote rounded-lg z-0"><div class="stylistic-quote-mark text-gray-200" aria-hidden="true">&ldquo;</div><p>$1</p></blockquote>'}])}),m=function(t){return"<div>"+h.makeHtml(t)+"</div>"};e.a={methods:{kebabCase:function(t){return this.snakeCase(t,"-")},parseMarkdown:function(t){return m(t)},minimalMarkdown:function(t){return m(t)},prettyText:function(t){var e=this.prettified(t);return this.parseMarkdown(e)},prettified:function(t){var e=t.split("\n");return(e=e.map((function(t){for(var e=new RegExp(/\[([+-])?(([X0-9]{1})\s)?([a-z]+)\]/i);;){var r=e.exec(t);if(!r)return t;var n=r[1],a=r[3],s=r[4],i="";if("Pitch"===s&&(s="resource"),"Power"===s&&(s="attack"),s=s.toLowerCase(),n)i=n+a+'<img src="/img/'+s+'.png" class="inline-block h-5 align-middle">';else if(a)for(var o=0;o<a;o++)i+='<img src="/img/'+s+'.png" class="inline-block h-5">';else i+='<img src="/img/'+s+'.png" class="inline-block h-5">';t=t.replace(r[0],i,t)}}))).join("\n")},snakeCase:function(t,e){return e||(e="_"),t.toLowerCase().replace(/[^0-9a-z\s]+/g,"").replace(/\s+/g,e)},ucfirst:function(t){return t[0].toUpperCase()+t.slice(1)},imageDomain:function(){return window.settings.imageDomain},buildQuery:function(t){var e=encodeURIComponent;return Object.keys(t).map((function(r){return e(r)+"="+e(t[r])})).join("&")}}}}}]);
//# sourceMappingURL=decks.test.play.min.js.map?id=9ae0f1bd148110c9a329