(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{219:function(e,t,a){"use strict";var r=a(4),s=a.n(r),n=a(2);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(a,!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c={components:{Submit:a(20).a},props:{mine:{type:Boolean,default:!1}},data:function(){return{heroes:[]}},computed:o({},Object(n.e)("deckSearch",["params"]),{format:{get:function(){return this.params.format||""},set:function(e){this.updateParam({key:"format",value:e})}},hero:{get:function(){return this.params.hero||""},set:function(e){this.updateParam({key:"hero",value:e})}},label:{get:function(){return this.params.label||""},set:function(e){this.updateParam({key:"label",value:e})}},order:{get:function(){return this.params.order||"newest"},set:function(e){this.updateParam({key:"order",value:e})}}}),methods:o({},Object(n.b)("deckSearch",["setPage","updateParam"]),{active:function(e){if(this.params[e])return"shadow-activeNumber"},search:function(){var e=this,t={hero:this.hero,order:this.order,label:this.label,format:this.format,page:this.params.page},a=this.mine?"/decks/mine":"/decks";s.a.get(a,{params:t}).then((function(t){e.$emit("search-completed",t.data)})).catch((function(e){}))},newSearch:function(){this.setPage({page:1}),this.search()}}),watch:{"params.page":function(){this.search()}},created:function(){var e=this;s.a.get("/cards/heroes").then((function(t){e.heroes=t.data})),this.search(),this.$on("refresh",this.search)}},u=a(0),p=Object(u.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"px-4 md:px-0 block flex w-full",on:{submit:function(t){return t.preventDefault(),e.newSearch.apply(null,arguments)}}},[a("div",{staticClass:"sm:w-2/6 pr-1"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.hero,expression:"hero"}],staticClass:"input appearance-none outline-none focus:bg-white focus:border-gray-500 py-3 px-4 rounded-lg",class:e.active("hero"),on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.hero=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("Select hero")]),e._v(" "),e._l(e.heroes,(function(t){return a("option",{domProps:{value:t.name}},[e._v(e._s(t.name))])}))],2)]),e._v(" "),a("div",{staticClass:"sm:w-1/6 pr-1"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.format,expression:"format"}],staticClass:"input appearance-none outline-none focus:bg-white focus:border-gray-500 py-3 px-4 rounded-lg",class:e.active("format"),on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.format=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("Format")]),e._v(" "),a("option",{attrs:{value:"blitz"}},[e._v("Blitz")]),e._v(" "),a("option",{attrs:{value:"constructed"}},[e._v("Constructed")]),e._v(" "),a("option",{attrs:{value:"open"}},[e._v("Open")])])]),e._v(" "),a("div",{staticClass:"sm:w-1/6 pr-1"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.label,expression:"label"}],staticClass:"input appearance-none outline-none focus:bg-white focus:border-gray-500 py-3 px-4 rounded-lg",class:e.active("label"),on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.label=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("Label")]),e._v(" "),e._l(e.$settings.game.decks.labels,(function(t,r){return a("option",{domProps:{value:r}},[e._v(e._s(t))])}))],2)]),e._v(" "),a("div",{staticClass:"sm:w-1/6 pr-1"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.order,expression:"order"}],staticClass:"input appearance-none outline-none focus:bg-white focus:border-gray-500 py-3 px-4 rounded-lg",class:e.active("order"),on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.order=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("Order")]),e._v(" "),a("option",{attrs:{value:"newest"}},[e._v("Newest")]),e._v(" "),a("option",{attrs:{value:"popular"}},[e._v("Popular")])])]),e._v(" "),a("div",{staticClass:"sm:w-1/6"},[a("submit",{staticClass:"w-full",attrs:{text:"Search"}})],1)])}),[],!1,null,null,null);t.a=p.exports},220:function(e,t,a){"use strict";var r=a(4),s=a.n(r);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o={props:{name:{type:String,required:!0},params:{type:Object,default:function(){return{}}},enabled:{type:Boolean,default:!0}},methods:{addDeck:function(){var e=this;s.a.post("/decks/",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(a,!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({name:this.name},this.params)).then((function(t){e.$router.push({name:"decks.build",params:{deck:t.data.slug}})}))}}},l=a(0),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"block text-right",on:{submit:function(t){return t.preventDefault(),e.addDeck()}}},[a("button",{staticClass:"py-2 px-4 appearance-none rounded-lg p-2 button-secondary cursor-pointer",class:{"button-disabled":!e.enabled},attrs:{type:"submit",disabled:!e.enabled}},[e._t("default")],2)])}),[],!1,null,null,null);t.a=c.exports},24:function(e,t,a){"use strict";var r={props:["results"],computed:{data:function(){return this.results.meta?this.results.meta:this.results},pageRange:function(){var e=this.data.current_page,t=this.data.last_page,a=e-3;a+6>t&&(a=t-6),a<1&&(a=1);var r=a+6;r>t&&(r=t);for(var s=[],n=a;n<=r;n++)s.push(n);return s}},methods:{active:function(e){return{"button-secondary":this.data.current_page===e}},disabled:function(e){return e?"hidden":"button-secondary"},select:function(e){this.selectPage(e)},next:function(){this.data.current_page>=this.data.last_page||this.selectPage(this.data.current_page+1)},previous:function(){this.results.current_page<=1||this.selectPage(this.data.current_page-1)},selectPage:function(e){this.$emit("page-selected",e)}}},s=a(0),n=Object(s.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.data?a("div",{staticClass:"flex text-sm justify-center"},[a("a",{staticClass:"inline-block rounded p-2 mr-1",class:e.disabled(1==e.data.current_page),attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.previous.apply(null,arguments)}}},[e._v("<")]),e._v(" "),a("span",{staticClass:"inline-block rounded overflow-hidden"},e._l(e.pageRange,(function(t){return a("a",{staticClass:"inline-block sm:rounded p-2 sm:mr-1 button-primary",class:e.active(t),attrs:{href:""},on:{click:function(a){return a.preventDefault(),e.select(t)}}},[e._v(e._s(t))])})),0),e._v(" "),a("a",{staticClass:"inline-block rounded p-2 ml-1 sm:ml-0",class:e.disabled(e.data.current_page>=e.data.last_page),attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.next.apply(null,arguments)}}},[e._v(">")])]):e._e()}),[],!1,null,null,null);t.a=n.exports},345:function(e,t,a){"use strict";a.r(t);var r=a(2),s=a(220),n=a(55),i=a(22),o=a(21),l=a(51),c=a(32),u=a(219),p=a(9),d=a(16),f=a(24),v=a(44),m=a(20),h=a(10),b=a(4),g=a.n(b);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var k={mixins:[h.a],components:{AddDeck:s.a,Collapser:n.a,Crumbs:i.a,DeckItem:l.a,DeckLabel:c.a,DeckSearch:u.a,Paginator:f.a,Sorter:v.a,Submit:m.a},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(a,!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(r.c)("session",["user"])),data:function(){return{copyDisabled:!1,crumbs:[{text:"Home",link:{name:"home"}},{text:"Deck builder"}],decks:[],response:{},params:{class:"",format:"",page:1}}},methods:{copyDeck:function(e){var t=this;this.copyDisabled||(this.copyDisabled=!0,setTimeout((function(){t.copyDisabled=!1}),3e3),g.a.post("/decks/copy",{deck:e.slug}).then((function(e){t.newSearch()})))},removeDeck:function(e,t){var a=this;window.confirm("Are you sure you want to remove this deck? This action is not reversible.")&&g.a.delete("/decks/"+e.slug).then((function(e){a.decks.splice(t,1)}))},newSearch:function(){var e=this,t=this.params;g.a.get("/decks/mine",{params:t}).then((function(t){e.refreshResults(t)}))},refreshResults:function(e){this.response=e.data,this.decks=d.a.hydrateMany(e.data.data,o.a)},setPage:function(e){this.params.page=e,this.newSearch()}},extends:Object(p.a)((function(e,t){g.a.get("/decks/mine").then((function(e){t((function(){this.refreshResults(e)}))}))})),metaInfo:function(){return{title:"Flesh & Blood Deck builder",description:"Create and customise tournament-winning decks for Flesh & Blood TCG."}}},x=a(0),w=Object(x.a)(k,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("header-title",{attrs:{title:"Deck builder"}}),e._v(" "),a("div",{staticClass:"container mx-auto sm:px-4"},[a("div",{staticClass:"crumbs flex items-center px-4"},[a("crumbs",{staticClass:"py-4 font-serif uppercase",attrs:{crumbs:e.crumbs}}),e._v(" "),a("add-deck",{staticClass:"flex-initial ml-auto",attrs:{name:"New deck"}},[a("span",{staticClass:"hidden sm:block"},[e._v("New deck")]),e._v(" "),a("span",{staticClass:"block sm:hidden"},[e._v("+")])])],1)]),e._v(" "),a("div",{staticClass:"container sm:px-4 sm:mx-auto"},[a("form",{staticClass:"bg-white p-4 block sm:flex w-full",on:{submit:function(t){return t.preventDefault(),e.newSearch.apply(null,arguments)}}},[a("div",{staticClass:"w-full mb-1 sm:mb-0 sm:w-1/3 sm:pr-1"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.params.class,expression:"params.class"}],staticClass:"input focus:bg-white focus:border-gray-500 py-3 px-4 rounded-lg",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.params,"class",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("Select class")]),e._v(" "),e._l(e.$settings.game.classes,(function(t,r){return a("option",{domProps:{value:r}},[e._v(e._s(t))])}))],2)]),e._v(" "),a("div",{staticClass:"w-full mb-1 sm:mb-0 sm:w-1/3 sm:pr-1"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.params.format,expression:"params.format"}],staticClass:"input focus:bg-white focus:border-gray-500 py-3 px-4 rounded-lg",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.params,"format",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("Format")]),e._v(" "),a("option",{attrs:{value:"blitz"}},[e._v("Blitz")]),e._v(" "),a("option",{attrs:{value:"constructed"}},[e._v("Constructed")]),e._v(" "),a("option",{attrs:{value:"open"}},[e._v("Open")])])]),e._v(" "),a("div",{staticClass:"sm:w-1/3"},[a("submit",{staticClass:"w-full",attrs:{text:"Search"}})],1)]),e._v(" "),a("div",{staticClass:"bg-gray-200 p-4 sm:p-0"},[e.user?a("div",[e._m(0),e._v(" "),a("table",{staticClass:"w-full table-auto border-collapse bg-white"},[e._m(1),e._v(" "),a("tbody",e._l(e.decks,(function(t,r){return a("tr",{staticClass:"odd:bg-gray-100 group hover:bg-gray-600 hover:text-white"},[a("td",{staticClass:"border border-gray-300"},[a("div",{staticClass:"flex items-center"},[t.hero?a("img",{attrs:{src:e.squareThumbUrl(t.hero.image,43)}}):e._e(),e._v(" "),a("router-link",{staticClass:"block px-4 py-2",attrs:{to:{name:"decks.build",params:{deck:t.slug}}}},[e._v(e._s(t.name))])],1)]),e._v(" "),a("td",{staticClass:"border border-gray-300 p-2 px-4 hidden lg:table-cell"},[t.label?a("deck-label",{staticClass:"text-xs rounded-full p-1 px-2",attrs:{label:t.label}}):e._e()],1),e._v(" "),a("td",{staticClass:"border border-gray-300 p-2 px-4 hidden lg:table-cell"},[t.parent?a("router-link",{staticClass:"block",attrs:{to:{name:"decks.build",params:{deck:t.parent.slug}}}},[e._v(e._s(t.parent.name))]):e._e()],1),e._v(" "),a("td",{staticClass:"border border-gray-300 p-2 px-4 hidden sm:table-cell"},[e._v(e._s(t.hero?e.$settings.game.classes[t.hero.class]:""))]),e._v(" "),a("td",{staticClass:"border border-gray-300 p-2 px-4 hidden md:table-cell"},[e._v(e._s(t.totalCards))]),e._v(" "),a("td",{staticClass:"border border-gray-300 p-2 px-4 hidden sm:table-cell"},[e._v(e._s(t.updatedAt))]),e._v(" "),a("td",{staticClass:"border border-gray-300 p-2 px-4"},[a("div",{staticClass:"flex space-x-4 justify-center items-center"},[a("router-link",{staticClass:"lg:hidden hover:text-gray-400",attrs:{to:{name:"decks.test",params:{deck:t.slug}}},on:{click:function(a){return e.copyDeck(t)}}},[a("icon",{attrs:{size:6}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"}})])],1),e._v(" "),a("router-link",{staticClass:"hidden lg:inline hover:text-gray-400",attrs:{to:{name:"decks.test.prepare",params:{deck:t.slug}}},on:{click:function(a){return e.copyDeck(t)}}},[a("icon",{attrs:{size:6}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z","clip-rule":"evenodd"}})])],1),e._v(" "),a("button",{staticClass:"hover:text-gray-400",on:{click:function(a){return e.copyDeck(t)}}},[a("icon",{attrs:{size:6}},[a("path",{attrs:{d:"M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z"}}),e._v(" "),a("path",{attrs:{d:"M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h8a2 2 0 00-2-2H5z"}})])],1),e._v(" "),a("button",{staticClass:"hover:text-gray-400",on:{click:function(a){return e.removeDeck(t,r)}}},[a("icon",{attrs:{size:6}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"}})])],1)],1)])])})),0)]),e._v(" "),a("paginator",{staticClass:"py-4",attrs:{results:e.response},on:{"page-selected":e.setPage}})],1):a("p",[e._v("The deck builder is available to registered users only, so if you do not yet have an account, you\n                must "),a("router-link",{staticClass:"link",attrs:{to:"/login"}},[e._v("register or login")]),e._v(".")],1)])])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"p-4"},[t("div",{staticClass:"bg-green-700 rounded-lg text-white px-4 py-2 text-center"},[this._v("\n                        The new deck tester is now LIVE! Available to all for the until next week for free. After then,\n                        restricted to "),t("a",{staticClass:"underline hover:bg-yellow-500",attrs:{href:"https://patreon.com/fabdb",target:"_blank"}},[this._v("supporters of FaB DB")]),this._v(".\n                        Available on laptop/desktop only.\n                    ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",{staticClass:"text-base"},[a("th",{staticClass:"border border-gray-300 p-2 px-4 font-serif uppercase text-left"},[e._v("Deck")]),e._v(" "),a("th",{staticClass:"border border-gray-300 p-2 px-4 font-serif uppercase text-left hidden lg:table-cell"},[e._v("Label")]),e._v(" "),a("th",{staticClass:"border border-gray-300 p-2 px-4 font-serif uppercase text-left hidden lg:table-cell"},[e._v("Parent")]),e._v(" "),a("th",{staticClass:"border border-gray-300 p-2 px-4 font-serif uppercase text-left hidden sm:table-cell"},[e._v("Class")]),e._v(" "),a("th",{staticClass:"border border-gray-300 p-2 px-4 font-serif uppercase text-left hidden md:table-cell"},[e._v("Cards")]),e._v(" "),a("th",{staticClass:"border border-gray-300 p-2 px-4 font-serif uppercase text-left hidden sm:table-cell"},[e._v("Last updated")]),e._v(" "),a("th",{staticClass:"border border-gray-300 p-2 px-4 font-serif uppercase"},[a("span",{staticClass:"hidden lg:block"},[e._v("Actions")])])])])}],!1,null,null,null);t.default=w.exports},44:function(e,t,a){"use strict";var r=a(13),s={props:{field:{type:String,required:!0},text:{type:String,required:!0},clicked:{required:!0},order:{type:String,required:!0},direction:{type:String,required:!0}},components:{Icon:r.a},methods:{handler:function(e,t){this.clicked(this.field)}}},n=a(0),i=Object(n.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex items-center"},[a("a",{staticClass:"link-alternate flex-0",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.handler.apply(null,arguments)}}},[e._v(e._s(e.text))]),e._v(" "),e.order===e.field&&"desc"===e.direction?a("icon",{staticClass:"flex-0",attrs:{size:5}},[a("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})]):e._e(),e._v(" "),e.order===e.field&&"asc"===e.direction?a("icon",{staticClass:"flex-0",attrs:{size:5}},[a("path",{attrs:{d:"M10.707 7.05L10 6.343 4.343 12l1.414 1.414L10 9.172l4.243 4.242L15.657 12z"}})]):e._e()],1)}),[],!1,null,null,null);t.a=i.exports},9:function(e,t,a){"use strict";t.a=function(e){var t=function(){},a=function(a,r,s){e(a,(function(e){t=e,s()}))};return{beforeRouteEnter:a,beforeRouteUpdate:a,created:function(){t.apply(this)},watch:{$route:function(){t.apply(this)}}}}}}]);
//# sourceMappingURL=decks.mine.min.js.map?id=57482e7eaeccf976ea46