(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{14:function(t,e,r){"use strict";e.a={hydrateMany:function(t,e){var r=this;return t.map((function(t){return r.hydrate(t,e)}))},hydrate:function(t,e){return new e(t)},hydratePaginated:function(t,e){return t.data=this.hydrateMany(t.data,e),t}}},17:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(11);function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cards=e}var e,r,i;return e=t,(r=[{key:"applyFilters",value:function(e){var r=this;return new t(this.cards.filter((function(t){return!!(e.indexOf("actions")>-1&&r.isAction(t)||e.indexOf("attacks")>-1&&r.isAttack(t)||e.indexOf("attackReactions")>-1&&r.isAttackReaction(t)||e.indexOf("instants")>-1&&r.isInstant(t)||e.indexOf("defenseReactions")>-1&&r.isDefenseReaction(t))})))}},{key:"isAction",value:function(t){return t.keywords.includes("action")&&!t.keywords.includes("attack")}},{key:"isAttack",value:function(t){return t.keywords.includes("attack")&&!t.keywords.includes("reaction")}},{key:"isAttackReaction",value:function(t){return t.keywords.includes("attack")&&t.keywords.includes("reaction")}},{key:"isDefenseReaction",value:function(t){return t.keywords.includes("defense")&&t.keywords.includes("reaction")}},{key:"isInstant",value:function(t){return t.keywords.includes("instant")}},{key:"hero",value:function(){return this.cards.filter((function(t){return"hero"===t.type}))[0]}},{key:"miscellaneous",value:function(){return new t(this.cards.filter((function(t){return t.keywords.includes("resource")})))}},{key:"attackActions",value:function(){var e=this;return new t(this.cards.filter((function(t){return e.isAttack(t)})))}},{key:"nonAttackActions",value:function(){var e=this;return new t(this.cards.filter((function(t){return e.isAction(t)})))}},{key:"attackReactions",value:function(){var e=this;return new t(this.cards.filter((function(t){return e.isAttackReaction(t)})))}},{key:"defenseReactions",value:function(){var e=this;return new t(this.cards.filter((function(t){return e.isDefenseReaction(t)})))}},{key:"weapons",value:function(){return new t(this.cards.filter((function(t){return t.keywords.includes("weapon")})))}},{key:"equipment",value:function(){return new t(this.cards.filter((function(t){return t.keywords.includes("equipment")})))}},{key:"items",value:function(){return new t(this.cards.filter((function(t){return t.keywords.includes("item")})))}},{key:"instants",value:function(){var e=this;return new t(this.cards.filter((function(t){return e.isInstant(t)})))}},{key:"colouredCount",value:function(t){var e={blue:3,yellow:2,red:1};return this.filter((function(r){return r.stats.resource&&r.stats.resource==e[t]})).total()}},{key:"other",value:function(){var e=this.cards.filter((function(t){return!(t.keywords.includes("hero")||t.keywords.includes("equipment")||t.keywords.includes("weapon"))}));return new t(n.a.sortBy(e,(function(t){return t.stats.resource})))}},{key:"withCost",value:function(){return this.other().filter((function(t){return!isNaN(t.stats.cost)}))}},{key:"withResource",value:function(){return this.other().filter((function(t){return!isNaN(t.stats.resource)}))}},{key:"sort",value:function(){return new t(n.a.sortBy(this.cards,(function(t){var e=t.stats?t.stats.resource:"";return t.name+e})))}},{key:"filter",value:function(e){return new t(this.cards.filter(e))}},{key:"reduce",value:function(t,e){return this.cards.reduce(t,e)}},{key:"find",value:function(t){return this.cards.filter((function(e){return e.identifier===t.identifier}))[0]}},{key:"findKey",value:function(t){for(var e in this.cards)if(this.cards[e].identifier===t.identifier)return e;return!1}},{key:"hydrate",value:function(){return new t(this.cards.reduce((function(t,e){for(var r=0;r<e.total;r++)t.push(e);return t}),[]))}},{key:"total",value:function(){return this.cards.reduce((function(t,e){return t+e.total}),0)}},{key:"count",value:function(){return this.cards.length}},{key:"add",value:function(t){var e=this.find(t);e?e.total+=1:((t=JSON.parse(JSON.stringify(t))).total=1,this.cards.push(t))}},{key:"group",value:function(e){var r="string"==typeof e?function(t){return t[e]}:e;return new t(Object.values(n.a.groupBy(this.cards,r)))}},{key:"concat",value:function(e){return e=e instanceof t?e.all():e,new t(this.cards.concat(e))}},{key:"remove",value:function(t){var e=this.find(t);if(e.total>1)e.total-=1;else{var r=this.findKey(t);!1!==r&&this.cards.splice(r,1)}}},{key:"all",value:function(){return this.cards}},{key:"each",value:function(t){this.cards.forEach(t)}},{key:Symbol.iterator,value:function(){return this.cards.values()}}])&&a(e.prototype,r),i&&a(e,i),t}()},20:function(t,e,r){"use strict";r.d(e,"a",(function(){return f}));var n=r(17),a=r(31);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(){return s(this,e),c(this,u(e).apply(this,arguments))}var r,i,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),r=e,(i=[{key:"avatar",get:function(){return this.fields.avatar}},{key:"name",get:function(){return this.fields.name}},{key:"parent",get:function(){if(this.fields.parent)return new e(this.fields.parent)}},{key:"cardBackImage",get:function(){return this.fields.cardBackImage}},{key:"authorName",get:function(){return this.fields.user.name||"Anonymous"}},{key:"user",get:function(){return this.fields.user}},{key:"label",get:function(){return this.fields.label||""}},{key:"notes",get:function(){return this.fields.notes}},{key:"cards",get:function(){return new n.a(this.fields.cards)}},{key:"hero",get:function(){return this.cards.hero()?new a.a(this.cards.hero()):null}},{key:"sideboard",get:function(){return new n.a(this.fields.sideboard)}},{key:"weapons",get:function(){return this.cards.weapons()}},{key:"equipment",get:function(){return this.cards.equipment()}},{key:"other",get:function(){return this.cards.other()}},{key:"format",get:function(){return this.fields.format}},{key:"totalCards",get:function(){return this.fields.totalCards||0}},{key:"totalSideboard",get:function(){return this.fields.totalSideboard||0}},{key:"totalMainDeck",get:function(){return this.totalCards-this.totalSideboard}},{key:"slug",get:function(){return this.fields.slug}},{key:"updatedAt",get:function(){return moment(this.fields.updatedAt).utc().local().fromNow()}}])&&o(r.prototype,i),f&&o(r,f),e}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fields=e}))},25:function(t,e,r){"use strict";var n={props:["resource"],mixins:[r(5).a]},a=r(0),i=Object(a.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return this.resource?e("div",{staticClass:"inline-block rounded-lg h-2 w-2",class:this.resourceColour(this.resource)}):e("div",{staticClass:"inline-block h-2 w-2"})}),[],!1,null,null,null);e.a=i.exports},252:function(t,e,r){t.exports=r(300)},300:function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function o(t,e,r,n){var a=e&&e.prototype instanceof l?e:l,i=Object.create(a.prototype),s=new x(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return C()}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var o=k(s,r);if(o){if(o===u)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=c(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,s),i}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=o;var u={};function l(){}function f(){}function d(){}var h={};h[a]=function(){return this};var p=Object.getPrototypeOf,v=p&&p(p(_([])));v&&v!==e&&r.call(v,a)&&(h=v);var y=d.prototype=l.prototype=Object.create(h);function m(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function g(t){var e;this._invoke=function(n,a){function i(){return new Promise((function(e,i){!function e(n,a,i,s){var o=c(t[n],t,a);if("throw"!==o.type){var u=o.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,i,s)}),(function(t){e("throw",t,i,s)})):Promise.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,s)}))}s(o.arg)}(n,a,e,i)}))}return e=e?e.then(i,i):i()}}function k(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function _(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=y.constructor=d,d.constructor=f,d[s]=f.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(g.prototype),g.prototype[i]=function(){return this},t.AsyncIterator=g,t.async=function(e,r,n,a){var i=new g(o(e,r,n,a));return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},m(y),y[s]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return s.type="throw",s.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var o=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(o&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;b(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},31:function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fields=e}var e,r,a;return e=t,(r=[{key:"avatar",value:function(){var t=this.name.split(",")[0].toLowerCase().split(" ")[0];return this.young()?t+"-blitz":t}},{key:"young",value:function(){return"young"===this.fields.subType}},{key:"name",get:function(){return this.fields.name}},{key:"image",get:function(){return this.fields.image}},{key:"class",get:function(){return this.fields.class}},{key:"stats",get:function(){return this.fields.stats}},{key:"keywords",get:function(){return this.fields.keywords}}])&&n(e.prototype,r),a&&n(e,a),t}();e.a=a},322:function(t,e,r){"use strict";r.r(e);var n=r(252),a=r.n(n),i=r(2),s=r(18),o=r(14),c=r(20),u=function(t,e){return axios.get("/decks/"+t+"?width="+e).then((function(t){return o.a.hydrate(t.data,c.a)}))},l=r(6),f=r(11),d={history:[],write:function(t,e){this.history.push({action:t,message:e})}},h=r(7),p={mixins:[h.a],methods:{drag:function(t,e,r){var n=this.$parent[e][r],a=new Image;a.src=n.image,t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("from",e),t.dataTransfer.setData("index",r),t.dataTransfer.setDragImage(a,100,139)},drop:function(t,e){var r=t.dataTransfer.getData("from"),n=t.dataTransfer.getData("index");void 0===n&&(n=this.$parent[r].length-1),this.send(n,r,e)},send:function(t,e,r){var n=this.$parent[e].splice(t,1)[0];this.$parent[r].push(n);var a="";switch(r){case"pitch":a=this.ucfirst(r)+'ed "'+n.name+'".';break;case"banished":a='Banished "'+n.name+'".';break;case"hand":a='Moved "'+n.name+'" back to hand.';break;case"arsenal":case"graveyard":a='Moved "'+n.name+'" to '+r+"."}d.write("move-card",a)}}},v={props:{deck:{type:Array,required:!0},cardBack:{type:String,required:!0}},mixins:[p],data:function(){return{capture:!1}},computed:{total:function(){var t=Math.ceil(this.deck.length/20);return t>4?4:t}},methods:{draw:function(){var t=this.deck.pop();t&&(this.$parent.hand.push(t),d.write("draw",'Drew "'+t.name+'"'))},drawMany:function(t){for(var e=0;e<t;e++)this.draw()},drawNumber:function(t){t.stopPropagation(),!isNaN(t.key)&&this.capture&&this.drawMany(t.key)},position:function(t){return{left:2*t+"px",top:2*t+"px"}}},mounted:function(){var t=this;document.addEventListener("keyup",this.drawNumber),this.$eventHub.$on("end-turn",(function(){var e=t.$parent.hero.stats.intellect-t.$parent.hand.length;e>0&&t.drawMany(e)}))}},y=r(0),m=Object(y.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.deck.length?r("button",{staticClass:"w-full h-full relative",on:{click:function(e){return e.preventDefault(),t.draw.apply(null,arguments)},keyup:function(e){return e.preventDefault(),t.drawNumber.apply(null,arguments)},mouseenter:function(e){e.preventDefault(),t.capture=!0},mouseleave:function(e){e.preventDefault(),t.capture=!1},dragstart:function(e){return t.drag(e,"deck",t.deck.length-1)}}},[r("img",{staticClass:"z-0 invisible",attrs:{src:t.cardBack}}),t._v(" "),t._l(t.total,(function(e,n){return r("img",{staticClass:"absolute rounded-card border border-gray-200 z-25",style:t.position(n),attrs:{src:t.cardBack}})})),t._v(" "),r("div",{staticClass:"absolute z-50 w-full flex justify-center text-white text-center font-serif uppercase text-2xl top-2/3"},[r("div",{staticClass:"flex justify-center items-center inline-block bg-semi-black rounded-full relative h-16 w-16",staticStyle:{left:"4px"}},[r("span",[t._v("\n                "+t._s(t.deck.length)+"\n            ")])])])],2):t._e()}),[],!1,null,null,null).exports,g={props:{hand:{type:Array,required:!0}},mixins:[p],data:function(){return{focused:null,images:[]}},methods:{setFocused:function(t){this.focused=t},classes:function(t){return{"opacity-30 z-50":null!==this.focused&&this.focused!==t,"opacity-0 z-0":null===this.focused||this.focused===t}},transform:function(t){var e=this.hand.length;if(1!==e){var r=10*e>60?60/e:10,n=-(e-1)*r/2+t*r;return{transform:"rotate("+n+"deg)",marginTop:Math.abs(n)*(.22*Math.abs(n))+"px"}}}},mounted:function(){var t=this;this.$eventHub.$on("end-turn",(function(){t.focused=null}))}},k=Object(y.a)(g,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"w-full"},[r("div",{staticClass:"relative w-full flex justify-center items-start -space-x-10 my-8 min-h-96",on:{drop:function(e){return e.preventDefault(),t.drop(e,"hand")},dragover:function(t){t.preventDefault()},dragenter:function(t){t.preventDefault()}}},t._l(t.hand,(function(e,n){return r("div",{staticClass:"relative z-0 w-200 hover:z-25 cursor-pointer",style:t.transform(n),on:{mouseover:function(e){return t.setFocused(n)},mouseout:function(e){return t.setFocused(null)}}},[r("card-image",{staticClass:"relative z-25",attrs:{card:e,draggable:""},nativeOn:{dragstart:function(e){return t.drag(e,"hand",n)},dragend:function(e){return t.setFocused(null)},click:function(e){return t.send(n,"hand","graveyard")}}}),t._v(" "),r("div",{staticClass:"transition duration-300 absolute top-0 bottom-0 w-full bg-gray-200 rounded-card",class:t.classes(n)})],1)})),0)])}),[],!1,null,null,null).exports,w={data:function(){return{history:d.history,open:!1}},methods:{toggle:function(){this.open=!this.open}}},b=Object(y.a)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"absolute bottom-0 right-0"},[t.open?r("div",{staticClass:"transition flex flex-col h-96 -mt-96 -ml-40 mb-4 overflow-hidden w-56 bg-gray-100 rounded-lg shadow-lg z-100",class:{"opacity-100":t.open,"opacity-0":!t.open}},[r("header",{staticClass:"relative bg-primary px-4 py-2 text-center font-serif uppercase text-white z-50"},[t._v("\n            History\n        ")]),t._v(" "),r("div",{staticClass:"relative flex-grow py-2"},[r("div",{staticClass:"absolute bottom-0 w-full space-y-1 z-25"},t._l(t.history,(function(e){return r("div",{staticClass:"px-4 odd:bg-black"},[t._v("\n                    "+t._s(e.message)+"\n                ")])})),0)])]):t._e(),t._v(" "),r("button",{staticClass:"transition duration-300 transform bg-primary hover:bg-secondary rounded-full h-16 w-16 flex justify-center items-center text-white shadow-lg hover:scale-110",on:{click:t.toggle}},[r("svg",{staticClass:"h-10 w-10",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}})])])])}),[],!1,null,null,null).exports,x={props:{pile:{type:String,required:!0},name:{type:String,required:!0}},mixins:[p],computed:{top4:function(){return this.stack.slice(-4)},stack:function(){return this.$parent[this.pile]}},methods:{position:function(t){return{left:2*t+"px",top:2*t+"px"}}}},_=Object(y.a)(x,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"h-full",on:{drop:function(e){return e.preventDefault(),t.drop(e,t.pile)},dragover:function(t){t.preventDefault()},dragenter:function(t){t.preventDefault()}}},[t.stack.length?r("div",{staticClass:"w-full h-full relative"},[t._l(t.top4,(function(e,n){return r("card-image",{key:e.identifier+n,staticClass:"absolute rounded-card border border-gray-200 z-20",style:t.position(n),attrs:{card:e,draggable:""},nativeOn:{dragstart:function(e){return t.drag(e,t.pile,n)},click:function(e){return t.send(n,t.pile,"hand")}}})})),t._v(" "),r("div",{staticClass:"absolute z-50 w-full flex justify-center text-white text-center font-serif uppercase text-2xl top-2/3"},[r("div",{staticClass:"flex justify-center items-center inline-block bg-semi-black rounded-full relative h-12 w-12",staticStyle:{left:"4px"}},[r("span",[t._v("\n                    "+t._s(t.stack.length)+"\n                ")])])])],2):r("div",{staticClass:"bg-gray-300 font-serif text-xl uppercase rounded-card h-full pt-32 text-center"},[t._v(t._s(t.name))])])}),[],!1,null,null,null).exports;function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var j=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.deck=e,this.mainDeck=e.cards.other(),this.sideboard=e.sideboard.other(),this.hero=e.hero,this.slug=e.slug}var e,r,n;return e=t,(r=[{key:"move",value:function(t,e,r){r.add(t),e.remove(t)}},{key:"hydrate",value:function(){this.mainDeck=this.mainDeck.hydrate(),this.sideboardStack=this.sideboard.hydrate()}}])&&C(e.prototype,r),n&&C(e,n),t}(),O={name:"deck.play",props:{tester:{type:j,required:!0}},components:{Deck:m,Hand:k,History:b,Stack:_},data:function(){return{arsenal:[],banished:[],deck:[],graveyard:[],hand:[],hero:this.tester.hero,imageCache:[],pitch:[]}},methods:{endTurn:function(){for(;this.pitch.length;){var t=this.pitch.pop();this.deck.unshift(t),d.write("move-card",'Moved "'+t.name+'" to bottom of deck.')}this.$eventHub.$emit("end-turn")},preload:function(){for(var t in this.imageCache=[],this.deck){var e=new Image(200);e.src=this.deck[t].image,this.imageCache.push(e)}},reset:function(){this.deck=f.a.shuffle(this.tester.mainDeck.hydrate().cards),this.banished=[],this.graveyard=[],this.pitch=[],this.hand=[],this.arsenal=[]}},mounted:function(){this.reset(),this.preload()}},E=Object(y.a)(O,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"relative"},[r("div",{staticClass:"flex justify-center items-stretch space-x-4"},[r("div",{staticClass:"w-200"},[r("stack",{attrs:{pile:"banished",name:"Banished"}})],1),t._v(" "),r("div",{staticClass:"w-200"},[r("stack",{attrs:{pile:"arsenal",name:"Arsenal"}})],1),t._v(" "),r("div",{staticClass:"pr-4"},[r("div",{staticClass:"w-200"},[r("card-image",{staticClass:"h-full",attrs:{card:t.hero}})],1)]),t._v(" "),r("div",{staticClass:"pl-4"},[r("div",{staticClass:"w-200"},[r("deck",{staticClass:"cursor-pointer",attrs:{deck:t.deck,"card-back":t.tester.deck.cardBackImage}})],1)]),t._v(" "),r("div",{staticClass:"w-200"},[r("stack",{attrs:{pile:"pitch",name:"Pitched"}})],1),t._v(" "),r("div",{staticClass:"w-200"},[r("stack",{attrs:{pile:"graveyard",name:"Graveyard"}})],1)]),t._v(" "),r("hand",{attrs:{hand:t.hand}}),t._v(" "),r("div",{staticClass:"relative -top-20 flex justify-center space-x-4"},[r("button",{staticClass:"transition duration-200 transform bg-secondary hover:bg-red-500 rounded-full h-12 w-12 flex justify-center items-center text-white shadow-lg hover:scale-110",on:{click:function(e){t.$parent.step="prepare"}}},[r("svg",{staticClass:"h-7 w-7",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"}})])]),t._v(" "),r("button",{staticClass:"transition duration-200 transform bg-primary hover:bg-black rounded-full px-8 justify-center items-center text-white shadow-lg hover:scale-110",on:{click:t.endTurn}},[t._v("\n                End turn\n            ")]),t._v(" "),r("button",{staticClass:"transition duration-200 transform bg-secondary hover:bg-red-500 rounded-full h-12 w-12 flex justify-center items-center text-white shadow-lg hover:scale-110",on:{click:t.reset}},[r("svg",{staticClass:"h-6 w-6",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"}})])])])],1)}),[],!1,null,null,null).exports,D=r(17),S=r(25),P={props:{stack:{required:!0,type:Object},handler:{required:!0,type:Function}},components:{Colour:S.a}},T=Object(y.a)(P,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"rounded-xl border border-gray-400 p-4 pb-3"},[t.stack.total()?r("div",t._l(t.stack,(function(e){return r("div",{staticClass:"group flex items-center bg-gray-300 hover:bg-gray-100 overflow-auto rounded-lg text-base mb-1 cursor-pointer",on:{click:function(r){return t.handler(e)}}},[t.$slots.left?r("div",{staticClass:"pl-4"},[r("icon",{staticClass:"group-hover:text-gray-500",attrs:{size:5}},[t._t("left")],2)],1):t._e(),t._v(" "),r("div",{staticClass:"pl-4"},[e.stats.resource?r("colour",{staticClass:"mr-2",attrs:{resource:e.stats.resource}}):t._e()],1),t._v(" "),r("div",{staticClass:"px-2 py-1"},[t._v(t._s(e.name)+" ("+t._s(e.total)+")")]),t._v(" "),t.$slots.right?r("div",{staticClass:"px-4 ml-auto"},[r("icon",{staticClass:"group-hover:text-gray-500",attrs:{size:5}},[t._t("right")],2)],1):t._e()])})),0):r("div",{staticClass:"text-base pb-1"},[t._v("\n        There are no cards in this stack.\n    ")])])}),[],!1,null,"66692862",null).exports,L={name:"deck.prepare",props:{tester:{type:j,required:!0}},components:{Colour:S.a,DeckPreparer:T},data:function(){return{mainDeck:null,deckTotal:0,sideboard:null}},methods:{move:function(t,e){var r=this;return function(n){r.tester.move(n,t,e),r.refresh()}},refresh:function(){this.mainDeck=new D.a(f.a.sortBy(this.tester.mainDeck.all(),(function(t){return t.name}))),this.sideboard=new D.a(f.a.sortBy(this.tester.sideboard.all(),(function(t){return t.name}))),this.deckTotal=this.mainDeck.total()}},created:function(){this.refresh()}},A=Object(y.a)(L,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex"},[r("div",{staticClass:"w-1/3 mx-4"},[r("h2",{staticClass:"uppercase font-serif text-xl mb-2"},[t._v("Deck "),r("span",{staticClass:"text-gray-400 ml-1"},[t._v("(")]),r("span",{class:{"text-red-500":t.deckTotal<60}},[t._v(t._s(t.deckTotal))]),r("span",{staticClass:"text-gray-400"},[t._v(")")])]),t._v(" "),r("deck-preparer",{attrs:{stack:t.mainDeck,handler:t.move(t.tester.mainDeck,t.tester.sideboard)},scopedSlots:t._u([{key:"right",fn:function(){return[r("path",{attrs:{d:"M10 7H2v6h8v5l8-8-8-8v5z"}})]},proxy:!0}])})],1),t._v(" "),r("div",{staticClass:"w-1/3 mx-4"},[r("h2",{staticClass:"uppercase font-serif text-xl mb-2"},[t._v("Sideboard "),r("span",{staticClass:"text-gray-400 ml-1"},[t._v("(")]),t._v(t._s(t.tester.sideboard.total())),r("span",{staticClass:"text-gray-400"},[t._v(")")])]),t._v(" "),r("deck-preparer",{attrs:{stack:t.sideboard,handler:t.move(t.tester.sideboard,t.tester.mainDeck)},scopedSlots:t._u([{key:"left",fn:function(){return[r("path",{attrs:{d:"M10 13h8V7h-8V2l-8 8 8 8v-5z"}})]},proxy:!0}])})],1),t._v(" "),r("div",{staticClass:"w-1/5 mx-4"},[r("card-image",{attrs:{card:t.tester.hero}}),t._v(" "),r("button",{staticClass:"flex w-full mt-4 py-3 px-4 rounded-full button-primary items-center",on:{click:function(e){t.$parent.step="play"}}},[r("span",[t._v("Ready (Test!)")]),t._v(" "),r("icon",{staticClass:"ml-auto",attrs:{size:5}},[r("path",{attrs:{d:"M10 7H2v6h8v5l8-8-8-8v5z"}})])],1)],1)])}),[],!1,null,null,null).exports;function $(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function z(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var M={components:{Breadcrumbs:s.a,HeaderTitle:l.a,Play:E,Prepare:A},mixins:[h.a],data:function(){return{deck:null,step:"prepare"}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$(r,!0).forEach((function(e){z(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(i.c)("session",["premium"]),{crumbs:function(){return[{text:"Home",link:"/"},{text:"Deck Builder",link:"/decks/mine"},{text:"Test "+this.deck.name}]},tester:function(){return new j(this.deck)}}),methods:{load:function(){var t;return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(u(this.$route.params.deck,200));case 2:(t=e.sent).cards.each((function(e){var r=t.sideboard.find(e);r&&(e.total=e.total-r.total)})),this.deck=t;case 5:case"end":return e.stop()}}),null,this)}},mounted:function(){this.load()}},q=Object(y.a)(M,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.deck?r("div",[r("header-title",{attrs:{title:"Test Deck"}}),t._v(" "),r("breadcrumbs",{attrs:{crumbs:t.crumbs}}),t._v(" "),r("div",{staticClass:"bg-gray-200"},[t.premium?r("div",{staticClass:"container py-8 sm:mx-auto"},[r(t.step,{tag:"component",attrs:{tester:t.tester}})],1):r("div",[r("div",{staticClass:"container px-4 py-8 sm:mx-auto"},[r("h2",{staticClass:"font-serif uppercase text-xl mb-4"},[t._v("Membership required")]),t._v(" "),r("p",[t._v("\n                    Testing your deck's draw capabilities is a premium access feature. In order to use this feature,\n                    you must be a Patreon supporter. Check out "),r("router-link",{staticClass:"link",attrs:{to:{name:"support"}}},[t._v("our support page")]),t._v(" or\n                    go directly to our "),r("a",{staticClass:"link",attrs:{href:"https://www.patreon.com/fabdb"}},[t._v("Patreon page")]),t._v(". Memberships start as\n                    low as $3/month!\n                ")],1)])])])],1):t._e()}),[],!1,null,null,null);e.default=q.exports},7:function(t,e,r){"use strict";r(204);var n=r(254),a=r.n(n),i={a:"link",h1:"text-4xl",h2:"text-2xl",h3:"text-xl",ol:"list-decimal ml-8",p:"my-4",ul:"list-disc ml-8"},s=Object.keys(i).map((function(t){return{type:"output",regex:new RegExp("<".concat(t,"(.*)>"),"g"),replace:"<".concat(t,' class="').concat(i[t],'" $1>')}})),o=(r(29),[]),c="left",u={left:"sm:float-left sm:m-4 sm:ml-0",right:"sm:float-right sm:m-4 sm:mr-0"},l=[{type:"lang",regex:/\^cards\((([A-Z]{3}[0-9]{3},?)+)\)/gi,replace:function(t,e){return o.push(e),"%CARDS"+(o.length-1)+"%"}},{type:"output",filter:function(t){for(var e=0;e<o.length;++e){var r=o[e].split(","),n=r.map((function(t){return'<card-ad identifier="'+t+'"></card-ad>'})),a="%CARDS"+e+"%",i="";if(1===r.length){var s="right"===c?"left":"right";i=u[s],c=s}else i="flex items-start justify-center";t=t.replace(new RegExp(a,"gi"),'<div class="'+i+'">'+n.join("\n")+"</div>")}return o=[],t}}],f=[],d=[{type:"lang",regex:/\^deck\(([A-Z]+)\)/gi,replace:function(t,e){return f.push(e),"%DECK"+(f.length-1)+"%"}},{type:"output",filter:function(t){for(var e=0;e<f.length;++e){var r="<p>%DECK"+e+"% *</p>",n='<div class="block sm:m-8 mt-0 sm:float-right border border-gray-400"><iframe src="'+(window.location.protocol+"//"+window.location.hostname+"/decks/embed/"+f[e])+'" width="350" height="1200" id="deck-'+e+'" sandbox="allow-same-origin allow-scripts" scrolling="yes"></iframe></div>';t=t.replace(new RegExp(r,"gi"),n)}return f=[],t}}];var h,p=new a.a.Converter({extensions:[l,d].concat((h=s,function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(h)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()),[{type:"output",regex:/<blockquote>([^]+?)<\/blockquote>/gi,replace:'<blockquote class="relative py-2 px-8 pl-12 my-8 text-xl italic border border-l-4 quote rounded-lg z-0"><div class="stylistic-quote-mark text-gray-200" aria-hidden="true">&ldquo;</div><p>$1</p></blockquote>'}])}),v=function(t){return"<div>"+p.makeHtml(t)+"</div>"};e.a={methods:{kebabCase:function(t){return this.snakeCase(t,"-")},parseMarkdown:function(t){return v(t)},minimalMarkdown:function(t){return v(t)},prettyText:function(t){var e=this.prettified(t);return this.parseMarkdown(e)},prettified:function(t){var e=t.split("\n");return(e=e.map((function(t){for(var e=new RegExp(/\[([+-])?(([X0-9]{1})\s)?([a-z]+)\]/i);;){var r=e.exec(t);if(!r)return t;var n=r[1],a=r[3],i=r[4],s="";if("Pitch"===i&&(i="resource"),"Power"===i&&(i="attack"),i=i.toLowerCase(),n)s=n+a+'<img src="/img/'+i+'.png" class="inline-block h-5 align-middle">';else if(a)for(var o=0;o<a;o++)s+='<img src="/img/'+i+'.png" class="inline-block h-5">';else s+='<img src="/img/'+i+'.png" class="inline-block h-5">';t=t.replace(r[0],s,t)}}))).join("\n")},snakeCase:function(t,e){return e||(e="_"),t.toLowerCase().replace(/[^0-9a-z\s]+/g,"").replace(/\s+/g,e)},ucfirst:function(t){return t[0].toUpperCase()+t.slice(1)},imageDomain:function(){return window.settings.imageDomain},buildQuery:function(t){var e=encodeURIComponent;return Object.keys(t).map((function(r){return e(r)+"="+e(t[r])})).join("&")}}}}}]);
//# sourceMappingURL=decks.test.main.min.js.map?id=fd2594309813638c2693