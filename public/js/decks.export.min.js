(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{11:function(t,e,r){"use strict";var n=r(15);e.a={computed:{attacksPerHand:function(){return(this.totalAttacks/(this.totalOther/4)).toFixed(1)},averageAttack:function(){return(n.a.reduce(this.attacks,(function(t,e){return t+e.stats.attack*e.total}),0)/this.totalAttacks).toFixed(1)},averageBlock:function(){return(n.a.reduce(this.blocks,(function(t,e){return t+e.stats.defense*e.total}),0)/this.totalBlocks).toFixed(1)},averageCost:function(){var t=this.other.reduce((function(t,e){return e.stats.cost&&!isNaN(e.stats.cost)?t+e.stats.cost*e.total:t}),0);return(this.totalOther?t/this.totalOther:0).toFixed(2)},averagePitch:function(){var t=this.other.reduce((function(t,e){return e.stats.resource?t+e.stats.resource*e.total:t+0}),0);return(this.totalOther?t/this.totalOther:0).toFixed(2)},hero:function(){if(this.cards)return this.cards.filter((function(t){return t.keywords.includes("hero")}))[0]},attacks:function(){return this.other.filter((function(t){return t.keywords.includes("attack")&&!t.keywords.includes("reaction")}))},blocks:function(){return this.other.filter((function(t){return t.stats.defense&&t.stats.defense>0}))},weapons:function(){return this.cards.filter((function(t){return t.keywords.includes("weapon")}))},equipment:function(){return this.cards.filter((function(t){return t.keywords.includes("equipment")}))},other:function(){var t=this.cards.filter((function(t){return!(t.keywords.includes("hero")||t.keywords.includes("equipment")||t.keywords.includes("weapon"))}));return n.a.sortBy(t,(function(t){return t.stats.resource}))},totalOther:function(){return this.other.reduce((function(t,e){return t+e.total}),0)},totalAttacks:function(){return this.attacks.reduce((function(t,e){return t+e.total}),0)},totalBlocks:function(){return this.blocks.reduce((function(t,e){return t+e.total}),0)},totalClass:function(){return this.countCards(this.other.filter((function(t){return!t.keywords.includes("generic")})))},totalGeneric:function(){return this.countCards(this.other.filter((function(t){return t.keywords.includes("generic")})))},totalCards:function(){var t=this.other.filter((function(t){return!t.keywords.includes("token")})).reduce((function(t,e){return t+e.total}),0);return this.deck&&"blitz"===this.deck.format&&this.hero&&t++,t+this.equipment.reduce((function(t,e){return t+e.total}),0)+this.weapons.reduce((function(t,e){return t+e.total}),0)},totalActions:function(){return this.totalCardType(this.other,["action"])},totalAttackActions:function(){return this.totalCardType(this.other,["action","attack"])},totalAttackReactions:function(){return this.totalCardType(this.other,["attack","reaction"])},totalDefenseReactions:function(){return this.totalCardType(this.other,["defense","reaction"])},totalInstants:function(){return this.totalCardType(this.other,["instant"])},totalColoured:function(){return{blue:this.countColoured("blue"),yellow:this.countColoured("yellow"),red:this.countColoured("red")}}},methods:{costCount:function(t){return this.other.filter((function(e){return t<3?e.stats.cost==t:e.stats.cost>=t})).reduce((function(t,e){return t+e.total}),0)},countColoured:function(t){var e={blue:3,yellow:2,red:1},r=this.other.filter((function(r){return r.stats.resource==e[t]})),n=0;for(var o in r)n+=r[o].total;return n},pitchCount:function(t){return this.other.filter((function(e){return e.stats.resource==t})).reduce((function(t,e){return t+e.total}),0)},averageCardType:function(t,e){return(this.totalCardType(t,e)/t.length).toFixed(1)},totalCardType:function(t,e){return t.reduce((function(t,r){for(var n=0,o=0;o<e.length;o++)r.keywords.includes(e[o])&&n++;return n<e.length?t:t+r.total}),0)},countCards:function(t){return n.a.reduce(t,(function(t,e){return t+e.total}),0)}}}},335:function(t,e,r){"use strict";r.r(e);var n=r(4),o=r.n(n),s=r(2),a=r(5),i=r(9),u=r(23),c=r(6),l=r(7),d=r(18),f=r(11);function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(r,!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var v={components:{CardImage:i.a,Crumbs:u.a,HeaderTitle:c.a,Submit:d.a},mixins:[a.a,f.a],computed:m({},Object(s.c)("session",["user"]),{name:{get:function(){return this.user.name},set:function(t){this.setUserParam({param:"name",value:t})}},gemId:{get:function(){return this.user.gemId},set:function(t){this.setUserParam({param:"gemId",value:t})}},cards:function(){return this.deck.cards},crumbs:function(){return[{text:"Home",link:"/"},{text:"Deck Builder",link:"/decks/build/"+this.deck.slug},{text:"Export deck"}]}}),data:function(){return{deck:null,event:null,exportRequested:!1,format:"pdf"}},methods:m({},Object(s.b)("session",["setUserParam"]),{requestExport:function(){var t=this,e={name:this.name,gemId:this.gemId,event:this.event};o.a.post("/export/"+this.deck.slug+"."+this.format,e).then((function(e){t.exportRequested=!0}))}}),metaInfo:function(){return{title:"Deck builder - Export deck"}},extends:Object(l.a)((function(t,e){o.a.get("/decks/"+t.params.deck).then((function(t){e((function(){this.deck=t.data}))}))}))},b=r(1),g=Object(b.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("header-title",{attrs:{title:"Export deck"}}),t._v(" "),r("div",{staticClass:"bg-red-900 text-white font-serif uppercase"},[r("div",{staticClass:"container sm:mx-auto p-4 flex"},[r("div",{staticClass:"flex-1"},[r("crumbs",{attrs:{crumbs:t.crumbs}})],1)])]),t._v(" "),r("div",{staticClass:"bg-gray-200"},[r("div",{staticClass:"container sm:mx-auto bg-white py-8 px-8"},[r("div",{staticClass:"container sm:mx-auto border-b border-gray-400 mb-8"},[t.hero?r("h1",{staticClass:"inline-block font-serif text-4xl"},[t._v(t._s(t.hero.name)+" ("+t._s(t.deck.name)+")")]):t._e()]),t._v(" "),r("div",{staticClass:"md:flex"},[r("div",{staticClass:"md:w-2/3 md:pr-8"},[t.exportRequested?r("div",[r("p",[t._v("Your deck export has been requested, and shall arrived at your email inbox in a few moments.")])]):r("div",[r("p",{staticClass:"mb-4 p-4 bg-blue-500 rounded-lg text-white"},[t._v("\n                            The information collected below is not saved, but is required for your PDF as part of\n                            the tournament pack export. We will email you your export once it's been generated.\n                        ")]),t._v(" "),r("form",{on:{submit:function(e){return e.preventDefault(),t.requestExport.apply(null,arguments)}}},[r("div",{staticClass:"w-full mt-4"},[r("label",{staticClass:"block font-serif uppercase tracking-wide mb-1"},[t._v("Name")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input focus:bg-white focus:border-gray-500 py-3 px-4 rounded-lg",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"w-full mt-4"},[r("label",{staticClass:"block font-serif uppercase tracking-wide mb-1"},[t._v("GEM player ID")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.gemId,expression:"gemId"}],staticClass:"input focus:bg-white focus:border-gray-500 py-3 px-4 rounded-lg",attrs:{type:"text"},domProps:{value:t.gemId},on:{input:function(e){e.target.composing||(t.gemId=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"w-full mt-4"},[r("label",{staticClass:"block font-serif uppercase tracking-wide mb-1"},[t._v("Event")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.event,expression:"event"}],staticClass:"input focus:bg-white focus:border-gray-500 py-3 px-4 rounded-lg",attrs:{type:"text"},domProps:{value:t.event},on:{input:function(e){e.target.composing||(t.event=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"w-full mt-4"},[r("label",{staticClass:"block font-serif uppercase tracking-wide mb-1"},[t._v("Export format")]),t._v(" "),r("label",{staticClass:"block",attrs:{fpr:"pdf-export"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.format,expression:"format"}],staticClass:"focus:bg-white focus:border-gray-500",attrs:{type:"radio",name:"format",value:"pdf",id:"pdf-export"},domProps:{checked:t._q(t.format,"pdf")},on:{change:function(e){t.format="pdf"}}}),t._v(" "),r("span",{staticClass:"ml-4"},[t._v("PDF")])]),t._v(" "),r("label",{staticClass:"block mt-2",attrs:{for:"zip-export"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.format,expression:"format"}],staticClass:"focus:bg-white focus:border-gray-500",attrs:{type:"radio",name:"format",value:"zip",id:"zip-export"},domProps:{checked:t._q(t.format,"zip")},on:{change:function(e){t.format="zip"}}}),t._v(" "),r("span",{staticClass:"ml-4"},[t._v("ZIP")])])]),t._v(" "),r("submit",{staticClass:"mt-8",attrs:{text:"Export"}})],1)])]),t._v(" "),r("div",{staticClass:"hidden md:block md:w-1/3"},[r("card-image",{attrs:{card:t.hero}})],1)])])])],1)}),[],!1,null,null,null);e.default=g.exports},7:function(t,e,r){"use strict";e.a=function(t){var e=function(){},r=function(r,n,o){t(r,(function(t){e=t,o()}))};return{beforeRouteEnter:r,beforeRouteUpdate:r,created:function(){e.apply(this)},watch:{$route:function(){e.apply(this)}}}}}}]);
//# sourceMappingURL=decks.export.min.js.map?id=52255dcb9a1dcc1517d5