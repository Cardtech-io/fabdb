(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{218:function(t,e,r){"use strict";var s=r(15),n=r.n(s),a=r(13),i=r(35);function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(r,!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u={props:{external:{type:Object,default:function(){return{}}},page:Number,limit:{type:Number,default:12},useCase:String,refreshable:{type:Boolean,default:!0},wait:Boolean},components:{Icon:a.a},mixins:[i.a],data:function(){var t=o({},this.external,{keywords:""});return{params:o({},t,{},this.fromQuery(this.onlyParams("keywords"))),sets:this.filterSets()}},computed:{advancedSearchLink:function(){var t=new URLSearchParams(this.onlyParams("keywords","cost","cardType","set","pitch","class","rarity","talent"));return this.$route.path+"/advanced?"+t.toString()},keywordClasses:function(){var t="";return this.params.keywords?t+=" px-2":t+=" px-2 sm:px-4",t}},methods:{newSearch:function(){this.params.page=1,this.updateQuery(this.params)},filterSets:function(){return n.a.sortBy(this.$settings.game.sets,"name")},query:function(t){return t?this.$route.query[t]:this.$route.query},search:function(){var t=this,e=this.combineParams(o({},this.params,{"use-case":this.useCase},this.$route.query)),r="collection"===this.useCase?"collection":"cards";axios.get("/"+r,{params:e}).then((function(e){t.$emit("search-completed",e.data)})).catch((function(t){}))}},mounted:function(){this.wait||this.search()},watch:{"$route.query":function(){this.search()}}},d=r(0),p=Object(d.a)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-base"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.newSearch.apply(null,arguments)}}},[r("div",{staticClass:"flex w-full px-4 md:px-0"},[r("div",{staticClass:"w-3/4 pr-1 flex bg-gray-200 focus:bg-white focus:border-gray-500 rounded-lg mr-2"},[t.params.keywords?r("button",{staticClass:"flex-initial ml-2 sm:ml-4 text-red-500",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.params.keywords="",t.newSearch()}}},[r("icon",{attrs:{size:6}},[r("path",{attrs:{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"}})])],1):t._e(),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.params.keywords,expression:"params.keywords"}],staticClass:"flex-1 bg-transparent outline-none py-2",class:t.keywordClasses,attrs:{type:"text",placeholder:"Keywords..."},domProps:{value:t.params.keywords},on:{input:function(e){e.target.composing||t.$set(t.params,"keywords",e.target.value)}}}),t._v(" "),r("button",{staticClass:"flex-initial mr-2 link-alternate",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.show("search-help")}}},[r("icon",{attrs:{size:6}},[r("path",{attrs:{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"}})])],1)]),t._v(" "),t._m(0)]),t._v(" "),r("div",{staticClass:"w-full text-center mt-2"},[r("router-link",{staticClass:"inline-block rounded-t-lg bg-gray-300 hover:bg-gray-200 text-gray-500 uppercase font-serif text-sm pt-2 pb-1 px-4 mx-auto",attrs:{to:t.advancedSearchLink}},[t._v("Advanced")])],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/4"},[e("input",{staticClass:"appearance-none block w-full button-primary rounded-lg py-3 px-2 sm:px-4 leading-tight focus:outline-none",attrs:{type:"submit",value:"Search"}})])}],!1,null,null,null);e.a=p.exports},24:function(t,e,r){"use strict";var s={props:["results"],computed:{data:function(){return this.results.meta?this.results.meta:this.results},pageRange:function(){var t=this.data.current_page,e=this.data.last_page,r=t-3;r+6>e&&(r=e-6),r<1&&(r=1);var s=r+6;s>e&&(s=e);for(var n=[],a=r;a<=s;a++)n.push(a);return n}},methods:{active:function(t){return{"button-secondary":this.data.current_page===t}},disabled:function(t){return t?"hidden":"button-secondary"},select:function(t){this.selectPage(t)},next:function(){this.data.current_page>=this.data.last_page||this.selectPage(this.data.current_page+1)},previous:function(){this.results.current_page<=1||this.selectPage(this.data.current_page-1)},selectPage:function(t){this.$emit("page-selected",t)}}},n=r(0),a=Object(n.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.data?r("div",{staticClass:"flex text-sm justify-center"},[r("a",{staticClass:"inline-block rounded p-2 mr-1",class:t.disabled(1==t.data.current_page),attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.previous.apply(null,arguments)}}},[t._v("<")]),t._v(" "),r("span",{staticClass:"inline-block rounded overflow-hidden"},t._l(t.pageRange,(function(e){return r("a",{staticClass:"inline-block sm:rounded p-2 sm:mr-1 button-primary",class:t.active(e),attrs:{href:""},on:{click:function(r){return r.preventDefault(),t.select(e)}}},[t._v(t._s(e))])})),0),t._v(" "),r("a",{staticClass:"inline-block rounded p-2 ml-1 sm:ml-0",class:t.disabled(t.data.current_page>=t.data.last_page),attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.next.apply(null,arguments)}}},[t._v(">")])]):t._e()}),[],!1,null,null,null);e.a=a.exports},25:function(t,e,r){"use strict";var s={props:["resource"],mixins:[r(5).a]},n=r(0),a=Object(n.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return this.resource?e("div",{staticClass:"inline-block rounded-lg h-2 w-2",class:this.resourceColour(this.resource)}):e("div",{staticClass:"inline-block h-2 w-2"})}),[],!1,null,null,null);e.a=a.exports},326:function(t,e,r){"use strict";r.r(e);var s=r(2),n=r(218),a=r(22),i=r(6),c=r(13),o=r(35),l=r(24),u=r(4),d=r.n(u),p=r(5),h={props:["sku","count"],data:function(){return{save:null,total:0}},methods:{add:function(){var t=this;this.$emit("card-added",this.type),this.total+=1,this.save&&clearTimeout(this.save),this.save=setTimeout((function(){d.a.post("/collection/",{sku:t.sku,total:t.total}),t.total=0}),1e3)}}},f=r(0),m={props:["sku","count"],data:function(){return{save:null,total:0}},computed:{classes:function(){return{"link-alternate":!this.disabled,"text-gray-400":this.disabled,"cursor-not-allowed":this.disabled}},disabled:function(){return 0===this.count}},methods:{remove:function(){var t=this;this.disabled||(this.$emit("card-removed",this.type),this.total+=1,this.save&&clearTimeout(this.save),this.save=setTimeout((function(){d.a.delete("/collection/"+t.sku+"?total="+t.total),t.total=0}),1e3))}}},v={props:["printing"],components:{Add:Object(f.a)(h,(function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"py-2 w-1/3 rounded sm:hover:bg-secondary active:bg-primary sm:hover:text-white",on:{click:this.add}},[this._v("+")])}),[],!1,null,null,null).exports,Remove:Object(f.a)(m,(function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"py-2 w-1/3 rounded",class:{"sm:hover:bg-secondary active:bg-primary sm:hover:text-white":this.count>0,"text-gray-400":0===this.count},attrs:{disabled:this.disabled},on:{click:this.remove}},[this._v("-")])}),[],!1,null,null,null).exports},data:function(){return{index:this.$root.collectionTabIndex}},computed:{total:{get:function(){return this.printing.total},set:function(t){this.printing.total=t,setTimeout(this.save,2e3)}}},methods:{decrement:function(t){this.printing.total-1<0||(this.printing.total-=1)},increment:function(t){this.printing.total+=1},save:function(){var t={sku:this.printing.sku.sku,type:this.type,total:this.total};d.a.put("/collection/",t)}},beforeCreate:function(){this.$root.collectionTabIndex+=1}},g=Object(f.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex items-center mx-auto"},[r("remove",{attrs:{sku:t.printing.sku.sku,count:t.total},on:{"card-removed":t.decrement}}),t._v(" "),r("div",{staticClass:"w-1/3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.total,expression:"total"}],staticClass:"w-full bg-white text-center outline-none focus:bg-white p-2",attrs:{type:"text",tabindex:t.index},domProps:{value:t.total},on:{input:function(e){e.target.composing||(t.total=e.target.value)}}})]),t._v(" "),r("add",{attrs:{sku:t.printing.sku.sku,count:t.total},on:{"card-added":t.increment}})],1)}),[],!1,null,null,null).exports,b=r(54),y=r(10),w={components:{CardCount:g,Colour:r(25).a,Icon:c.a,RaritySymbol:b.a},mixins:[p.a,y.a],props:{printing:Object},methods:{toggle:function(t,e){d.a.post("/collection/"+t.sku.sku+"/"+e)}}},_=Object(f.a)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",{staticClass:"odd:bg-gray-100 hover:bg-gray-300 group hover:font-bold items-center p-1"},[r("td",{attrs:{width:"50"}},[r("img",{staticClass:"rounded-card",attrs:{src:t.cardImageFromSku(t.printing.sku.sku,50)}})]),t._v(" "),r("td",{staticClass:"pl-2 sm:pl-4"},[r("div",{staticClass:"flex items-center space-x-1"},[r("div",{staticClass:"font-bold"},[t._v(t._s(t.printing.card.name))]),t._v(" "),t.printing.card.stats.resource?r("colour",{attrs:{resource:t.printing.card.stats.resource}}):t._e()],1),t._v(" "),r("sku-finish",{attrs:{sku:t.printing.sku}}),t._v("\n        "+t._s(t.englishFinish(t.printing.sku.finish))+"\n    ")],1),t._v(" "),r("td",{staticClass:"hidden md:table-cell w-1/10"},[t._v(t._s(t.printing.sku.set.name))]),t._v(" "),r("td",{staticClass:"hidden sm:table-cell w-1/20 text-center rarity"},[r("rarity-symbol",{attrs:{rarity:t.printing.rarity}})],1),t._v(" "),r("td",{staticClass:"w-1/4 md:w-1/10 flex-shrink-0"},[r("card-count",{attrs:{printing:t.printing}})],1),t._v(" "),r("td",{staticClass:"w-1/10 md:w-1/20 text-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.printing.trade,expression:"printing.trade"}],staticClass:"form-checkbox h-5 w-5 text-green-500 focus:outline-none",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.printing.trade)?t._i(t.printing.trade,null)>-1:t.printing.trade},on:{click:function(e){return t.toggle(t.printing,"trade")},change:function(e){var r=t.printing.trade,s=e.target,n=!!s.checked;if(Array.isArray(r)){var a=t._i(r,null);s.checked?a<0&&t.$set(t.printing,"trade",r.concat([null])):a>-1&&t.$set(t.printing,"trade",r.slice(0,a).concat(r.slice(a+1)))}else t.$set(t.printing,"trade",n)}}})]),t._v(" "),r("td",{staticClass:"w-1/10 md:w-1/20 text-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.printing.want,expression:"printing.want"}],staticClass:"form-checkbox h-5 w-5 text-green-500 focus:outline-none",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.printing.want)?t._i(t.printing.want,null)>-1:t.printing.want},on:{click:function(e){return t.toggle(t.printing,"want")},change:function(e){var r=t.printing.want,s=e.target,n=!!s.checked;if(Array.isArray(r)){var a=t._i(r,null);s.checked?a<0&&t.$set(t.printing,"want",r.concat([null])):a>-1&&t.$set(t.printing,"want",r.slice(0,a).concat(r.slice(a+1)))}else t.$set(t.printing,"want",n)}}})])])}),[],!1,null,null,null).exports,x=r(45);function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function C(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var O={components:{Printing:_,CardSearch:n.a,Crumbs:a.a,Icon:c.a,HeaderTitle:i.a,Paginator:l.a,Sorter:x.a},mixins:[o.a],data:function(){return{crumbs:[{text:"Home",link:"/"},{text:"My Collection"}],page:1,results:{},search:{view:this.$route.query.view||"all",order:this.$route.query.order||"sku",direction:this.$route.query.direction||"asc"},title:"My collection",display:"list"}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(r,!0).forEach((function(e){C(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(s.c)("session",["user"])),methods:{activeFilter:function(t){return this.search.view===t?"bg-white":""},filter:function(t){this.search.view=t,this.updateQuery({page:1,view:this.search.view})},refreshResults:function(t){this.results=t},sort:function(t){t===this.search.order?this.search.direction="asc"===this.search.direction?"desc":"asc":this.search.direction="asc",this.search.order=t,this.updateQuery({direction:this.search.direction,order:this.search.order})},tabClasses:function(t){return t===this.search.view?"bg-white text-gray-700":"button-primary hover:button-secondary"},toggleDisplay:function(){this.display="list"===this.display?"gallery":"list"},updatePage:function(t){this.updateQuery({page:t})}},mounted:function(){this.$root.collectionTabIndex=0},metaInfo:function(){return{title:this.title,meta:[{vmid:"description",name:"description",content:"Manage your Flesh & Blood card collection."}]}}},j=Object(f.a)(O,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("header-title",{attrs:{title:"My Collection"}}),t._v(" "),r("div",{staticClass:"crumbs"},[r("div",{staticClass:"container sm:mx-auto p-4 pb-0 flex items-center"},[r("div",{staticClass:"flex text-base"},[r("button",{staticClass:"p-2 px-4 rounded-t-lg mr-1",class:t.tabClasses("all"),on:{click:function(e){return t.filter("all")}}},[t._v("All")]),t._v(" "),r("button",{staticClass:"p-2 px-4 rounded-t-lg mr-1",class:t.tabClasses("have"),on:{click:function(e){return t.filter("have")}}},[t._v("Have")]),t._v(" "),r("button",{staticClass:"p-2 px-4 rounded-t-lg mr-1",class:t.tabClasses("need"),on:{click:function(e){return t.filter("need")}}},[t._v("Need")])]),t._v(" "),r("div",{staticClass:"ml-auto"},[r("router-link",{staticClass:"font-serif uppercase hover:opacity-50",attrs:{to:{name:"user.profile.wants",params:{user:t.user.slug}}}},[r("span",{staticClass:"hidden sm:inline"},[t._v("My want/trade list")]),t._v(" "),r("icon",{staticClass:"sm:hidden -mt-1",attrs:{size:8}},[r("path",{attrs:{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}}),t._v(" "),r("path",{attrs:{"fill-rule":"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"}})])],1)],1)])]),t._v(" "),r("div",{staticClass:"bg-white pt-4 border-b-4 border-gray-300"},[r("div",{staticClass:"container sm:mx-auto sm:px-4"},[r("card-search",{attrs:{"use-case":"collection",external:Object.assign({},{per_page:15},t.search)},on:{"search-completed":t.refreshResults}})],1)]),t._v(" "),r("div",{staticClass:"bg-gray-200 pb-8 text-base"},[r("div",{staticClass:"container sm:mx-auto"},[t.results&&t.results.data?r("div",{staticClass:"sm:px-4"},[r("div",{staticClass:"mx-auto py-4"},[r("paginator",{attrs:{results:t.results},on:{"page-selected":t.updatePage}})],1),t._v(" "),r("table",{staticClass:"w-full bg-white space-x-4 p-1 border-b-2 border-gray-300"},[r("thead",[r("tr",[t._m(0),t._v(" "),r("td",{staticClass:"py-1"},[r("div",{staticClass:"flex space-x-2"},[r("sorter",{attrs:{field:"name",text:"Name",order:t.search.order,direction:t.search.direction,clicked:t.sort}}),t._v(" "),r("span",[t._v("\\")]),t._v(" "),r("sorter",{attrs:{field:"sku",text:"Sku",order:t.search.order,direction:t.search.direction,clicked:t.sort}})],1)]),t._v(" "),r("td",{staticClass:"hidden md:table-cell w-1/10"},[t._v("Set/Release")]),t._v(" "),r("td",{staticClass:"hidden sm:table-cell w-1/20"},[r("sorter",{staticClass:"justify-center",attrs:{field:"rarity",text:"Rarity",order:t.search.order,direction:t.search.direction,clicked:t.sort}})],1),t._v(" "),r("td",{staticClass:"w-1/4 md:w-1/10 text-center"},[t._v("Total")]),t._v(" "),r("td",{staticClass:"w-1/10 md:w-1/20 text-center"},[t._v("Trade")]),t._v(" "),r("td",{staticClass:"w-1/10 md:w-1/20 text-center"},[t._v("Want")])])]),t._v(" "),r("tbody",t._l(t.results.data,(function(t){return r("printing",{key:t.sku.sku,attrs:{printing:t}})})),1)]),t._v(" "),r("div",{staticClass:"py-4"},[r("paginator",{attrs:{results:t.results},on:{"page-selected":t.updatePage}})],1)]):t._e()])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{},[e("div",{staticStyle:{width:"50px"}})])}],!1,null,null,null);e.default=j.exports},35:function(t,e,r){"use strict";var s=r(12);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}e.a={methods:{buildQuery:function(t){return s.a.mapObject(this.combineParams(t),(function(t){return Array.isArray(t)?t.join(","):t}))},fromQuery:function(t){return s.a.mapObject(t,(function(t,e){return-1!==["class","cardType","rarity","set","talent",";"].indexOf(e)?t.split(",").filter((function(t){return!!t})):t}))},updateQuery:function(t){var e=this.combineParams(t);this.$router.push({query:e}).catch((function(t){}))},combineParams:function(t){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(r,!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},this.clone(this.$route.query),{},t)},clone:function(t){return JSON.parse(JSON.stringify(t))},onlyParams:function(){for(var t={},e=this.clone(this.$route.query),r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];for(var a in e)-1!==s.indexOf(a)&&(t[a]=e[a]);return t}}}},45:function(t,e,r){"use strict";var s=r(13),n={props:{field:{type:String,required:!0},text:{type:String,required:!0},clicked:{required:!0},order:{type:String,required:!0},direction:{type:String,required:!0}},components:{Icon:s.a},methods:{handler:function(t,e){this.clicked(this.field)}}},a=r(0),i=Object(a.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex items-center"},[r("a",{staticClass:"link-alternate flex-0",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.handler.apply(null,arguments)}}},[t._v(t._s(t.text))]),t._v(" "),t.order===t.field&&"desc"===t.direction?r("icon",{staticClass:"flex-0",attrs:{size:5}},[r("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})]):t._e(),t._v(" "),t.order===t.field&&"asc"===t.direction?r("icon",{staticClass:"flex-0",attrs:{size:5}},[r("path",{attrs:{d:"M10.707 7.05L10 6.343 4.343 12l1.414 1.414L10 9.172l4.243 4.242L15.657 12z"}})]):t._e()],1)}),[],!1,null,null,null);e.a=i.exports}}]);
//# sourceMappingURL=collection.min.js.map?id=b68104b4474db44ef92f