(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{323:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r(4),s=r.n(a),o=r(21);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={components:{Submit:o.a},data:function(){return{email:""}},methods:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(r,!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(n.b)("messages",["addMessage"]),{checkEmail:function(){var e=this;s.a.post("/auth/check-email",{email:this.email}).then((function(t){e.$emit("email-changed",e.email),e.$emit("status-changed",t.data.status)})).catch((function(t){if(422===t.response.status){var r=t.response.data.errors;for(var n in r)for(var a in r[n])e.addMessage({status:"error",message:r[n][a]})}}))}})},l=r(0),p=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{on:{submit:function(t){return t.preventDefault(),e.checkEmail()}}},[r("div",{staticClass:"flex mb-4"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"input focus:bg-white focus:border-gray-500 w-3/4 p-4 rounded-l-lg",attrs:{type:"email",placeholder:"Email address",required:"required"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),r("submit",{staticClass:"w-1/4 p-4 rounded-l-none rounded-r-lg",attrs:{text:"Next"}})],1),e._v(" "),r("p",[e._v("\n        Some features on FaB DB require an account. Registration & login is super easy! Just\n        provide your email address and we'll take it from here!\n    ")])])}),[],!1,null,null,null).exports,d=r(6);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b={props:{email:{required:!0,type:String}},components:{Submit:o.a},data:function(){return{emailConfirmation:""}},methods:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(r,!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(n.b)("messages",["addMessage"]),{register:function(){var e=this;s.a.post("/auth/register",{email:this.email,email_confirmation:this.emailConfirmation}).then((function(t){e.$emit("status-changed",t.data.status)})).catch((function(t){if(422===t.response.status){var r=t.response.data.errors;for(var n in r)for(var a in r[n])e.addMessage({status:"error",message:r[n][a]})}}))}})},g=Object(l.a)(b,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{on:{submit:function(t){return t.preventDefault(),e.register()}}},[r("div",{staticClass:"mb-4"},[r("input",{staticClass:"input focus:bg-white focus:border-gray-500 w-full rounded-lg p-4 mb-2",attrs:{type:"email",required:"required",readonly:""},domProps:{value:e.email}}),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.emailConfirmation,expression:"emailConfirmation"}],staticClass:"input focus:bg-white focus:border-gray-500 w-full rounded-lg p-4 mb-2",attrs:{type:"email",placeholder:"Confirm email",required:"required"},domProps:{value:e.emailConfirmation},on:{input:function(t){t.target.composing||(e.emailConfirmation=t.target.value)}}}),e._v(" "),r("submit",{staticClass:"w-full p-4",attrs:{text:"Next"}})],1),e._v(" "),r("p",[e._v("\n        We couldn't find that email address. To register, please confirm your email. We'll send you a login code to confirm your email.\n        Once completed, if you wish, you can configure your account to use a password instead.\n    ")])])}),[],!1,null,null,null).exports,v={methods:{success:function(e){var t=this.$route.query.from||"/decks/build";window.session.user=e,this.setUser({user:e}),window.location=t}}},h=r(47);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w={props:{email:{required:!0,type:String}},mixins:[v],components:{Submit:o.a},data:function(){return{code:""}},methods:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(r,!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(n.b)("messages",["addMessage"]),{},Object(n.b)("session",["setUser"]),{submitCode:function(){var e=this;s.a.post("/auth/validate/",{email:this.email,code:this.code}).then((function(t){h.a.track("Authentication","Authenticated code"),e.success(t.data.user)})).catch((function(t){404===t.response.status&&e.addMessage({status:"error",message:"The auth code you have provided is incorrect. Please check to that you have not copied it correctly."})}))}})},j=Object(l.a)(w,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{on:{submit:function(t){return t.preventDefault(),e.submitCode()}}},[r("div",{staticClass:"flex mb-8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"input focus:bg-white focus:border-gray-500 w-2/3 p-4 rounded-l-lg",attrs:{type:"text",placeholder:"Enter your authentication code",required:"required"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),e._v(" "),r("submit",{staticClass:"w-2/3 p-4 rounded-l-none rounded-r-lg",attrs:{text:"Next"}})],1),e._v(" "),r("p",[e._v("Great! Now a one-time code will be emailed to you. When it arrives, copy and paste the code into the form above.")])])}),[],!1,null,null,null).exports;function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C={props:{email:{required:!0,type:String}},mixins:[v],components:{Submit:o.a},data:function(){return{password:""}},methods:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(r,!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(n.b)("messages",["addMessage"]),{},Object(n.b)("session",["setUser"]),{login:function(){var e=this;s.a.post("/auth/password",{email:this.email,password:this.password}).then((function(t){h.a.track("Authentication","Authenticated password"),e.success(t.data.user)})).catch((function(t){422===t.response.status&&e.addMessage({status:"error",message:t.response.data.error})}))}})};function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x={components:{CheckEmail:p,EnterPassword:Object(l.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{on:{submit:function(t){return t.preventDefault(),e.login()}}},[r("div",{staticClass:"mb-4"},[r("input",{staticClass:"input focus:bg-white focus:border-gray-500 w-full rounded-lg p-4 mb-2",attrs:{type:"email",readonly:""},domProps:{value:e.email}}),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input focus:bg-white focus:border-gray-500 w-full rounded-lg p-4 mb-2",attrs:{type:"password",placeholder:"Enter password",required:"required"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),r("submit",{staticClass:"w-full p-4",attrs:{text:"Next"}})],1),e._v(" "),r("p",[e._v("\n        Great! Looks like you have an account! Please enter your password to complete login.\n    ")])])}),[],!1,null,null,null).exports,HeaderTitle:d.a,Register:g,ValidateCode:j},data:function(){return{email:"",step:"first"}},methods:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(r,!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(n.b)("messages",["addMessage"]),{},Object(n.b)("session",["setUser"]),{updateEmail:function(e){this.email=e},updateStep:function(e){this.step=e}})},S=Object(l.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("header-title",{attrs:{title:"Login / Register"}}),e._v(" "),e._m(0),e._v(" "),r("div",{staticClass:"bg-gray-200"},[r("div",{staticClass:"container sm:mx-auto"},[r("div",{staticClass:"bg-white p-4 pb-16"},["first"===e.step?r("check-email",{on:{"status-changed":e.updateStep,"email-changed":e.updateEmail}}):e._e(),e._v(" "),"registration-required"===e.step?r("register",{attrs:{email:e.email},on:{"status-changed":e.updateStep}}):e._e(),e._v(" "),"code-requested"===e.step||"user-registered"===e.step?r("validate-code",{attrs:{email:e.email}}):e._e(),e._v(" "),"password-required"===e.step?r("enter-password",{attrs:{email:e.email}}):e._e()],1)])])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"crumbs font-serif uppercase"},[t("div",{staticClass:"container sm:mx-auto p-4"},[this._v(" ")])])}],!1,null,null,null);t.default=S.exports},47:function(e,t,r){"use strict";t.a={track:function(e,t,r,n){"undefined"!=typeof ga&&gtag("event",t,{event_category:e,event_label:r,value:n})}}}}]);
//# sourceMappingURL=auth.login.c46cbfda314e1b82f505.min.js.map