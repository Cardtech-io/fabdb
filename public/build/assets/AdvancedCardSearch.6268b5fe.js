import{h as p,n as d,c as m,_ as v}from"./app.77650677.js";const y={methods:{buildQuery(l){return p.mapObject(this.combineParams(l),t=>Array.isArray(t)?t.join(","):t)},fromQuery(l){return p.mapObject(l,(t,a)=>["class","cardType","rarity","set","talent",";"].indexOf(a)!==-1?t.split(",").filter(e=>!!e):t)},updateQuery(l){let t=this.buildQuery(l);this.$router.push({query:t}).catch(a=>{})},combineParams(l){return{...this.clone(this.$route.query),...l}},clone(l){return JSON.parse(JSON.stringify(l))},exceptParams(...l){let t={},a=this.clone(this.$route.query);for(var e in a)l.indexOf(e)===-1&&(t[e]=a[e]);return t}}},f={components:{Icon:m},mixins:[y],props:{query:{required:!0}},data(){let l={cost:"",cardType:[],keywords:"",pitch:"",set:[],class:[],rarity:[],talent:[]};return{base:l,params:{...l,...this.query},sets:this.filterSets()}},methods:{active(l){if(this.params[l]&&this.params[l].length>0)return"shadow-active"},filterSets(){return v.sortBy(this.$settings.game.sets,"name")},reset(){for(let l in this.base)this.params[l]=this.base[l]},newSearch(){this.$eventHub.$emit("advanced-search",this.params),this.$modal.hideAll()}}};var _=function(){var t=this,a=t._self._c;return a("div",{staticClass:"border-b-4 border-gray-300 dark:border-gray-600 pb-24"},[a("h2",{staticClass:"relative font-serif uppercase bg-secondary text-white px-4 py-2"},[t._v(" Advanced search "),a("button",{staticClass:"absolute top-0 right-0 mr-2 mt-2",on:{click:function(e){return t.$modal.hideAll()}}},[a("icon",{attrs:{size:6}},[a("path",{attrs:{d:"M2.93 17.07A10 10 0 1117.07 2.93 10 10 0 012.93 17.07zM11.4 10l2.83-2.83-1.41-1.41L10 8.59 7.17 5.76 5.76 7.17 8.59 10l-2.83 2.83 1.41 1.41L10 11.41l2.83 2.83 1.41-1.41L11.41 10z"}})])],1)]),a("form",{staticClass:"bg-white dark:bg-gray-800 block p-4",on:{submit:function(e){return e.preventDefault(),t.newSearch.apply(null,arguments)}}},[a("div",{staticClass:"md:flex mb-4"},[a("div",{staticClass:"md:w-1/5 py-2"},[t._v("Keyword search")]),a("div",{staticClass:"md:w-4/5"},[a("div",{staticClass:"flex bg-gray-200 dark:bg-black rounded-lg",class:t.active("keywords")},[a("button",{staticClass:"flex-initial ml-2 link-alternate",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.show("search-help")}}},[a("icon",{attrs:{size:6}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"}})])],1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.keywords,expression:"params.keywords"}],staticClass:"flex-1 bg-transparent border-none ring-none outline-none py-2 px-2 sm:px-4",attrs:{type:"text"},domProps:{value:t.params.keywords},on:{input:function(e){e.target.composing||t.$set(t.params,"keywords",e.target.value)}}})])])]),a("div",{staticClass:"md:flex mb-4"},[a("div",{staticClass:"md:w-1/5 py-2"},[t._v("Class")]),a("div",{staticClass:"md:w-4/5"},[a("label",{staticClass:"block"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.class,expression:"params.class"}],attrs:{type:"checkbox",value:"none"},domProps:{checked:Array.isArray(t.params.class)?t._i(t.params.class,"none")>-1:t.params.class},on:{change:function(e){var r=t.params.class,s=e.target,i=!!s.checked;if(Array.isArray(r)){var o="none",n=t._i(r,o);s.checked?n<0&&t.$set(t.params,"class",r.concat([o])):n>-1&&t.$set(t.params,"class",r.slice(0,n).concat(r.slice(n+1)))}else t.$set(t.params,"class",i)}}}),t._v(" Not classed ")]),t._l(t.$settings.game.classes,function(e,r){return a("label",{staticClass:"block"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.class,expression:"params.class"}],attrs:{type:"checkbox"},domProps:{value:r,checked:Array.isArray(t.params.class)?t._i(t.params.class,r)>-1:t.params.class},on:{change:function(s){var i=t.params.class,o=s.target,n=!!o.checked;if(Array.isArray(i)){var u=r,c=t._i(i,u);o.checked?c<0&&t.$set(t.params,"class",i.concat([u])):c>-1&&t.$set(t.params,"class",i.slice(0,c).concat(i.slice(c+1)))}else t.$set(t.params,"class",n)}}}),t._v(" "+t._s(e)+" ")])})],2)]),a("div",{staticClass:"md:flex mb-4"},[a("div",{staticClass:"md:w-1/5 py-2"},[t._v("Talent")]),a("div",{staticClass:"md:w-4/5"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.params.talent,expression:"params.talent"}],staticClass:"input focus:bg-white focus:border-gray-500 py-3 px-2 sm:px-4 rounded-lg",class:t.active("talent"),attrs:{multiple:"multiple"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(s){return s.selected}).map(function(s){var i="_value"in s?s._value:s.value;return i});t.$set(t.params,"talent",e.target.multiple?r:r[0])}}},[a("option",{attrs:{value:"none"}},[t._v("Not talented")]),t._l(t.$settings.game.talents,function(e,r){return a("option",{domProps:{value:r}},[t._v(t._s(e))])})],2)])]),a("div",{staticClass:"md:flex mb-4"},[a("div",{staticClass:"md:w-1/5 py-2"},[t._v("Set")]),a("div",{staticClass:"md:w-4/5"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.params.set,expression:"params.set"}],staticClass:"input focus:bg-white focus:border-gray-500 py-3 px-2 md:px-4 rounded-lg",class:t.active("set"),attrs:{multiple:"multiple"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(s){return s.selected}).map(function(s){var i="_value"in s?s._value:s.value;return i});t.$set(t.params,"set",e.target.multiple?r:r[0])}}},t._l(t.sets,function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}),0)])]),a("div",{staticClass:"md:flex mb-4"},[a("div",{staticClass:"md:w-1/5 py-2"},[t._v("Pitch")]),a("div",{staticClass:"md:w-4/5"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.params.pitch,expression:"params.pitch"}],staticClass:"input focus:bg-white focus:border-gray-500 py-3 px-2 md:px-4 rounded-lg",class:t.active("pitch"),on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(s){return s.selected}).map(function(s){var i="_value"in s?s._value:s.value;return i});t.$set(t.params,"pitch",e.target.multiple?r:r[0])}}},[a("option",{attrs:{value:""}}),a("option",{attrs:{value:"1"}},[t._v("1")]),a("option",{attrs:{value:"2"}},[t._v("2")]),a("option",{attrs:{value:"3"}},[t._v("3")])])])]),a("div",{staticClass:"md:flex mb-4"},[a("div",{staticClass:"md:w-1/5 py-2"},[t._v("Card cost")]),a("div",{staticClass:"md:w-4/5"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.params.cost,expression:"params.cost"}],staticClass:"input focus:bg-white focus:border-gray-500 py-3 px-2 md:px-4 rounded-lg",class:t.active("cost"),on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(s){return s.selected}).map(function(s){var i="_value"in s?s._value:s.value;return i});t.$set(t.params,"cost",e.target.multiple?r:r[0])}}},[a("option",{attrs:{value:""}}),a("option",{attrs:{value:"0"}},[t._v("0")]),a("option",{attrs:{value:"1"}},[t._v("1")]),a("option",{attrs:{value:"2"}},[t._v("2")]),a("option",{attrs:{value:"3"}},[t._v("3")]),a("option",{attrs:{value:"4"}},[t._v("4+")])])])]),a("div",{staticClass:"md:flex mb-4"},[a("div",{staticClass:"md:w-1/5 py-2"},[t._v("Card type(s)")]),a("div",{staticClass:"md:w-4/5"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.params.cardType,expression:"params.cardType"}],staticClass:"input focus:bg-white focus:border-gray-500 py-3 px-2 md:px-4 rounded-lg",class:t.active("cardType"),attrs:{multiple:"multiple",size:"6"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(s){return s.selected}).map(function(s){var i="_value"in s?s._value:s.value;return i});t.$set(t.params,"cardType",e.target.multiple?r:r[0])}}},[a("option",{attrs:{value:"non-attack action"}},[t._v("'Non-attack' action")]),a("option",{attrs:{value:"attack action"}},[t._v("Attack action")]),a("option",{attrs:{value:"attack reaction"}},[t._v("Attack reaction")]),a("option",{attrs:{value:"defense reaction"}},[t._v("Defense reaction")]),a("option",{attrs:{value:"equipment"}},[t._v("Equipment")]),a("option",{attrs:{value:"hero"}},[t._v("Hero")]),a("option",{attrs:{value:"instant"}},[t._v("Instant")]),a("option",{attrs:{value:"item"}},[t._v("Item")]),a("option",{attrs:{value:"weapon"}},[t._v("Weapon")])])])]),a("div",{staticClass:"md:flex mb-4"},[a("div",{staticClass:"md:w-1/5 py-2"},[t._v("Rarity")]),a("div",{staticClass:"md:w-4/5"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.params.rarity,expression:"params.rarity"}],staticClass:"input focus:bg-white focus:border-gray-500 py-3 px-2 md:px-4 rounded-lg",class:t.active("rarity"),attrs:{multiple:"multiple",size:"6"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(s){return s.selected}).map(function(s){var i="_value"in s?s._value:s.value;return i});t.$set(t.params,"rarity",e.target.multiple?r:r[0])}}},t._l(t.$settings.game.rarities,function(e,r){return a("option",{domProps:{value:r}},[t._v(t._s(e))])}),0)])]),a("div",{staticClass:"text-center flex md:block"},[a("input",{staticClass:"w-1/2 md:w-auto button-primary py-2 px-4 rounded-l-lg md:rounded-r-lg mx-auto",attrs:{type:"submit",value:"Search"}}),a("input",{staticClass:"w-1/2 md:w-auto button-secondary py-2 px-4 rounded-r-lg md:rounded-l-lg mx-auto",attrs:{type:"button",value:"Reset"},on:{click:function(e){return t.reset()}}})])])])},h=[],g=d(f,_,h,!1,null,null,null,null);const b=g.exports,w=Object.freeze(Object.defineProperty({__proto__:null,default:b},Symbol.toStringTag,{value:"Module"}));export{b as A,y as Q,w as a};
