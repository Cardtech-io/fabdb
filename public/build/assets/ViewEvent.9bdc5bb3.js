import{m as a,o as l,a as r,n as i,B as c,H as u,b as d}from"./app.d4472289.js";import{E as v,T as p}from"./Time.48f8cfad.js";import{L as m}from"./LazyLoader.0379a251.js";import{A as _}from"./Avatar.2df4f599.js";import{B as g}from"./Badge.dadab543.js";const f={props:["event"],computed:{...a("session",["user"])},data(){return{decks:[],registered:this.event.registered}},methods:{...l("messages",["addMessage"]),selectDeck:function(n){r.post("/events/"+this.event.slug+"/deck",{deck:n.slug}).then(e=>{this.$modal.hide("submit-deck"),this.addMessage({status:"success",message:"Your deck has been submitted."})})},showModal:function(){this.$modal.show("submit-deck")},register:function(){r.post("/events/"+this.event.slug+"/register").then(n=>{this.registered=!0,this.addMessage({status:"success",message:"You are now registered for this event."})})},unregister:function(){r.delete("/events/"+this.event.slug+"/registration").then(n=>{this.registered=!1,this.addMessage({status:"success",message:"You are no longer registered for this event."})})}},mounted(){this.user&&r.get("/decks/mine").then(n=>{this.decks=n.data})}};var h=function(){var e=this,t=e._self._c;return t("div",[e.user?t("div",[e.registered?e._e():t("button",{staticClass:"appearance-none bg-blue-700 text-white rounded-lg py-3 px-4 leading-tight focus:outline-none hover:bg-blue-500 disabled:opacity-50",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),e.register()}}},[e._v(" Register for event ")]),e.registered?t("button",{staticClass:"appearance-none bg-red-700 text-white rounded-lg py-3 px-4 leading-tight focus:outline-none hover:bg-red-500 disabled:opacity-50",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),e.unregister()}}},[e._v(" Unregister from event ")]):e._e(),e.registered?t("button",{staticClass:"appearance-none bg-blue-700 text-white rounded-lg py-3 px-4 leading-tight focus:outline-none hover:bg-blue-500 disabled:opacity-50",on:{click:function(s){return s.preventDefault(),e.showModal()}}},[e._v(" Submit a deck ")]):e._e(),t("modal",{attrs:{name:"submit-deck",classes:"bg-gray-100"}},[t("h2",{staticClass:"bg-red-900 text-white font-serif text-2xl uppercase py-3 px-8"},[e._v("Submit your deck")]),e.decks.length?t("ul",e._l(e.decks,function(s){return t("li",{staticClass:"even:bg-gray-200 hover:bg-white hover:cursor-pointer"},[t("a",{staticClass:"block w-full px-8 py-2",attrs:{href:""},on:{click:function(o){return o.preventDefault(),e.selectDeck(s)}}},[e._v(" "+e._s(s.hero.name)+" ("+e._s(s.name)+") ")])])}),0):t("div",{staticClass:"px-8 py-4"},[e._v(" You have not yet created any decks. In order to participate in the event you must "),t("router-link",{staticClass:"link",attrs:{to:{name:"decks.build"}}},[e._v("build a deck")]),e._v(" then submit it via the event page. ")],1)])],1):t("div",[e._v(" Please "),t("router-link",{staticClass:"link",attrs:{to:"/login?from="+e.$route.path}},[e._v("login")]),e._v(" to register for this event. ")],1)])},b=[],x=i(f,h,b,!1,null,null,null,null);const y=x.exports,C={props:["event"],components:{Avatar:_,Badge:g},computed:{...a("session",["user"])}};var k=function(){var e=this,t=e._self._c;return t("div",[t("h2",{staticClass:"font-serif uppercase text-2xl mb-2"},[e._v("Registered Players")]),e.event.players&&e.event.players.length?t("div",[t("ul",e._l(e.event.players,function(s){return t("li",{staticClass:"flex odd:bg-gray-100 rounded-xl mb-2 items-center hover:bg-white"},[t("div",[t("avatar",{attrs:{user:s.user,width:50,rounded:"xl"}})],1),t("div",{staticClass:"flex-auto mx-4"},[e._v(" "+e._s(s.user.name)+" ")]),s.user.subscription?t("div",{staticClass:"pr-4"},[t("badge",{attrs:{subscriptionLevel:s.user.subscription,size:"small"}})],1):e._e()])}),0)]):t("div",{staticClass:"py-2"},[e._v(" There are currently no registered players. ")])])},w=[],$=i(C,k,w,!1,null,null,null,null);const E=$.exports,M={components:{Breadcrumbs:c,EventTypeIcon:v,HeaderTitle:u,PlayerEventActions:y,RegisteredPlayers:E},mixins:[d],computed:{...a("session",["user"]),crumbs:function(){return[{text:"Home",name:"home"},{text:"My Events",name:"events.mine"},{text:this.title}]},title:function(){return this.event.name||"Register event"},registered:function(){return!!this.event.registered}},data(){return{event:null,time:p}},extends:m((n,e)=>{r.get("/events/"+n.params.event).then(t=>{e(function(){this.event=t.data})})})};var R=function(){var e=this,t=e._self._c;return t("div",[t("header-title",{attrs:{title:e.title}}),t("breadcrumbs",{attrs:{crumbs:e.crumbs}}),t("div",{staticClass:"bg-gray-200"},[t("div",{staticClass:"container sm:mx-auto p-4 py-8 md:flex"},[t("div",{staticClass:"md:w-1/2 md:pr-8"},[t("h2",{staticClass:"font-serif uppercase text-4xl -mt-1 mb-4"},[e._v("Event details")]),t("ul",[t("li",{staticClass:"bg-gray-100 p-2 px-4"},[t("h3",{staticClass:"font-serif uppercase text-xl"},[e._v(e._s(e.event.name)+" "),t("span",{staticClass:"text-gray-500"},[e._v("("+e._s(e.ucfirst(e.event.type))+")")])])]),t("li",{staticClass:"p-2 px-4"},[t("span",{staticClass:"font-serif uppercase"},[e._v("Event fee")]),e._v(": "),e.event.fee?t("span",[e._v("$"+e._s(e.event.fee))]):t("span",[e._v("None (FREE)")])]),t("li",{staticClass:"bg-gray-100 p-2 px-4"},[t("span",{staticClass:"font-serif uppercase"},[e._v("When")]),e._v(": "+e._s(e.time.calendar(e.event.startsAt))+" ")]),t("li",{staticClass:"pt-8"},[t("player-event-actions",{attrs:{event:e.event}})],1)])]),t("div",{staticClass:"mt-8 md:mt-0 md:w-1/2"},[e.event.description?t("div",{staticClass:"flow-root mb-8"},[t("div",{staticClass:"float-left mr-6 mb-2"},[t("event-type-icon",{attrs:{type:e.event.type,size:"24"}})],1),t("p",{domProps:{innerHTML:e._s(e.parseMarkdown(e.event.description))}})]):e._e(),t("div",[t("registered-players",{attrs:{event:e.event}})],1)])])])],1)},D=[],T=i(M,R,D,!1,null,null,null,null);const F=T.exports;export{F as default};
