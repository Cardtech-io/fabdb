import{i as p,r as l,m as c,o as n,n as o,c as b,C as f,b as x,a as _,_ as g,B as P,H as q}from"./app.7bdea8e6.js";import{F as S}from"./Button.a49bf9d9.js";import{C as H}from"./Colour.7eb81ff4.js";import{D as L,S as B,T as I,a as G}from"./Tabs.a8a8bf92.js";import{V as u}from"./Viewable.4361af2f.js";import{C as d}from"./Cards.f6c6433d.js";import{R as k,F as U,G as Z}from"./Fullscreen.a3c46bee.js";import{H as y}from"./HeroSelector.13c18614.js";import{A as W}from"./AdvancedCardSearch.2b6643af.js";import{M as j}from"./MarkdownEditor.93053b63.js";import{R as E}from"./Rulings.096e1329.js";import{D as Y}from"./Deck.ec4ac683.js";import{L as X}from"./LazyLoader.0379a251.js";import{P as J}from"./Paginator.315a7948.js";import{P as K}from"./PlayDeck.1999bf92.js";import"./HeroAvatar.b18ddeff.js";import"./Card.f220136b.js";import"./Models.cc4dbaf5.js";const h={methods:{addRemote(s,t){return axios.post("/decks/"+this.$route.params.deck,{card:s.identifier}).then(e=>{typeof t=="function"&&t(e)}).catch(e=>{e.response&&e.response.status===422&&this.addMessage({status:"error",message:e.response.data.errors.card[0]})})},addLocal(s){const t=this.findCard(s);t?t.total+=1:(s.total=1,this.cards.push(s))},copyShareURL(){this.$copyText("https://fabdb.net/decks/"+this.deck.slug),this.addMessage({status:"success",message:"URL copied to clipboard."})},removeLocal(s){const t=this.findCard(s);if(t.total>1)t.total-=1;else{let e=null;for(let a in this.cards)if(this.cards[a].identifier==s.identifier){e=a;break}e&&this.cards.splice(e,1)}},removeRemote(s,t){return axios.delete("/decks/"+this.$route.params.deck+"/"+s.identifier).then(e=>{t&&t(e)}).catch(e=>{e.response&&e.response.status==422&&this.addMessage({status:"error",message:e.response.data.errors.card[0]})})},setRemote(s,t,e){return axios.put("/decks/"+this.$route.params.deck+"/"+s.identifier,{card:s.identifier,total:t}).then(a=>{e&&e(a)}).catch(a=>{a.response&&a.response.status==422&&this.addMessage({status:"error",message:a.response.data.errors.card[0]})})},findCard(s){return this.cards.filter(function(t){return t.identifier===s.identifier})[0]}}},Q={props:{card:{type:Object,required:!0},total:{type:Number,required:!0}},mixins:[p,h],computed:{...l("deck",["deck","cards","fullScreen","view"]),...c("session",["user"])},methods:{...n("deck",["addCard","removeCard","setCardTotal"]),...n("messages",["addMessage"]),addCardToDeck(){this.addRemote(this.card,()=>{this.addCard({card:this.card}),this.$eventHub.$emit("card-selected")})},removeCardFromDeck(){this.removeCard({card:this.card}),this.removeRemote(this.card,()=>{this.$eventHub.$emit("card-selected")})}}};var tt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex overflow-hidden items-stretch",class:t.$parent.layout==="horizontal"?"space-x-px":"flex-col flex-col-reverse"},[e("button",{staticClass:"bg-white dark:bg-gray-800",class:{"hover:bg-secondary hover:text-white dark:hover:bg-gray-600":t.total>0,"bg-gray-100 text-gray-300 dark:bg-gray-800 dark:text-gray-600":t.total===0,"w-full h-1/2":t.$parent.layout==="vertical","w-1/2":t.$parent.layout==="horizontal"},attrs:{disabled:t.total===0},on:{click:t.removeCardFromDeck}},[e("icon",{staticClass:"mx-auto",attrs:{size:4}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"}})])],1),e("button",{staticClass:"bg-white dark:bg-gray-800",class:{"hover:bg-secondary hover:text-white dark:hover:bg-gray-600":t.total<t.maxAvailable,"bg-gray-100 text-gray-300 dark:bg-gray-800 dark:text-gray-600":t.total>=t.maxAvailable,"w-full h-1/2":t.$parent.layout==="vertical","w-1/2":t.$parent.layout==="horizontal"},attrs:{disabled:t.total>=t.maxAvailable},on:{click:t.addCardToDeck}},[e("icon",{staticClass:"mx-auto",attrs:{size:4}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z","clip-rule":"evenodd"}})])],1)])},et=[],st=o(Q,tt,et,!1,null,null,null,null);const at=st.exports,rt={props:{card:{type:Object,required:!0},applySoftLimit:{type:Boolean,required:!1,default:!0},layout:{type:String,required:!1,default:"horizontal"}},components:{CardButtons:at,Colour:H},computed:{...l("deck",["cards","deck","mode"]),total(){if(this.card.total!==void 0)return this.card.total;let s=this.cards.filter(t=>t.identifier===this.card.identifier);return s[0]?s[0].total:0}}};var it=function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full flex items-stretch mb-1px rounded-lg overflow-hidden",class:{"opacity-50 text-black":t.applySoftLimit&&(!t.card.ownedTotal||t.card.ownedTotal<t.total)&&t.deck.limitToCollection===2}},[e("card-buttons",{class:{"block sm:hidden":t.mode==="all",block:t.mode!=="all","w-1/10":t.layout==="vertical","w-1/5":t.layout==="horizontal"},attrs:{card:t.card,total:t.total}}),e("div",{staticClass:"pl-4 p-2 ml-1px bg-white dark:bg-gray-800 cursor-default",class:{"w-3/5 sm:w-4/5":t.mode==="all","w-3/5":t.mode!=="all","w-7/10":t.layout==="vertical","w-3/5":t.layout==="horizontal"}},[e("div",{staticClass:"flex items-center"},[e("colour",{staticClass:"mr-2",attrs:{resource:t.card.stats.resource}}),e("span",{directives:[{name:"preview-card",rawName:"v-preview-card",value:{stack:[t.card],index:0},expression:"{stack: [card], index: 0}"},{name:"hover-card",rawName:"v-hover-card",value:t.card,expression:"card"}],staticClass:"cursor-help help-underline whitespace-nowrap overflow-hidden"},[t._v(t._s(t.card.name))])],1)]),e("div",{staticClass:"w-1/5 text-center bg-white dark:bg-gray-800 py-2 ml-1px"},[t._v(" "+t._s(t.total)+" ")])],1)},ot=[],lt=o(rt,it,ot,!1,null,null,null,null);const R=lt.exports,nt={props:["cards","card","title"],components:{CardItem:R}};var ct=function(){var t=this,e=t._self._c;return e("div",[t.cards&&t.cards.total()?e("div",{staticClass:"mb-8"},[e("h3",{staticClass:"pb-2 font-serif uppercase text-xl"},[t._v(t._s(t.title)+" ("+t._s(t.cards.total())+")")]),t._l(t.cards,function(a){return e("card-item",{key:a.identifier,attrs:{card:a,"apply-soft-limit":!0,layout:"vertical"}})})],2):t._e(),t.card?e("div",{staticClass:"mb-8"},[e("h3",{staticClass:"pb-2 font-serif uppercase text-xl"},[t._v(t._s(t.title))]),e("card-item",{attrs:{card:t.card,"apply-soft-limit":!0,layout:"vertical"}})],1):t._e()])},dt=[],ut=o(nt,ct,dt,!1,null,null,null,null);const A=ut.exports,mt={props:{open:{type:Boolean,required:!0}},components:{Icon:b}};var pt=function(){var t=this,e=t._self._c;return e("icon",{attrs:{size:6}},[t.open?e("path",{attrs:{d:"M20 10a10 10 0 11-20 0 10 10 0 0120 0zM10 2a8 8 0 100 16 8 8 0 000-16zm-.7 10.54L5.75 9l1.41-1.41L10 10.4l2.83-2.82L14.24 9 10 13.24l-.7-.7z"}}):e("path",{attrs:{d:"M0 10a10 10 0 1120 0 10 10 0 01-20 0zm10 8a8 8 0 100-16 8 8 0 000 16zm.7-10.54L14.25 11l-1.41 1.41L10 9.6l-2.83 2.8L5.76 11 10 6.76l.7.7z"}})])},ht=[],vt=o(mt,pt,ht,!1,null,null,null,null);const D=vt.exports,ft={props:["text","value","position"],methods:{bottom:function(){return this.position==="bottom"||this.position==="both"},top:function(){return this.position==="top"||this.position==="both"}}};var _t=function(){var t=this,e=t._self._c;return e("li",{staticClass:"block w-full flex mb-px space-x-px"},[e("div",{staticClass:"w-3/4 bg-white dark:bg-gray-700 p-2",class:{"rounded-tl-lg":t.top(),"rounded-bl-lg":t.bottom()}},[t._v(t._s(t.text))]),e("div",{staticClass:"w-1/4 bg-white dark:bg-gray-700 py-2 text-center",class:{"rounded-tr-lg":t.top(),"rounded-br-lg":t.bottom()}},[t._v(t._s(t.value))])])},bt=[],gt=o(ft,_t,bt,!1,null,null,null,null);const w=gt.exports,kt={mixins:[u],components:{Stat:w},computed:{...l("deck",["cards"])}};var Ct=function(){var t=this,e=t._self._c;return e("div",[e("ol",{staticClass:"mt-2 text-base"},[e("stat",{attrs:{value:t.averageCost,text:"Avg cost",position:"top"}}),e("stat",{attrs:{value:t.averagePitch,text:"Avg pitch"}}),e("stat",{attrs:{value:t.pitchCount(1),text:"Pitch 1"}}),e("stat",{attrs:{value:t.pitchCount(2),text:"Pitch 2"}}),e("stat",{attrs:{value:t.pitchCount(3),text:"Pitch 3"}}),e("stat",{attrs:{value:t.costCount(0),text:"Cost 0"}}),e("stat",{attrs:{value:t.costCount(1),text:"Cost 1"}}),e("stat",{attrs:{value:t.costCount(2),text:"Cost 2"}}),e("stat",{attrs:{value:t.costCount(3),text:"Cost 3+",position:"bottom"}})],1)])},xt=[],yt=o(kt,Ct,xt,!1,null,null,null,null);const $=yt.exports,V={computed:{cards(){return new d(this.collection).sort()},loadout(){return this.cards.weapons().concat(this.cards.equipment())},availableSections(){switch(this.grouping){case"default":return this.view==="gallery"?[{title:"Loadout",cards:this.loadout},{title:"Other",cards:this.other}]:[{title:"Hero",cards:new d([this.cards.hero()])},{title:"Weapons",cards:this.cards.weapons()},{title:"Equipment",cards:this.cards.equipment()},{title:"Other",cards:this.cards.other()}];case"cost":var s=this.cards.group(t=>t.stats.cost);return s.cards.map(t=>({title:t[0].stats.cost===void 0?"No cost":"Cost "+t[0].stats.cost,cards:new d(t)}));case"pitch":var s=this.cards.group(t=>t.stats.resource);return s.cards.map(t=>({title:t[0].stats.resource===void 0?"No pitch":"Pitch "+t[0].stats.resource,cards:new d(t)}));case"type":return[{title:"Hero",cards:new d([this.cards.hero()])},{title:"Weapons",cards:this.cards.weapons()},{title:"Equipment",cards:this.cards.equipment()},{title:"Attack actions",cards:this.cards.attackActions()},{title:"Attack reactions",cards:this.cards.attackReactions()},{title:"Defense reactions",cards:this.cards.defenseReactions()},{title:"Non-attack actions",cards:this.cards.nonAttackActions()},{title:"Instants",cards:this.cards.instants()},{title:"Items",cards:this.cards.items()},{title:"Miscellaneous",cards:this.cards.miscellaneous()}]}}}},wt={};var $t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"absolute w-full bg-red-600 text-white text-base text-center py-2 z-50 -mt-2",staticStyle:{bottom:"40.35%"}},[t._v(" Banned ")])},zt=[],Tt=o(wt,$t,zt,!1,null,null,null,null);const Mt=Tt.exports,St={props:["width"],computed:{...l("deck",["zoom"]),cardClasses(){return this.width||"w-1/2 sm:w-1/"+(this.cardWidth-2)+" sm:w-1/"+(this.cardWidth-1)+"  md:w-1/"+this.cardWidth},cardWidth(){return[3,4,5,6,7,8][this.zoom]}}};var Ht=function(){var t=this,e=t._self._c;return e("div",{class:t.cardClasses},[t._t("default")],2)},Lt=[],Rt=o(St,Ht,Lt,!1,null,null,null,null);const F=Rt.exports,At={props:{containerId:{type:String,required:!0}},mixins:[k],computed:{...l("deck",["fullScreen","grouping","mode","zoom"])},watch:{cards(){this.redraw(this.groupId)},fullScreen(){this.redraw(this.groupId)},grouping(){this.redraw(this.groupId)},mode(){this.redraw(this.groupId)},zoom(){this.redraw()}}};var Dt=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"masonry",rawName:"v-masonry"}],attrs:{"destroy-delay":"2000",containerId:t.containerId,"transition-duration":"0.3s"}},[t._t("default")],2)},Vt=[],Ft=o(At,Dt,Vt,!1,null,null,null,null);const z=Ft.exports;let v={x:0,previous:null};const Ot={props:["action","cards","groupId","width"],mixins:[p,k,u],components:{Banned:Mt,CardContainer:F,CardImage:f,MasonryContainer:z},computed:{...l("deck",["deck","fullScreen","grouping","mode","sections","zoom"]),...c("session",["user"]),cardWidth(){return[3,4,5,6,7,8][this.zoom]},groupedCards(){return this.cards.group("name")},offset(){return this.user.view==="borderless"?10:12},pad(){return this.user.view==="borderless"?17:18}},methods:{margin(s){let t=s-1;if(t>0)return"margin-bottom: "+t*this.pad+"%"},styles(s){let t=[],e=s;return t.push("z-index: "+e),t.push("position: absolute"),t.push("top: "+s*this.offset+"%"),t.push("left: 0"),t.join("; ")},showOverlay(s){return!v.previous||s.identifier!==v.previous?v.x=0:v.x++,v.previous=s.identifier,this.deck.limitToCollection===2&&this.mode!=="sideboard"&&(!s.ownedTotal||s.ownedTotal<v.x+1)}},watch:{cards(){this.redraw(this.groupId)}}};var Nt=function(){var t=this,e=t._self._c;return e("masonry-container",{staticClass:"pb-2 mx-2",attrs:{containerId:t.groupId}},t._l(t.groupedCards,function(a){return e("card-container",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:a[0].identifier,staticClass:"rounded-card",attrs:{width:t.width}},[e("div",{staticClass:"relative my-4 mx-2"},[e("img",{staticClass:"block w-full invisible",style:t.margin(a.length),attrs:{src:a[0].image}}),t._l(a,function(r,i){return e("div",{staticClass:"relative rounded-card w-full",style:t.styles(i)},[e("card-image",{staticClass:"z-0",attrs:{card:r,width:350,clickHandler:t.action||!1}}),t.showOverlay(r)?e("div",{staticClass:"absolute top-0 bottom-0 w-full opacity-50 rounded-card bg-gray-200 z-25"}):t._e(),r.banned?e("banned"):t._e()],1)})],2),t._t("default")],2)}),1)},Pt=[],qt=o(Ot,Nt,Pt,!1,null,null,null,null);const C=qt.exports,Bt={mixins:[u],components:{Stat:w},computed:{...l("deck",["cards"])}};var It=function(){var t=this,e=t._self._c;return e("div",[e("ol",{staticClass:"mt-2"},[e("stat",{attrs:{value:t.totalCards,text:"Cards",position:"top"}}),e("stat",{attrs:{value:t.totalClass,text:"Class"}}),e("stat",{attrs:{value:t.totalGeneric,text:"Generic",position:"bottom"}})],1),e("ol",{staticClass:"mt-4 text-base"},[e("stat",{attrs:{value:t.totalActions,text:"Actions",position:"top"}}),e("stat",{attrs:{value:t.totalAttackActions,text:"Att. actions"}}),e("stat",{attrs:{value:t.totalAttackReactions,text:"Att. reactions"}}),e("stat",{attrs:{value:t.totalDefenseReactions,text:"Def. reactions"}}),e("stat",{attrs:{value:t.totalInstants,text:"Instants",position:"bottom"}})],1)])},Gt=[],Ut=o(Bt,It,Gt,!1,null,null,null,null);const T=Ut.exports,Zt={props:["collection"],mixins:[p,V,h,k,x,u],components:{CardImage:f,CardItemSection:A,Chevron:D,DeckCurves:L,FormButton:S,General:$,GroupedCards:C,HeroSelector:y,MasonryContainer:z,Totals:T},computed:{...l("deck",["deck","filters","grouping","mode","sections","view","zoom"]),...c("session",["user"]),...c("deck",["sectionOpen"]),other(){return this.cards.other()}},methods:{...n("deck",["addCard","setMode","removeCard","toggleSection"]),addToDeck(s){this.addRemote(s,t=>{this.addCard({card:s}),this.setMode({mode:"search"}),this.$eventHub.$emit("hero-selected",s,this.type(s))})},filter(s){return s.applyFilters(this.filters)},removeFromDeck(s){this.removeRemote(s),this.removeCard({card:s})}}};var Wt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pb-24 text-base"},[t.view==="gallery"?e("div",[t.user.subscription?e("div",{staticClass:"md:flex m-4"},[e("div",{staticClass:"md:mr-4 md:w-auto md:max-w-250 flow-root"},[e("div",{staticClass:"w-1/2 md:w-auto pr-4 md:p-0 float-left md:float-none"},[e("card-image",{staticClass:"mb-4",attrs:{card:t.cards.hero()}})],1),e("div",{staticClass:"w-1/2 md:w-auto float-left md:float-none"},[e("div",{staticClass:"bg-white dark:bg-gray-800 rounded-lg pl-2 pr-4 pt-4"},[e("deck-curves",{staticClass:"mb-4 h-140 sm:h-160",attrs:{cards:t.cards.other().withCost(),stat:"cost",strategy:"total"}})],1),e("div",{staticClass:"bg-white dark:bg-gray-800 rounded-lg pl-2 pr-4 pt-4 mt-4"},[e("deck-curves",{staticClass:"mb-4 h-140 sm:h-160",attrs:{cards:t.cards.other().withResource(),stat:"resource",strategy:"total"}})],1)]),e("div",{staticClass:"hidden md:block"},[e("div",{staticClass:"mx-2 my-4"},[e("h3",{staticClass:"font-serif uppercase text-lg"},[t._v("Totals")]),e("totals",{staticClass:"mt-2"})],1)]),e("div",{staticClass:"hidden md:block"},[e("div",{staticClass:"mx-2"},[e("h3",{staticClass:"font-serif uppercase text-lg"},[t._v("General")]),e("general",{staticClass:"mt-2"})],1)])]),e("div",{staticClass:"flex-1"},t._l(t.availableSections,function(a){return a.cards.count()?e("div",[e("h2",{staticClass:"block flex cursor-pointer font-serif uppercase text-lg mx-4",class:{"mb-4":!t.sectionOpen(a.title)},on:{click:function(r){return t.toggleSection({section:a.title})}}},[e("chevron",{staticClass:"mr-2",attrs:{open:t.sectionOpen(a.title)}}),t._v(" "+t._s(a.title)+" ("+t._s(a.cards.total())+") ")],1),e("grouped-cards",{directives:[{name:"show",rawName:"v-show",value:t.sectionOpen(a.title),expression:"sectionOpen(section.title)"}],key:t.kebabCase(a.title),attrs:{cards:a.cards.hydrate(),"group-id":t.kebabCase(a.title),action:t.mode==="search"?t.removeFromDeck:!1}})],1):t._e()}),0)]):e("div",{staticClass:"text-center my-20 mx-10"},[t._v(" Gallery mode is available only to FaB DB patrons."),e("br"),e("br"),e("router-link",{staticClass:"link-alternate",attrs:{to:"/support"}},[t._v("Upgrade to access the gallery mode feature.")])],1)]):e("div",{staticClass:"lg:flex m-4"},[e("div",{staticClass:"hidden lg:block md:mr-8 max-w-250"},[e("card-image",{staticClass:"mb-4",attrs:{card:t.cards.hero()}}),e("div",[e("div",{staticClass:"bg-white dark:bg-gray-800 rounded-lg pl-2 pr-4 pt-4 pb-2"},[e("deck-curves",{staticClass:"mb-4 h-140 sm:h-160",attrs:{cards:t.cards.other().withCost(),stat:"cost",strategy:"total"}})],1),e("div",{staticClass:"bg-white dark:bg-gray-800 rounded-lg pl-2 pr-4 pt-4 pb-2 mt-4"},[e("deck-curves",{staticClass:"mb-4 h-140 sm:h-160",attrs:{cards:t.cards.other().withResource(),stat:"resource",strategy:"total"}})],1)])],1),e("div",{staticClass:"sm:flex-grow sm:mr-4"},[e("masonry-container",{staticClass:"sm:flex sm:flex-wrap",attrs:{"container-id":"text-sections"}},t._l(t.availableSections,function(a){return a.cards.count()?e("div",{staticClass:"w-full sm:w-1/2 lg:w-1/3 sm:pr-8"},[e("card-item-section",{attrs:{cards:a.cards,title:a.title}})],1):t._e()}),0)],1)])])},jt=[],Et=o(Zt,Wt,jt,!1,null,null,null,null);const Yt=Et.exports,Xt={components:{Icon:b},data(){return{params:{keywords:""},searchTimeout:null}},methods:{reset(){this.searchTimeout&&clearTimeout(this.searchTimeout)},delayedSearch(){this.reset(),this.searchTimeout=setTimeout(()=>{this.$eventHub.$emit("search-requested",this.params)},700)},finishSearch(){this.reset(),this.$eventHub.$emit("search-requested",this.params)},showAdvancedSearch(){this.$modal.show(W,{query:this.params},{adaptive:!0,classes:["rounded-lg","bg-white","dark:bg-gray-800"],scrollable:!0,height:"auto",maxHeight:300})}},mounted(){this.$eventHub.$on("search-completed",(s,t)=>{this.searchTimeout||(this.params=t)}),this.$eventHub.$on("advanced-search",s=>{this.$eventHub.$emit("search-requested",s)})}};var Jt=function(){var t=this,e=t._self._c;return e("div",[e("button",{staticClass:"flex-initial bg-primary hover:bg-secondary text-white rounded p-1 px-2 text-xs uppercase",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.$modal.show("search-help")}}},[t._v(" SYNTAX HELP ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.params.keywords,expression:"params.keywords"}],ref:"nameSearch",staticClass:"flex-1 bg-transparent outline-none py-2 px-4 lg:text-gray-200",attrs:{type:"text",placeholder:"Search..."},domProps:{value:t.params.keywords},on:{keyup:[t.delayedSearch,function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.finishSearch.apply(null,arguments)}],input:function(a){a.target.composing||t.$set(t.params,"keywords",a.target.value)}}}),e("button",{staticClass:"button-primary text-xs px-2",on:{click:t.showAdvancedSearch}},[e("icon",{attrs:{size:6}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"}})])],1)])},Kt=[],Qt=o(Xt,Jt,Kt,!1,null,null,null,null);const O=Qt.exports,te={props:["deck"],components:{MarkdownEditor:j},data(){return{saving:!1}},computed:{...c("session",["user"])},methods:{...n("messages",["addMessage"]),saveDeckSettings:function(){this.saving=!0;let s=this.deck.cardBack||1,t={name:this.deck.name,label:this.deck.label||"",notes:this.deck.notes,videoUrl:this.deck.videoUrl,type:this.deck.type,format:this.deck.format,limitToCollection:this.deck.limitToCollection,visibility:this.deck.visibility,cardBack:s};_.put("/decks/"+this.$route.params.deck+"/settings",t).then(e=>{this.addMessage({status:"success",message:"Settings saved."}),this.saving=!1})}}};var ee=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container sm:mx-auto py-8 md:flex"},[e("div",{staticClass:"md:w-1/2 md:pr-8"},[e("form",{staticClass:"block",on:{submit:function(a){return a.preventDefault(),t.saveDeckSettings.apply(null,arguments)}}},[e("div",{staticClass:"w-full mb-4"},[e("label",{staticClass:"block font-serif uppercase tracking-wide mb-1"},[t._v("Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.deck.name,expression:"deck.name"}],staticClass:"input py-3 px-4 rounded-lg",attrs:{type:"text",maxlength:"25",required:""},domProps:{value:t.deck.name},on:{input:function(a){a.target.composing||t.$set(t.deck,"name",a.target.value)}}})]),e("div",{staticClass:"w-full mb-4"},[e("label",{staticClass:"block font-serif uppercase tracking-wide mb-1"},[t._v("Label")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.deck.label,expression:"deck.label"}],staticClass:"input py-3 px-4 rounded-lg",attrs:{type:"text"},on:{change:function(a){var r=Array.prototype.filter.call(a.target.options,function(i){return i.selected}).map(function(i){var m="_value"in i?i._value:i.value;return m});t.$set(t.deck,"label",a.target.multiple?r:r[0])}}},[e("option",{attrs:{value:""}},[t._v("None")]),t._l(t.$settings.game.decks.labels,function(a,r){return e("option",{domProps:{value:r}},[t._v(t._s(a))])})],2)]),e("div",{staticClass:"w-full mb-4"},[e("label",{staticClass:"block font-serif uppercase tracking-wide mb-1"},[t._v("Video")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.deck.videoUrl,expression:"deck.videoUrl"}],staticClass:"input py-3 px-4 rounded-lg",attrs:{type:"text"},domProps:{value:t.deck.videoUrl},on:{input:function(a){a.target.composing||t.$set(t.deck,"videoUrl",a.target.value)}}})]),e("div",{staticClass:"w-full mb-4"},[e("label",{staticClass:"block font-serif uppercase tracking-wide mb-1"},[t._v("Notes")]),e("markdown-editor",{ref:"markdownEditor",attrs:{configs:{toolbar:["heading","bold","italic","quote","|","unordered-list","ordered-list"]}},model:{value:t.deck.notes,callback:function(a){t.$set(t.deck,"notes",a)},expression:"deck.notes"}})],1),t.deck.practiseId?t._e():e("div",{staticClass:"w-full mb-4"},[e("label",{staticClass:"block font-serif uppercase tracking-wide mb-1"},[t._v("Deck format")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.deck.format,expression:"deck.format"}],staticClass:"input py-3 px-4 rounded-lg",on:{change:function(a){var r=Array.prototype.filter.call(a.target.options,function(i){return i.selected}).map(function(i){var m="_value"in i?i._value:i.value;return m});t.$set(t.deck,"format",a.target.multiple?r:r[0])}}},t._l(t.$settings.game.decks.formats,function(a,r){return e("option",{domProps:{value:r}},[t._v(t._s(a))])}),0)]),e("div",{staticClass:"w-full mb-4"},[e("label",{staticClass:"block font-serif uppercase tracking-wide mb-1"},[t._v("Limit cards to collection")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.deck.limitToCollection,expression:"deck.limitToCollection"}],staticClass:"input py-3 px-4 rounded-lg",on:{change:function(a){var r=Array.prototype.filter.call(a.target.options,function(i){return i.selected}).map(function(i){var m="_value"in i?i._value:i.value;return m});t.$set(t.deck,"limitToCollection",a.target.multiple?r:r[0])}}},[e("option",{domProps:{value:0}},[t._v("No")]),e("option",{domProps:{value:1}},[t._v("Hard limit")]),e("option",{domProps:{value:2}},[t._v("Soft limit")])])]),e("div",{staticClass:"w-full mb-4"},[e("label",{staticClass:"block font-serif uppercase tracking-wide mb-1"},[t._v("Deck visibility")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.deck.visibility,expression:"deck.visibility"}],staticClass:"input py-3 px-4 rounded-lg",on:{change:function(a){var r=Array.prototype.filter.call(a.target.options,function(i){return i.selected}).map(function(i){var m="_value"in i?i._value:i.value;return m});t.$set(t.deck,"visibility",a.target.multiple?r:r[0])}}},[e("option",{attrs:{value:"private"}},[t._v("Private")]),e("option",{attrs:{value:"public"}},[t._v("Public")])])]),e("div",{staticClass:"w-full"},[e("label",{staticClass:"block font-serif uppercase tracking-wide mb-1"},[t._v("Card back")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.deck.cardBack,expression:"deck.cardBack"}],staticClass:"input py-3 px-4 rounded-lg",attrs:{disabled:!t.user.subscription},on:{change:function(a){var r=Array.prototype.filter.call(a.target.options,function(i){return i.selected}).map(function(i){var m="_value"in i?i._value:i.value;return m});t.$set(t.deck,"cardBack",a.target.multiple?r:r[0])}}},[e("option",{attrs:{value:"1"}},[t._v("Original")]),e("option",{attrs:{value:"2"}},[t._v("Worn")]),e("option",{attrs:{value:"3"}},[t._v("Light")]),e("option",{attrs:{value:"4"}},[t._v("Old fashioned")]),e("option",{attrs:{value:"5"}},[t._v("Parchment Gold")]),e("option",{attrs:{value:"6"}},[t._v("Parchment Classic")]),e("option",{attrs:{value:"7"}},[t._v("Reds")]),e("option",{attrs:{value:"8"}},[t._v("White Cream")])]),t.user.subscription?t._e():e("div",{staticClass:"border border-t-0 border-gray-300 text-sm rounded-lg p-3"},[t._v(" Card backs are a premium feature. If you'd like to use card backs in your games of TTS, "),e("router-link",{staticClass:"link",attrs:{to:"/support"}},[t._v("support us!")]),e("a",{staticClass:"link",attrs:{href:"https://patreon.com/fabdb",target:"_blank"}},[t._v("Memberships start as low as $3/month.")])],1)]),e("input",{staticClass:"appearance-none block w-full rounded-lg py-3 px-4 button-primary mt-8",class:t.saving?"disabled":"",attrs:{type:"submit",value:"Save"}})])]),t._m(0)])},se=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"mt-8 md:w-1/2 md:mt-0 text-base"},[t("p",{staticClass:"my-4"},[s._v("With the various deck settings you can change several values:")]),t("ul",{staticClass:"list-disc ml-8"},[t("li",[s._v("Video: Embed a decktech video on your deck page. Currently only supports YouTube.")]),t("li",[s._v("Notes: Go into detail as to how the deck performs, combos to look for and good/bad matchups.")]),t("li",[s._v("Deck format: Whether your deck is for blitz/UPF or constructed play.")]),t("li",[s._v("Limit to collection: Select soft if you just want missing cards highlighted. Select the hard limit if you do not want missing cards to show up in search at all. The former is better for purchase planning, the latter is better for tournament preparaation.")]),t("li",[s._v("Deck visibility: This is whether or not the deck is available in the public directory. If not, you can still share the deck as normal for those that have the link.")]),t("li",[s._v("The card back: When exporting the deck for use in Tabletop Simulator, you can select from one of 8 card backs. This is a premium feature available to supporters only.")])])])}],ae=o(te,ee,se,!1,null,null,null,null);const re=ae.exports,ie={mixins:[p,h,B,x,u],props:["deck"],computed:{cards(){return this.deck.cards},shareDeck(){return new Y(this.deck)}},data:()=>({exporting:!1}),methods:{...n("messages",["addMessage"]),exportToTTS(){this.exporting=!0,axios.get("/export/"+this.deck.slug+"/tts-images").then(s=>{this.exporting=!1,window.open("/export/"+this.deck.slug+"/tts-json")})}}};var oe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"space-y-4"},[e("a",{staticClass:"block flow-root p-4 bg-white dark:bg-gray-600 rounded-lg hover:bg-secondary dark:hover:bg-secondary hover:text-white",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.copyShareURL.apply(null,arguments)}}},[e("div",{staticClass:"float-left mr-4"},[e("icon",{attrs:{size:14}},[e("path",{attrs:{d:"M9.26 13a2 2 0 01.01-2.01A3 3 0 009 5H5a3 3 0 000 6h.08a6.06 6.06 0 000 2H5A5 5 0 015 3h4a5 5 0 01.26 10zm1.48-6a2 2 0 01-.01 2.01A3 3 0 0011 15h4a3 3 0 000-6h-.08a6.06 6.06 0 000-2H15a5 5 0 010 10h-4a5 5 0 01-.26-10z"}})])],1),e("h2",{staticClass:"font-serif uppercase text-xl"},[t._v("Link to deck")]),e("p",{staticClass:"text-base"},[t._v("Copies your publicly-accessible deck URL to the clipboard.")])]),e("a",{staticClass:"block flow-root p-4 bg-white dark:bg-gray-600 rounded-lg hover:bg-secondary dark:hover:bg-secondary hover:text-white",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.shareDeckViaText(t.shareDeck)}}},[e("div",{staticClass:"float-left mr-4"},[e("icon",{attrs:{size:14}},[e("path",{attrs:{d:"M8 2a1 1 0 000 2h2a1 1 0 100-2H8z"}}),e("path",{attrs:{d:"M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5zM15 11h2a1 1 0 110 2h-2v-2z"}})])],1),e("h2",{staticClass:"font-serif uppercase text-xl"},[t._v("Copy text")]),e("p",{staticClass:"text-base"},[t._v("Looking to share your deck build as text? Click here.")])]),e("div",{staticClass:"flow-root p-4 bg-white dark:bg-gray-600 rounded-lg"},[e("div",{staticClass:"float-left mr-4"},[e("icon",{attrs:{size:14}},[e("path",{attrs:{d:"M4 4l12 6-12 6z"}})])],1),e("h2",{staticClass:"font-serif uppercase text-xl"},[t._v("Table Top Simulator")]),t._m(0)]),e("router-link",{staticClass:"block flow-root p-4 bg-white dark:bg-gray-600 rounded-lg hover:bg-secondary dark:hover:bg-secondary hover:text-white",attrs:{to:{name:"decks.export",params:{deck:t.deck.slug}}}},[e("div",{staticClass:"float-left mr-4"},[e("icon",{attrs:{size:14}},[e("path",{attrs:{d:"M0 4c0-1.1.9-2 2-2h7l2 2h7a2 2 0 012 2v10a2 2 0 01-2 2H2a2 2 0 01-2-2V4zm2 2v10h16V6H2z"}})])],1),e("h2",{staticClass:"font-serif uppercase text-xl"},[t._v("Tournament Pack")]),e("p",{staticClass:"text-base"},[t._v("For tournaments and leagues. All-in-one ZIP file.")])])],1)},le=[function(){var s=this,t=s._self._c;return t("p",{staticClass:"text-base"},[s._v(" Want to use your deck inside Table Top Simulator? Use the "),t("a",{staticClass:"link-alternate",attrs:{href:"https://steamcommunity.com/sharedfiles/filedetails/?id=2191845555",target:"_blank"}},[s._v("OSC mod")]),s._v(" and import your deck directly :)")])}],ne=o(ie,oe,le,!1,null,null,null,null);const ce=ne.exports,de={mixins:[h,u],components:{CardImage:f,DeckSettings:re,General:$,Rulings:E,Stat:w,TabItem:I,Tabs:G,Totals:T,TtsExporter:ce},data(){return{tab:"settings"}},computed:{...l("deck",["cards","deck"]),offenseRating:function(){return(((this.totalAttackActions+this.totalAttackReactions)/this.totalCards).toFixed(2)*100).toFixed(0)+"%"},defenseRating:function(){return((this.blocks.length/this.totalCards).toFixed(2)*100).toFixed(0)+"%"},rulings(){let s=g.flatten(this.cards.map(t=>g.flatten(t.rulings&&t.rulings.length?t.rulings.map(e=>e.description):[])));return g.uniq(s)}},methods:{...n("messages",["addMessage"])}};var ue=function(){var t=this,e=t._self._c;return e("div",{staticClass:"py-4 pb-20 sm:flex px-4"},[e("div",{staticClass:"w-full hidden lg:block lg:w-1/4 lg:mr-8"},[e("card-image",{attrs:{card:t.hero}})],1),e("div",{staticClass:"w-full lg:w-3/4"},[e("tabs",[e("tab-item",{attrs:{name:"Settings"}},[e("deck-settings",{attrs:{deck:t.deck}})],1),e("tab-item",{staticClass:"md:flex md:space-x-4",attrs:{name:"Metrics"}},[e("div",{staticClass:"md:w-1/3"},[e("h3",{staticClass:"font-serif uppercase text-2xl"},[t._v("Totals")]),e("totals")],1),e("div",{staticClass:"mt-4 md:mt-0 md:w-1/3 md:mx-4"},[e("h3",{staticClass:"font-serif uppercase text-2xl"},[t._v("General")]),e("general")],1),e("div",{staticClass:"mt-4 md:mt-0 md:w-1/3 md:mx-4"},[e("h3",{staticClass:"font-serif uppercase text-2xl"},[t._v("Offensive")]),e("ol",{staticClass:"mt-2 text-base"},[e("stat",{attrs:{value:t.offenseRating,text:"Rating",position:"top"}}),e("stat",{attrs:{value:t.averageAttack,text:"Average attack"}}),e("stat",{attrs:{value:t.attacksPerHand,text:"Attacks per hand",position:"bottom"}})],1),e("h3",{staticClass:"font-serif uppercase text-2xl mt-4 md:mt-8"},[t._v("Defensive")]),e("ol",{staticClass:"mt-2 text-base"},[e("stat",{attrs:{value:t.defenseRating,text:"Rating",position:"top"}}),e("stat",{attrs:{value:t.averageBlock,text:"Average block",position:"bottom"}})],1)])]),e("tab-item",{attrs:{name:"Rulings"}},[e("rulings",{attrs:{rulings:t.rulings}})],1),e("tab-item",{attrs:{name:"Export"}},[e("tts-exporter",{attrs:{deck:t.deck}})],1)],1)],1)])},me=[],pe=o(de,ue,me,!1,null,null,null,null);const he=pe.exports,ve={components:{Icon:b},mixins:[u],data(){return{editing:!1,original:null}},computed:{...l("deck",["deck"]),name:{get(){return this.deck.name},set(s){this.deck.name=s}}},methods:{edit(){this.editing=!0,setTimeout(()=>{this.$refs.name.focus()},50)},cancel(){this.editing=!1,this.name=this.original},possibleCancel(){setTimeout(()=>{this.name=this.original},100)},save(){_.put("/decks/"+this.deck.slug+"/settings",{name:this.name}),this.editing=!1,this.original=this.name}},mounted(){this.original=this.name}};var fe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center"},[e("div",{staticClass:"text-4xl uppercase"},[t.editing?e("form",{staticClass:"block flex items-center",on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"escape",void 0,a.key,void 0)?null:t.cancel()},submit:function(a){return a.preventDefault(),t.save()}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"name",staticClass:"bg-transparent font-serif uppercase outline-none border border-gray-700 border-r-none rounded-l-lg inline w-auto text-2xl text-white px-4 py-1",attrs:{size:"40"},domProps:{value:t.name},on:{blur:function(a){return t.possibleCancel()},input:function(a){a.target.composing||(t.name=a.target.value)}}}),e("button",{staticClass:"button-primary text-2xl px-4 py-3 rounded-r-lg",attrs:{type:"submit"}},[t._v("Save")])]):e("div",{staticClass:"font-serif cursor-pointer text-gray-600 hover:text-white"},[e("h1",{staticClass:"bg-transparent outline-none inline w-auto text-white",on:{click:function(a){return t.edit()}}},[t._v(t._s(t.name)),t.hero?e("span",{staticClass:"text-white"},[t._v(" ("+t._s(t.hero.name)+")")]):t._e()]),e("button",{on:{click:function(a){return t.edit()}}},[e("icon",{staticClass:"-mt-1 ml-2",attrs:{size:6}},[e("path",{attrs:{d:"M12.3 3.7l4 4L4 20H0v-4L12.3 3.7zm1.4-1.4L16 0l4 4-2.3 2.3-4-4z"}})])],1)])])])},_e=[],be=o(ve,fe,_e,!1,null,null,null,null);const ge=be.exports;const ke={computed:{...l("deck",["cards","deck","sideboard"]),maxCards(){return this.deck.format==="blitz"?53:81},totalCards(){let s=new d(this.cards).total();return this.deck.format==="blitz"&&s++,s},totalSideboard(){return new d(this.sideboard).total()},totalMainDeck(){return this.totalCards-this.totalSideboard}}};var Ce=function(){var t=this,e=t._self._c;return t.deck?e("div",[t.deck.format==="constructed"?e("div",{staticClass:"flex items-center space-x-2"},[e("div",{staticClass:"cursor-help group relative"},[e("h2",{staticClass:"font-serif uppercase border-b border-dotted border-gray-500",class:{"text-red-500":t.totalCards>t.maxCards}},[t._v(t._s(t.totalMainDeck-1<0?0:t.totalMainDeck-1))]),e("span",{staticClass:"tooltip transition-all delay-200 absolute block opacity-0 group-hover:opacity-100 bg-black text-white py-1 px-3 z-25 rounded text-xs mt-2 whitespace-nowrap"},[t._v("Main deck")])]),e("span",{staticClass:"font-serif uppercase"},[t._v("/")]),e("div",{staticClass:"cursor-help group relative"},[e("h2",{staticClass:"font-serif uppercase border-b border-dotted border-gray-500",class:{"text-red-500":t.totalCards>t.maxCards}},[t._v(t._s(t.totalSideboard))]),e("span",{staticClass:"tooltip transition-all delay-200 absolute block opacity-0 group-hover:opacity-100 bg-black text-white py-1 px-3 z-25 rounded text-xs mt-2 whitespace-nowrap"},[t._v("Sideboard")])]),e("span",{staticClass:"font-serif uppercase"},[t._v("/")]),e("div",{staticClass:"cursor-help group relative"},[e("h2",{staticClass:"font-serif uppercase border-b border-dotted border-gray-500",class:{"text-red-500":t.totalCards>t.maxCards}},[t._v(t._s(t.maxCards-1))]),e("span",{staticClass:"tooltip transition-all delay-200 absolute block opacity-0 group-hover:opacity-100 bg-black text-white py-1 px-3 z-25 rounded text-xs mt-2 whitespace-nowrap"},[t._v("Max cards")])])]):t._e(),t.deck.format==="blitz"?e("div",{staticClass:"flex items-center space-x-2"},[e("div",{staticClass:"cursor-help group relative"},[e("h2",{staticClass:"font-serif uppercase border-b border-dotted border-gray-500",class:{"text-red-500":t.totalCards>t.maxCards}},[t._v(t._s(t.totalMainDeck-1))]),e("span",{staticClass:"tooltip transition-all delay-200 absolute block opacity-0 group-hover:opacity-100 bg-black text-white py-1 px-3 z-25 rounded text-xs mt-2 whitespace-nowrap"},[t._v("Main deck")])]),e("span",{staticClass:"font-serif uppercase"},[t._v("/")]),e("div",{staticClass:"cursor-help group relative"},[e("h2",{staticClass:"font-serif uppercase border-b border-dotted border-gray-500",class:{"text-red-500":t.totalCards>t.maxCards}},[t._v(t._s(t.maxCards-1))]),e("span",{staticClass:"tooltip transition-all delay-200 absolute block opacity-0 group-hover:opacity-100 bg-black text-white py-1 px-3 z-25 rounded text-xs mt-2 whitespace-nowrap"},[t._v("Max cards")])])]):t._e(),t.deck.format==="open"?e("div",{staticClass:"flex items-center space-x-2"},[e("div",{staticClass:"cursor-help group relative"},[e("h2",{staticClass:"font-serif uppercase border-b border-dotted border-gray-500",class:{"text-red-500":t.totalCards>t.maxCards}},[t._v(t._s(t.totalMainDeck-1))]),e("span",{staticClass:"tooltip transition-all delay-200 absolute block opacity-0 group-hover:opacity-100 bg-black text-white py-1 px-3 z-25 rounded text-xs mt-2 whitespace-nowrap"},[t._v("Main deck")])])]):t._e()]):t._e()},xe=[],ye=o(ke,Ce,xe,!1,null,"e5d3a371",null,null);const we=ye.exports,$e={props:{card:{type:Object,required:!0}},mixins:[p,h],computed:{...l("deck",["deck","cards","fullScreen","view"]),...c("session",["user"]),background(){return"bg-white hover:bg-secondary hover:text-white dark:bg-gray-700 dark:hover:bg-gray-500"},cardCount(){let s=this.cards.filter(t=>t.identifier===this.card.identifier);return s[0]?s[0].total:0}},methods:{...n("deck",["setCardTotal"]),...n("messages",["addMessage"]),active(s){return this.cardCount===s?"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500":this.background},classes(s){let t=this.maxAvailable+1;return[this.active(s),"w-1/"+t]},setTotal(s){this.setRemote(this.card,s,()=>{this.setCardTotal({card:this.card,total:s})}),this.$eventHub.$emit("card-selected")}}};var ze=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex space-x-px overflow-hidden"},t._l(t.maxAvailable+1,function(a,r){return e("button",{class:t.classes(r),on:{click:function(i){return t.setTotal(r)}}},[t._v(t._s(r))])}),0)},Te=[],Me=o($e,ze,Te,!1,null,null,null,null);const N=Me.exports,Se={props:["collection"],mixins:[p,V,h,u],components:{CardContainer:F,CardImage:f,CardItemSection:A,Chevron:D,DeckCurves:L,FormButton:S,General:$,GroupedCards:C,HeroSelector:y,MasonryContainer:z,NumberedCardButtons:N,Totals:T},computed:{...l("deck",["deck","filters","fullScreen","grouping","mode","sections","view","zoom"]),...c("session",["user"]),...c("deck",["sectionOpen"]),other(){return this.cards.other()}},methods:{...n("deck",["addCard","setMode","removeCard","removeFromSideBoard","toggleSection"]),filter(s){return s.applyFilters(this.filters)},removeFromDeck(s){this.removeRemote(s),this.removeCard({card:s}),this.removeFromSideBoard({card:s})}}};var He=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pb-24 text-base"},[t.view==="gallery"?e("div",[t.user.subscription?e("div",{staticClass:"md:flex m-4"},[e("div",{staticClass:"md:mr-4 md:w-auto md:max-w-250 flow-root"},[e("div",{staticClass:"w-1/2 md:w-auto pr-4 md:p-0 float-left md:float-none"},[e("card-image",{staticClass:"mb-4",attrs:{card:t.cards.hero()}})],1),e("div",{staticClass:"w-1/2 md:w-auto float-left md:float-none"},[e("div",{staticClass:"bg-white dark:bg-gray-800 rounded-lg pl-2 pr-4 pt-4"},[e("deck-curves",{staticClass:"mb-4 h-140 sm:h-160",attrs:{cards:t.cards.other().withCost(),stat:"cost",strategy:"total"}})],1),e("div",{staticClass:"bg-white dark:bg-gray-800 rounded-lg pl-2 pr-4 pt-4 mt-4"},[e("deck-curves",{staticClass:"mb-4 h-140 sm:h-160",attrs:{cards:t.cards.other().withResource(),stat:"resource",strategy:"total"}})],1)]),e("div",{staticClass:"hidden md:block"},[e("div",{staticClass:"mx-2 my-4"},[e("h3",{staticClass:"font-serif uppercase text-lg"},[t._v("Totals")]),e("totals",{staticClass:"mt-2"})],1)]),e("div",{staticClass:"hidden md:block"},[e("div",{staticClass:"mx-2"},[e("h3",{staticClass:"font-serif uppercase text-lg"},[t._v("General")]),e("general",{staticClass:"mt-2"})],1)])]),e("div",{staticClass:"flex-1"},t._l(t.availableSections,function(a){return a.cards.count()?e("div",{staticClass:"flow-root mt-4 md:m-0"},[e("h2",{staticClass:"block flex cursor-pointer font-serif uppercase text-lg mx-4",class:{"mb-4":!t.sectionOpen(a.title)},on:{click:function(r){return t.toggleSection({section:a.title})}}},[e("chevron",{staticClass:"mr-2",attrs:{open:t.sectionOpen(a.title)}}),t._v(" "+t._s(a.title)+" ("+t._s(a.cards.total())+") ")],1),e("div",{staticClass:"flow-root mt-4 md:m-0"},t._l(a.cards,function(r){return e("card-container",{key:r.identifier,staticClass:"transition-all duration-300 float-left"},[e("div",{staticClass:"my-4 mx-2"},[e("card-image",{directives:[{name:"preview-card",rawName:"v-preview-card",value:{stack:[r],index:0},expression:"{stack: [card], index: 0}"}],staticClass:"cursor-help",class:{"shadow-error":(!r.ownedTotal||r.ownedTotal<r.total)&&t.deck.limitToCollection===2},attrs:{card:r,width:300}}),e("numbered-card-buttons",{staticClass:"w-full mx-auto rounded mt-1",attrs:{card:r}})],1)])}),1)]):t._e()}),0)]):e("div",{staticClass:"text-center my-20 mx-10"},[t._v(" Gallery mode is available only to FaB DB patrons."),e("br"),e("br"),e("router-link",{staticClass:"link-alternate",attrs:{to:"/support"}},[t._v("Upgrade to access the gallery mode feature.")])],1)]):e("div",{staticClass:"lg:flex m-4 sm:mr-0"},[e("div",{staticClass:"hidden lg:block md:mr-8 max-w-250"},[e("card-image",{staticClass:"mb-4",attrs:{card:t.cards.hero()}}),e("div",[e("div",{staticClass:"bg-white dark:bg-gray-800 rounded-lg pl-2 pr-4 pt-4 pb-2"},[e("deck-curves",{staticClass:"mb-4 h-140 sm:h-160",attrs:{cards:t.cards.other().withCost(),stat:"cost",strategy:"total"}})],1),e("div",{staticClass:"bg-white dark:bg-gray-800 rounded-lg pl-2 pr-4 pt-4 pb-2 mt-4"},[e("deck-curves",{staticClass:"mb-4 h-140 sm:h-160",attrs:{cards:t.cards.other().withResource(),stat:"resource",strategy:"total"}})],1)])],1),e("div",{staticClass:"sm:flex-grow"},[e("masonry-container",{staticClass:"sm:flex sm:flex-wrap",attrs:{containerId:"text-sections"}},t._l(t.availableSections,function(a){return a.cards.count()?e("div",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],staticClass:"w-full sm:w-1/2 sm:pr-8"},[e("card-item-section",{attrs:{cards:a.cards,title:a.title}})],1):t._e()}),0)],1)])])},Le=[],Re=o(Se,He,Le,!1,null,null,null,null);const Ae=Re.exports,De={props:["collection"],mixins:[p,k,u],components:{GroupedCards:C},data(){return{mainDeck:new d([])}},mounted(){this.updateMainDeck()},computed:{...l("deck",["deck","filters","sideboard"]),...c("session",["user"])},methods:{...n("deck",["addToSideboard"]),add:function(s){this.addToSideboard({card:s}),this.updateMainDeck(),this.addRemote(s)},addRemote(s){_.post("/decks/"+this.deck.slug+"/sideboard",{card:s.identifier})},updateMainDeck(){let s=new d(g.cloneDeep(this.collection));this.sideboard.forEach(e=>{for(let a=0;a<e.total;a++)s.remove(e)});let t=null;this.filters.length?t=new d(s.all()).applyFilters(this.filters):(t=new d([s.hero()]),t=t.concat(s.weapons()),t=t.concat(s.equipment()),t=t.concat(s.other())),this.mainDeck=t.hydrate(),this.redraw("maindeck")}},watch:{sideboard:{handler:function(){this.updateMainDeck()},deep:!0},filters:function(){this.updateMainDeck()}}};var Ve=function(){var t=this,e=t._self._c;return e("div",[t.mainDeck.cards.length?e("grouped-cards",{attrs:{cards:t.mainDeck,"group-id":"maindeck",action:t.add}}):e("div",{staticClass:"text-center my-20"},[t._v(" There are no cards available yet in your main deck. Go to search, and then add cards to your deck from there. ")])],1)},Fe=[],Oe=o(De,Ve,Fe,!1,null,null,null,null);const Ne=Oe.exports,Pe={data(){return{isOpen:!1}},computed:{...l("deck",["mode"]),modes(){return{all:{name:"Deck",icon:'<path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>'},search:{name:"Edit",icon:'<path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" /><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" />'},sideboard:{name:"Sideboard",icon:'<path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" /><path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"/>'},details:{name:"Settings",icon:'<path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />'}}}},methods:{...n("deck",["setMode"]),classes(s){return{"button-disabled":this.mode===s,"button-secondary":this.mode!==s}},select(s){s!==this.mode&&(this.setMode({mode:s}),this.isOpen=!1)}}};var qe=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"hidden lg:flex rounded-lg overflow-hidden mr-2 text-sm"},t._l(t.modes,function(a,r){return e("button",{staticClass:"flex-grow flex items-center space-x-2 px-3",class:t.classes(r),attrs:{type:"button"},on:{click:function(i){return t.select(r)}}},[e("icon",{attrs:{size:5},domProps:{innerHTML:t._s(a.icon)}}),e("span",{staticClass:"py-2"},[t._v(t._s(a.name))])],1)}),0),e("div",{staticClass:"block lg:hidden relative font-serif"},[e("button",{staticClass:"relative flex items-center text-left text-base font-serif rounded-lg px-4 py-1 uppercase hover:bg-white dark:hover:bg-gray-600",class:{"bg-white dark:bg-gray-600":t.isOpen,"bg-white":t.isOpen,"bg-gray-200 dark:bg-black":!t.isOpen,"z-75":t.isOpen},staticStyle:{width:"150px"},on:{click:function(a){t.isOpen=!t.isOpen}}},[e("span",{staticClass:"inline-block mr-1 flex-1"},[t._v(t._s(t.modes[t.mode].name))]),e("svg",{staticClass:"inline-block h-5 w-5 fill-current ml-auto",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[e("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])]),t.isOpen?e("button",{staticClass:"fixed top-0 right-0 bottom-0 left-0 bg-red z-50 bg-black opacity-25 w-full h-full cursor-default backdrop-blur-2",attrs:{type:"button"},on:{click:function(a){t.isOpen=!1}}}):t._e(),t.isOpen?e("div",{staticClass:"w-full absolute right-0 rounded-lg bg-white dark:bg-gray-800 z-100 overflow-hidden mt-2 shadow-lg"},t._l(t.modes,function(a,r){return e("button",{staticClass:"flex items-center space-x-2 w-full text-base text-left px-4 py-1 uppercase",class:r===a?"bg-blue-400 text-white":"hover:bg-blue-400 hover:text-white",on:{click:function(i){return t.select(r)}}},[e("icon",{attrs:{size:5},domProps:{innerHTML:t._s(a.icon)}}),e("span",[t._v(t._s(a.name))])],1)}),0):t._e()])])},Be=[],Ie=o(Pe,qe,Be,!1,null,null,null,null);const M=Ie.exports,Ge={mixins:[x],props:{type:{type:String,required:!0},selected:{type:Array,required:!0}},methods:{isSelected(s){return this.selected.indexOf(s)!==-1},text(){return this.type===""?"All":this.ucfirst(this.type)}}};var Ue=function(){var t=this,e=t._self._c;return e("button",{staticClass:"flex-1 border-r border-gray-200 dark:border-gray-600 py-2 px-1 md:px-2",class:t.isSelected(t.type)?"bg-gray-800 dark:bg-gray-600 text-white":"hover:bg-secondary hover:text-white",attrs:{title:t.text()}},[e("icon",{staticClass:"mx-auto",attrs:{size:6,box:24}},[t._t("default")],2)],1)},Ze=[],We=o(Ge,Ue,Ze,!1,null,null,null,null);const je=We.exports,Ee={name:"deck-builder.search-results",mixins:[h,u],components:{CardImage:f,CardItem:R,CardSearch:O,CardType:je,NumberedCardButtons:N,Paginator:J},computed:{...l("deck",["cards","deck","fullScreen","view"]),...c("session",["user"]),classes(){return{"xl:w-1/3":this.fullScreen}},galleryView(){return this.view==="gallery"&&this.user.subscription}},data(){return{results:{},page:1,params:{cardType:[""],keywords:""}}},methods:{...n("deck",["addCard","setCardTotal"]),...n("messages",["addMessage"]),addToDeck(s){this.addRemote(s,t=>{this.addCard({card:s})})},updatePage(s){this.page=s,this.search(s)},search(s){this.page=s;let t={...this.params,deck:this.deck.slug,hero:this.hero?this.hero.identifier:"",page:s};axios.get("/cards/build",{params:t}).then(e=>{this.results=e.data,this.$emit("search-completed"),this.$eventHub.$emit("search-completed",this.results,t)}).catch(e=>{})},selectCardType(s){if(s===""){this.resetCardTypes();return}this.toggleCardType(s),this.params.cardType.length===0&&this.resetCardTypes()},resetCardTypes(){this.params.cardType=[""]},toggleCardType(s){let t=this.params.cardType.indexOf(s);if(t!==-1)this.params.cardType.splice(t,1);else{this.params.cardType.push(s);let e=this.params.cardType.indexOf("");e!==-1&&this.params.cardType.splice(e,1)}}},mounted(){this.$eventHub.$on("search-requested",s=>{this.params={...this.params,...s},this.search(1)}),this.search(1)},watch:{"params.cardType":{handler:function(){this.search(1)},deep:!0}}};var Ye=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-40 flow-root"},[e("card-search",{staticClass:"md:hidden flex"}),e("div",{staticClass:"flow-root"},[e("div",{staticClass:"text-base pr-0 bg-white dark:bg-gray-800"},[e("div",{staticClass:"w-full flex -mt-1px text-center border border-l-0 border-r-0 border-gray-200 dark:border-gray-600"},[e("card-type",{attrs:{type:"",selected:t.params.cardType},nativeOn:{click:function(a){return t.selectCardType("")}}},[e("path",{attrs:{fill:"currentColor",d:"M21 13H14.4L19.1 17.7L17.7 19.1L13 14.4V21H11V14.3L6.3 19L4.9 17.6L9.4 13H3V11H9.6L4.9 6.3L6.3 4.9L11 9.6V3H13V9.4L17.6 4.8L19 6.3L14.3 11H21V13Z"}})]),e("card-type",{attrs:{type:"weapon",selected:t.params.cardType},nativeOn:{click:function(a){return t.selectCardType("weapon")}}},[e("path",{attrs:{d:"M12 2l10 6c0 4-2 6-6 7l-3-5-4-4 3-4M4.11 19.84l-1.99-1.51L9.19 9 11 10.81l-6.89 9.03z"}})]),e("card-type",{attrs:{type:"equipment",selected:t.params.cardType},nativeOn:{click:function(a){return t.selectCardType("equipment")}}},[e("path",{attrs:{d:"M12 4a3.5 3.5 0 00-3.5 3.5h2A1.5 1.5 0 0112 6a1.5 1.5 0 011.5 1.5A1.5 1.5 0 0112 9c-.55 0-1 .45-1 1v1.75L2.4 18.2A1 1 0 003 20h18a1 1 0 00.6-1.8L13 11.75v-.9a3.5 3.5 0 002.5-3.35A3.5 3.5 0 0012 4m0 9.5l6 4.5H6z"}})]),e("card-type",{attrs:{type:"instant",selected:t.params.cardType},nativeOn:{click:function(a){return t.selectCardType("instant")}}},[e("path",{attrs:{d:"M11 15H6l7-14v8h5l-7 14v-8z"}})]),e("card-type",{attrs:{type:"item",selected:t.params.cardType},nativeOn:{click:function(a){return t.selectCardType("item")}}},[e("path",{attrs:{fill:"currentColor",d:"M5,19A1,1 0 0,0 6,20H18A1,1 0 0,0 19,19C19,18.79 18.93,18.59 18.82,18.43L13,8.35V4H11V8.35L5.18,18.43C5.07,18.59 5,18.79 5,19M6,22A3,3 0 0,1 3,19C3,18.4 3.18,17.84 3.5,17.37L9,7.81V6A1,1 0 0,1 8,5V4A2,2 0 0,1 10,2H14A2,2 0 0,1 16,4V5A1,1 0 0,1 15,6V7.81L20.5,17.37C20.82,17.84 21,18.4 21,19A3,3 0 0,1 18,22H6M13,16L14.34,14.66L16.27,18H7.73L10.39,13.39L13,16M12.5,12A0.5,0.5 0 0,1 13,12.5A0.5,0.5 0 0,1 12.5,13A0.5,0.5 0 0,1 12,12.5A0.5,0.5 0 0,1 12.5,12Z"}})]),e("card-type",{attrs:{type:"non-attack action",selected:t.params.cardType},nativeOn:{click:function(a){return t.selectCardType("non-attack action")}}},[e("path",{attrs:{fill:"currentColor",d:"M17.8,20C17.4,21.2 16.3,22 15,22H5C3.3,22 2,20.7 2,19V18H5L14.2,18C14.6,19.2 15.7,20 17,20H17.8M19,2C20.7,2 22,3.3 22,5V6H20V5C20,4.4 19.6,4 19,4C18.4,4 18,4.4 18,5V18H17C16.4,18 16,17.6 16,17V16H5V5C5,3.3 6.3,2 8,2H19M8,6V8H15V6H8M8,10V12H14V10H8Z"}})]),e("card-type",{attrs:{type:"attack action",selected:t.params.cardType},nativeOn:{click:function(a){return t.selectCardType("attack action")}}},[e("path",{attrs:{fill:"currentColor",d:"M6.92,5H5L14,14L15,13.06M19.96,19.12L19.12,19.96C18.73,20.35 18.1,20.35 17.71,19.96L14.59,16.84L11.91,19.5L10.5,18.09L11.92,16.67L3,7.75V3H7.75L16.67,11.92L18.09,10.5L19.5,11.91L16.83,14.58L19.95,17.7C20.35,18.1 20.35,18.73 19.96,19.12Z"}})]),e("card-type",{attrs:{type:"attack reaction",selected:t.params.cardType},nativeOn:{click:function(a){return t.selectCardType("attack reaction")}}},[e("path",{attrs:{d:"M6.2 2.44l11.9 11.9 2.12-2.12 1.41 1.41-2.47 2.47 3.18 3.18c.39.39.39 1.02 0 1.41l-.71.71a.996.996 0 01-1.41 0L17 18.23l-2.44 2.47-1.41-1.41 2.12-2.12-11.9-11.9V2.44H6.2M15.89 10l4.74-4.74V2.44H17.8l-4.74 4.74L15.89 10m-4.95 5l-2.83-2.87-2.21 2.21-2.12-2.12-1.41 1.41 2.47 2.47-3.18 3.19a.996.996 0 000 1.41l.71.71c.39.39 1.02.39 1.41 0L7 18.23l2.44 2.47 1.41-1.41-2.12-2.12L10.94 15z"}})]),e("card-type",{attrs:{type:"defense reaction",selected:t.params.cardType},nativeOn:{click:function(a){return t.selectCardType("defense reaction")}}},[e("path",{attrs:{fill:"currentColor",d:"M21,11C21,16.55 17.16,21.74 12,23C6.84,21.74 3,16.55 3,11V5L12,1L21,5V11M12,21C15.75,20 19,15.54 19,11.22V6.3L12,3.18V21Z"}})])],1)]),e("div",t._l(t.results.data,function(a){return e("div",[t.galleryView?e("div",{staticClass:"w-1/2 float-left mt-4 overflow-hidden px-2 sm:px-4",class:t.classes,staticStyle:{"max-width":"350px"}},[e("card-image",{directives:[{name:"preview-card",rawName:"v-preview-card",value:{stack:[a],index:0},expression:"{stack: [card], index: 0}"}],staticClass:"cursor-help",attrs:{card:a,width:300}}),e("numbered-card-buttons",{staticClass:"w-full mx-auto rounded sm:rounded-lg mt-1",attrs:{card:a}})],1):e("card-item",{attrs:{card:a,layout:"horizontal"}})],1)}),0)]),e("paginator",{staticClass:"mt-4",attrs:{results:t.results},on:{"page-selected":t.updatePage}})],1)},Xe=[],Je=o(Ee,Ye,Xe,!1,null,null,null,null);const Ke=Je.exports,Qe={name:"deck-builder.sideboard",props:["collection"],mixins:[p,u],components:{Colour:H,GroupedCards:C},computed:{...l("deck",["cards","deck","fullScreen"]),...c("session",["user"]),sideboard(){return new d(this.collection).hydrate()}},methods:{...n("deck",["addToSideboard","removeFromSideBoard"]),add(s){s.total-this.sideboardCardTotal(s)<=0||(this.addToSideboard({card:s}),this.addRemote(s))},addRemote(s){_.post("/decks/"+this.deck.slug+"/sideboard",{card:s.identifier})},remove(s){this.removeFromSideBoard({card:s}),this.removeRemote(s)},removeRemote(s){_.delete("/decks/"+this.deck.slug+"/sideboard/"+s.identifier)},setHover(s){this.$eventHub.$emit("hover-card",s)},sideboardCardTotal(s){let t=this.collection.filter(e=>e.identifier===s.identifier)[0];return t?t.total:0}}};var ts=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-40"},[e("div",{staticClass:"hidden md:block"},[e("grouped-cards",{attrs:{cards:t.sideboard,"group-id":"sideboard",action:t.remove,width:t.fullScreen?"md:w-1/3":"md:w-1/2"}}),t.sideboard.cards.length?t._e():e("div",{staticClass:"text-center my-20 mx-10"},[t._v(" You have not yet added"),e("br"),t._v("any cards"),e("br"),t._v("to your sideboard. ")])],1),e("div",{staticClass:"md:hidden"},[e("table",{staticClass:"w-full border-collapse border border-gray-200"},[t._m(0),e("tbody",t._l(t.cards,function(a){return e("tr",[e("td",[e("button",{staticClass:"w-full flex items-center justify-center bg-white hover:bg-primary hover:text-white p-2",on:{click:function(r){return t.add(a)}}},[e("span",[t._v(" "+t._s(a.total-t.sideboardCardTotal(a))+" ")]),e("icon",{attrs:{size:5}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"}})])],1)]),e("td",[e("div",{staticClass:"flex bg-white items-center p-2"},[e("colour",{staticClass:"mr-2",attrs:{resource:a.stats.resource}}),e("span",{staticClass:"cursor-help whitespace-nowrap overflow-hidden",on:{click:function(r){return t.setHover(a)}}},[t._v(t._s(a.name))])],1)]),e("td",[e("button",{staticClass:"w-full flex items-center justify-center bg-white hover:bg-primary hover:text-white p-2",on:{click:function(r){return t.remove(a)}}},[e("icon",{attrs:{size:5}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"}})]),e("span",[t._v(" "+t._s(t.sideboardCardTotal(a))+" ")])],1)])])}),0)])])])},es=[function(){var s=this,t=s._self._c;return t("thead",[t("tr",{staticClass:"text-white"},[t("th",{staticClass:"w-1/5 sm:w-1/10 p-2 bg-gray-800"},[s._v("Deck")]),t("th",{staticClass:"p-2 bg-gray-800 text-left"},[s._v("Card")]),t("th",{staticClass:"w-1/5 sm:w-1/10 p-2 bg-gray-800"},[s._v("Sideboard")])])])}],ss=o(Qe,ts,es,!1,null,null,null,null);const as=ss.exports,rs={components:{Icon:b},computed:{...l("deck",["mode","view"]),inactive:function(){return this.mode==="details"}},methods:{...n("deck",["toggleView"])}};var is=function(){var t=this,e=t._self._c;return e("button",{staticClass:"block",class:{"text-gray-500":t.inactive,"link-alternate":!t.inactive},attrs:{disabled:t.inactive},on:{click:t.toggleView}},[e("icon",{attrs:{size:6}},[t.view==="text"?e("path",{attrs:{d:"M0 0h9v9H0V0zm2 2v5h5V2H2zm-2 9h9v9H0v-9zm2 2v5h5v-5H2zm9-13h9v9h-9V0zm2 2v5h5V2h-5zm-2 9h9v9h-9v-9zm2 2v5h5v-5h-5z"}}):e("path",{attrs:{d:"M1 1h18v2H1V1zm0 8h18v2H1V9zm0 8h18v2H1v-2zM1 5h12v2H1V5zm0 8h12v2H1v-2z"}})])],1)},os=[],ls=o(rs,is,os,!1,null,null,null,null);const ns=ls.exports,cs={props:["action"],computed:{...c("deck",["minZoom","maxZoom"]),...l("deck",["fullScreen","mode","view","zoom"]),inactive(){return this.mode==="details"||this.view==="text"?!0:this.action==="in"?this.zoom<=this.minZoom:this.zoom>=this.maxZoom}},methods:{...n("deck",["zoomIn","zoomOut"]),setZoom:function(){let s=this.action==="in"?"zoomIn":"zoomOut";this[s]()}}};var ds=function(){var t=this,e=t._self._c;return e("button",{staticClass:"block",class:{"text-gray-500":t.inactive,"link-alternate":!t.inactive},attrs:{disabled:t.inactive},on:{click:t.setZoom}},[e("icon",{attrs:{size:6}},[t.action==="in"?e("path",{attrs:{"fill-rule":"evenodd",d:"M12.9 14.32a8 8 0 111.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 108 2a6 6 0 000 12zM7 7V5h2v2h2v2H9v2H7V9H5V7h2z"}}):e("path",{attrs:{"fill-rule":"evenodd",d:"M12.9 14.32a8 8 0 111.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 108 2a6 6 0 000 12zM5 7h6v2H5V7z"}})])],1)},us=[],ms=o(cs,ds,us,!1,null,null,null,null);const ps=ms.exports,hs={components:{AllCards:Yt,Breadcrumbs:P,CardImage:f,CardSearch:O,DeckName:ge,DeckTotals:we,EditDeck:Ae,FullscreenButton:U,GroupingSelector:Z,HeroSelector:y,Icon:b,MainDeck:Ne,DeckDetails:he,ModeSelector:M,HeaderTitle:q,PlayDeck:K,SearchResults:Ke,Sideboard:as,ViewButton:ns,ZoomButton:ps},mixins:[p,h,M,u],data(){return{cardIndex:0,swipeModes:["all","search","details"],offset:10,pad:17}},computed:{...c("deck",["cards"]),...l("deck",["deck","fullScreen","grouping","mode","sideboard","view","zoom"]),...l("cardSearch",["params"]),containers(){if(!this.fullScreen)return"container sm:mx-auto"},fullScreenClasses(){if(this.fullScreen)return"fixed top-0 bottom-0 left-0 right-0 z-75"},mainAreaClasses(){return this.mode==="search"||this.mode==="sideboard"?"w-0 md:w-2/3":"w-full"},sidebarClasses(){return{"hidden md:block md:w-1/3 p-4 pr-0":!0}},topAreaClasses(){return this.mode==="search"?"w-full lg:w-2/3":"w-full"},crumbs(){return[{text:"Home",link:"/"},{text:"Decks",link:"/decks/build/"},{text:this.deck.name}]}},methods:{...n("messages",["addMessage"]),...n("deck",["addCard","setDeck","setMode","setZoom","setGrouping","toggleFullScreen"]),setHero(s,t){this.addCard({card:s}),this.setMode({mode:"search"}),this.deck.format=t.toLowerCase(),this.addRemote(s)},scrollTop(){this.$refs.searchResults.scrollTop=0,window.scrollTo({top:0})},changeMode(s){s>=0&&s<=2&&this.setMode({mode:this.swipeModes[s]})},updateGrouping(s){this.setGrouping({grouping:s})},currentSwipeMode(){return this.swipeModes.indexOf(this.mode)}},extends:X((s,t)=>{axios.get("/decks/"+s.params.deck).then(e=>{t(function(){if(!e.data.mine){this.$router.push({name:"decks.view",params:{deck:e.data.slug}});return}this.setMode({mode:"all"}),this.setDeck({deck:e.data})})})})};var vs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-base"},[e("header-title",{scopedSlots:t._u([{key:"title",fn:function(){return[e("deck-name",{attrs:{name:t.deck.name,hero:t.hero}})]},proxy:!0}])}),e("breadcrumbs",{attrs:{crumbs:t.crumbs}}),e("div",{class:t.fullScreenClasses},[e("div",{staticClass:"bg-white dark:bg-gray-800 border-b-4 border-gray-300 dark:border-gray-600"},[e("div",{class:t.containers},[e("div",{staticClass:"flex"},[e("div",{staticClass:"flex items-center p-4",class:t.topAreaClasses},[e("div",{staticClass:"flex-auto"},[e("deck-totals")],1),t.mode!=="details"?e("grouping-selector",{staticClass:"mr-2 hidden md:block",attrs:{grouping:t.grouping,options:{default:"Default",pitch:"Pitch",cost:"Cost",type:"Type"}},on:{selected:t.updateGrouping}}):t._e(),e("mode-selector",{staticClass:"w-auto"}),e("div",{staticClass:"px-2 lg:px-1 flex space-x-2"},[e("play-deck",{attrs:{deck:t.deck}}),e("zoom-button",{staticClass:"hidden md:block",attrs:{zoom:t.zoom,action:"in",fullScreen:t.fullScreen}}),e("zoom-button",{staticClass:"hidden md:block",attrs:{zoom:t.zoom,action:"out",fullScreen:t.fullScreen}}),e("view-button"),e("fullscreen-button",{attrs:{"full-screen":t.fullScreen,toggle:t.toggleFullScreen}})],1)],1),t.mode==="search"?e("div",{staticClass:"flex items-center",class:{...t.sidebarClasses,"px-0 pr-4":this.fullScreen,"border-l border-gray-300 dark:border-gray-600":!this.fullScreen}},[e("card-search",{staticClass:"flex bg-gray-800 rounded-lg w-full overflow-hidden",class:{"focus:bg-white focus:border-gray-500":!t.fullScreen}})],1):t._e()])])]),e("div",{staticClass:"main-body h-full relative"},[e("div",{staticClass:"flex h-full",class:t.containers},[e("div",{staticClass:"h-full overflow-y-auto",class:t.mainAreaClasses},[t.hero?e("div",{staticClass:"h-full"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.mode==="all",expression:"mode === 'all'"}]},[e("div",[e("all-cards",{staticClass:"hidden sm:block",attrs:{collection:t.cards}}),e("edit-deck",{staticClass:"sm:hidden",attrs:{collection:t.cards}})],1)]),e("edit-deck",{directives:[{name:"show",rawName:"v-show",value:t.mode==="search",expression:"mode === 'search'"}],attrs:{collection:t.cards}}),t.mode==="details"?e("deck-details"):t._e(),e("main-deck",{directives:[{name:"show",rawName:"v-show",value:t.mode==="sideboard",expression:"mode === 'sideboard'"}],attrs:{collection:t.cards}})],1):e("div",{staticClass:"h-full"},[e("hero-selector",{attrs:{deck:t.deck},on:{"hero-selected":t.setHero}})],1)]),t.mode==="search"||t.mode==="sideboard"?e("div",{ref:"searchResults",staticClass:"w-full md:w-1/3 overflow-y-auto bg-gray-200 dark:bg-gray-800 border-l border-gray-300 dark:border-gray-600"},[e("search-results",{directives:[{name:"show",rawName:"v-show",value:t.mode==="search",expression:"mode === 'search'"}],on:{"search-completed":t.scrollTop}}),e("sideboard",{directives:[{name:"show",rawName:"v-show",value:t.mode==="sideboard",expression:"mode === 'sideboard'"}],attrs:{collection:t.sideboard}})],1):t._e()])])])],1)},fs=[],_s=o(hs,vs,fs,!1,null,null,null,null);const Fs=_s.exports;export{Fs as default};
