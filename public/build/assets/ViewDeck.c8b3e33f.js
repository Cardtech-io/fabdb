import{n as s,c as l,j as d,I as n,b as m,B as u,H as p,m as v,h as r,p as f,a as i}from"./app.18971425.js";import{C as h}from"./Cards.057401c3.js";import{C as _}from"./Colour.64e0ac95.js";import{S as k,D as b,M as g,b as C,c as y}from"./Shareable.c9def9ce.js";import{D as x,F as w}from"./FormatLabel.ec89e9be.js";import{V as o,D as z,R as M}from"./Discussion.acf7a165.js";import{H as $}from"./HeroAvatar.d8520f8c.js";import{L as V}from"./LazyLoader.0379a251.js";import{R as D}from"./Rulings.5cf49e02.js";import{M as H}from"./Models.cc4dbaf5.js";import{D as R}from"./Deck.74d5691a.js";import{V as A}from"./Viewable.0602aa78.js";import"./SelectorItem.c7f7ff05.js";import"./Avatar.25d72462.js";import"./Badge.3dfe2e3b.js";import"./Card.f220136b.js";const q={props:{card:{type:Object,required:!0},collapse:{type:Boolean,default:!1,required:!1},useRouter:{type:Boolean,default:!0}},components:{Colour:_},methods:{toggleCard(a){this.$eventHub.$emit("hover-card",a)},total(){return this.card.total-this.card.sideboardTotal}}};var T=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex items-center"},[e.card.stats.resource||!e.collapse?t("colour",{staticClass:"mr-2",attrs:{resource:e.card.stats.resource}}):e._e(),t("span",{directives:[{name:"preview-card",rawName:"v-preview-card",value:{stack:[e.card],index:0},expression:"{stack: [card], index: 0}"},{name:"hover-card",rawName:"v-hover-card",value:e.card,expression:"card"}],staticClass:"cursor-help help-underline"},[e._v(e._s(e.card.name))]),e.total()?t("span",{staticClass:"ml-1"},[e._v("("+e._s(e.total())+")")]):e._e(),e.card.sideboardTotal?t("div",{staticClass:"flex items-center ml-auto",attrs:{title:e.card.sideboardTotal+" in sideboard"}},[t("icon",{attrs:{size:4}},[t("path",{attrs:{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}}),t("path",{attrs:{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"}})]),t("div",{staticClass:"ml-1"},[e._v("("+e._s(e.card.sideboardTotal)+")")])],1):e._e()],1)},S=[],F=s(q,T,S,!1,null,null,null,null);const L=F.exports,B={props:{cards:{type:h,required:!0},heading:{type:String,required:!0}},components:{DeckCard:L}};var U=function(){var e=this,t=e._self._c;return t("div",[t("h3",{staticClass:"py-2 px-4 font-serif uppercase text-2xl"},[e._v(e._s(e.heading)+" ("+e._s(e.cards.total())+")")]),t("ol",e._l(e.cards,function(c,se){return t("li",{staticClass:"p-2 pl-4 odd:bg-gray-100 even:bg-gray-200 dark:odd:bg-gray-700 dark:even:bg-gray-600"},[t("deck-card",{attrs:{card:c,collapse:!0,"use-router":!1}})],1)}),0)])},j=[],P=s(B,U,j,!1,null,null,null,null);const I=P.exports,E={props:{url:{required:!0,type:String}},data(){let a=new URLSearchParams("?"+this.url.split("?")[1]);return{actualUrl:this.url.indexOf("embed")!==-1?this.url:"https://www.youtube.com/embed/"+a.get("v")}}};var G=function(){var e=this,t=e._self._c;return t("iframe",{staticClass:"w-full",attrs:{src:e.actualUrl,height:"400",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})},N=[],O=s(E,G,N,!1,null,null,null,null);const W=O.exports,Y={extends:o,components:{Icon:l}};var J=function(){var e=this,t=e._self._c;return t("button",{staticClass:"flex flex-0 items-center justify-center button-primary px-4 pb-2 pt-10 space-x-2",attrs:{title:"Copy deck to my decks"},on:{click:e.vote}},[t("icon",{attrs:{size:e.size}},[t("path",{attrs:{d:"M9.653 16.915l-.005-.003-.019-.01a20.759 20.759 0 01-1.162-.682 22.045 22.045 0 01-2.582-1.9C4.045 12.733 2 10.352 2 7.5a4.5 4.5 0 018-2.828A4.5 4.5 0 0118 7.5c0 2.852-2.044 5.233-3.885 6.82a22.049 22.049 0 01-3.744 2.582l-.019.01-.005.003h-.002a.739.739 0 01-.69.001l-.002-.001z"}})]),e.voteState?t("span",[e._v("Remove")]):t("span",[e._v("Add")])],1)},K=[],Q=s(Y,J,K,!1,null,null,null,null);const X=Q.exports,Z={mixins:[d,k,n,m,A],components:{Breadcrumbs:u,Cards:I,DeckCurves:b,DeckLabel:x,DeckVideo:W,Discussion:z,Favourite:X,FormatLabel:w,HeaderTitle:p,HeroAvatar:$,Icon:l,MetricsPerformance:g,Respond:M,Rulings:D,TabItem:C,Tabs:y,Votes:o},computed:{...v("session",["user"]),cards(){return this.deck.cards||[]},crumbs(){return[{text:"Home",link:{name:"home"}},{text:"Decks",link:{name:"decks.browse"}},{text:this.deck.name}]},rulings(){let a=r.flatten(this.deck.cards.all().map(e=>r.flatten(e.rulings.map(t=>t.description))));return r.uniq(a)}},data(){return{deck:null,tab:"composition"}},methods:{...f("messages",["addMessage"]),copyDeck(){i.post("/decks/copy",{deck:this.deck.slug}).then(a=>{this.addMessage({status:"success",message:"Deck successfully copied."}),this.$router.push({name:"decks.build",params:{deck:a.data.deck}})})}},metaInfo(){let a="View deck - "+this.deck.name,e=[];return this.deck.hero?(a+=" ("+this.deck.hero.name+")",e=[{vmid:"og:type",property:"og:type",content:"website"},{vmid:"og:title",property:"og:title",content:a},{vmid:"og:description",property:"og:description",content:"A custom "+this.deck.hero.keywords[0]+" deck built at fabdb.net, utilising the hero, '"+this.deck.hero.name+"'."},{vmid:"og:image",property:"og:image",content:this.heroProfile(this.deck.hero,300)},{vmid:"og:image:width",property:"og:image:width",content:"450"},{vmid:"og:image:height",property:"og:image:height",content:"628"}]):e=[{vmid:"og:type",property:"og:type",content:"website"},{vmid:"og:title",property:"og:title",content:a},{vmid:"og:description",property:"og:description",content:"A custom deck built at fabdb.net."}],{title:a,meta:e}},extends:V((a,e)=>{i.get("/decks/"+a.params.deck).then(t=>{e(function(){this.deck=H.hydrate(t.data,R)})})})};var ee=function(){var e=this,t=e._self._c;return t("div",[e.deck&&e.deck.cards&&e.deck.hero?t("div",[t("header-title",{attrs:{title:e.deck.name+" ("+e.deck.hero.name+")"}}),t("breadcrumbs",{attrs:{crumbs:e.crumbs}}),t("div",{staticClass:"main-body"},[t("div",{staticClass:"container sm:mx-auto px-4"},[t("div",{staticClass:"md:flex md:pt-0"},[t("div",{staticClass:"py-4 md:pr-4 md:w-1/4 space-y-4"},[t("div",[t("card-image",{staticClass:"relative z-10",attrs:{card:e.deck.hero}}),t("div",{staticClass:"relative flex rounded-b-xl overflow-hidden space-x-px -mt-8 z-0"},[t("a",{staticClass:"flex flex-1 items-center justify-center button-primary rounded-l-xl px-2 pb-2 pt-10",attrs:{href:e.buyLink(e.deck),target:"_blank",title:"Buy from TCG Player"}},[t("icon",{attrs:{size:4}},[t("path",{attrs:{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}}),t("path",{attrs:{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z","clip-rule":"evenodd"}})]),t("span",{staticClass:"ml-1"},[e._v("Buy deck")])],1),t("favourite",{attrs:{size:4,total:e.deck.fields.totalVotes,voted:e.deck.fields.myVote,voteable:"deck",foreign:e.deck.slug}}),t("button",{staticClass:"flex flex-1 items-center justify-center button-primary rounded-r-xl px-2 pb-2 pt-10",attrs:{title:"Copy deck to my decks"},on:{click:e.copyDeck}},[t("icon",{attrs:{size:4}},[t("path",{attrs:{d:"M6 6V2c0-1.1.9-2 2-2h10a2 2 0 012 2v10a2 2 0 01-2 2h-4v4a2 2 0 01-2 2H2a2 2 0 01-2-2V8c0-1.1.9-2 2-2h4zm2 0h4a2 2 0 012 2v4h4V2H8v4zM2 8v10h10V8H2z"}})]),t("span",{staticClass:"ml-2"},[e._v("Copy deck")])],1)],1)],1),e.deck.label?t("deck-label",{staticClass:"block w-full py-2 text-center rounded-lg",attrs:{label:e.deck.label}}):e._e(),e.deck.format?t("format-label",{staticClass:"block w-full py-2 text-center rounded-lg",attrs:{format:e.deck.format}}):e._e(),t("div",{staticClass:"rounded-lg bg-gray-100 dark:bg-gray-800 overflow-hidden"},[t("div",{staticClass:"flex justify-between items-center bg-white dark:bg-gray-700 p-2 px-4"},[t("h3",{staticClass:"font-serif uppercase text-lg"},[e._v("Basic stats")]),t("div",{staticClass:"flex space-x-1 items-center"},[t("span",{staticClass:"rounded-lg h-2 w-2",class:e.resourceColour(1)}),e._v(" "),t("span",[e._v(e._s(e.deck.cards.colouredCount("red")))]),t("span",{staticClass:"rounded-lg h-2 w-2",class:e.resourceColour(2)}),e._v(" "),t("span",[e._v(e._s(e.deck.cards.colouredCount("yellow"))+" \xA0")]),t("span",{staticClass:"rounded-lg h-2 w-2",class:e.resourceColour(3)}),e._v(" "),t("span",[e._v(e._s(e.deck.cards.colouredCount("blue"))+" \xA0")])])]),t("div",{staticClass:"px-4"},[t("ol",{staticClass:"mb-8"},[t("li",{staticClass:"block py-1 w-full"},[e._v("Attack actions: "+e._s(e.deck.other.attackActions().total()))]),t("li",{staticClass:"block py-1 w-full"},[e._v("Attack reactions: "+e._s(e.deck.other.attackReactions().total()))]),t("li",{staticClass:"block py-1 w-full"},[e._v("Defense reactions: "+e._s(e.deck.other.defenseReactions().total()))])])])])],1),t("div",{staticClass:"w-full md:w-3/4 md:py-4"},[t("tabs",{scopedSlots:e._u([{key:"right",fn:function(){return[t("button",{staticClass:"pl-2",on:{click:function(c){return e.shareDeckViaText(e.deck)}}},[t("icon",{staticClass:"link",attrs:{size:5}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M15.988 3.012A2.25 2.25 0 0118 5.25v6.5A2.25 2.25 0 0115.75 14H13.5V7A2.5 2.5 0 0011 4.5H8.128a2.252 2.252 0 011.884-1.488A2.25 2.25 0 0112.25 1h1.5a2.25 2.25 0 012.238 2.012zM11.5 3.25a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75v.25h-3v-.25z","clip-rule":"evenodd"}}),t("path",{attrs:{"fill-rule":"evenodd",d:"M2 7a1 1 0 011-1h8a1 1 0 011 1v10a1 1 0 01-1 1H3a1 1 0 01-1-1V7zm2 3.25a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75zm0 3.5a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75z","clip-rule":"evenodd"}})])],1)]},proxy:!0}],null,!1,2981591708)},[t("tab-item",{attrs:{name:"Deck"}},[e.deck.notes||e.deck.videoUrl?t("div",{staticClass:"md:flex"},[t("div",{staticClass:"w-full md:w-2/3 md:pl-4 md:pr-8"},[e.deck.videoUrl?t("div",{staticClass:"mb-8"},[t("deck-video",{attrs:{url:e.deck.videoUrl}})],1):e._e(),e.deck.notes?t("div",{staticClass:"mb-8",domProps:{innerHTML:e._s(e.minimalMarkdown(e.deck.notes.replace(/(?:https?|ftp):\/\/[\n\S]+/g,"")))}}):e._e(),t("div",{staticClass:"border-t border-gray-400 mt-4"},[t("discussion",{staticClass:"pb-8",attrs:{type:"deck",id:e.deck.slug}})],1)]),t("div",{staticClass:"w-full md:w-1/3"},[e.deck.weapons.total()?t("cards",{staticClass:"mb-8",attrs:{cards:e.deck.weapons,heading:"Weapons"}}):e._e(),e.deck.equipment.total()?t("cards",{staticClass:"mb-8",attrs:{cards:e.deck.equipment,heading:"Equipment"}}):e._e(),e.deck.other.total()?t("cards",{attrs:{cards:e.deck.other,heading:"Main deck"}}):e._e()],1)]):t("div",{staticClass:"md:flex"},[t("div",{staticClass:"w-full md:w-1/3",class:{"pr-4":!e.deck.notes}},[e.deck.weapons.total()?t("cards",{staticClass:"mb-8",attrs:{cards:e.deck.weapons,heading:"Weapons"}}):e._e(),e.deck.equipment.total()?t("cards",{staticClass:"mb-8",attrs:{cards:e.deck.equipment,heading:"Equipment"}}):e._e()],1),t("div",{staticClass:"w-full md:w-1/3"},[e.deck.other.total()?t("cards",{attrs:{cards:e.deck.other,heading:"Main deck"}}):e._e()],1)])]),t("tab-item",{attrs:{name:"Metrics & Performance"}},[t("metrics-performance",{attrs:{deck:e.deck}})],1),t("tab-item",{attrs:{name:"Rulings"}},[t("rulings",{attrs:{rulings:e.rulings}})],1)],1)],1)]),e.deck.notes?e._e():t("div",{staticClass:"border-t border-gray-400 mt-4"},[t("discussion",{staticClass:"pb-8",attrs:{type:"deck",id:e.deck.slug}})],1)])])],1):t("div",[t("header-title",{attrs:{title:e.deck.name}}),t("breadcrumbs",{attrs:{crumbs:e.crumbs}}),e._m(0)],1)])},te=[function(){var a=this,e=a._self._c;return e("div",{staticClass:"bg-gray-200"},[e("div",{staticClass:"container sm:mx-auto py-8 px-4"},[a._v(" This deck is not yet ready for viewing or sharing, possibly because it's missing some required configuration. ")])])}],ae=s(Z,ee,te,!1,null,null,null,null);const ge=ae.exports;export{ge as default};
