import{b as o,m as a,o as l,n as r,e as c,H as v}from"./app.d4472289.js";import{F as u}from"./Button.ad12d1fb.js";import{E as i,T as m}from"./Time.48f8cfad.js";import{L as p}from"./LazyLoader.0379a251.js";const d={components:{EventTypeIcon:i},props:["event"],mixins:[o],computed:{...a("session",["user"]),eventLink:function(){return{name:this.event.manager.slug==this.user.slug?"events.edit":"events.view",params:{event:this.event.slug}}},manager:function(){return this.event.manager.slug==this.user.slug},registered:function(){return this.event.players.filter(s=>s.userId==this.user.id).length}},data(){return{time:m}},methods:{...l("messages",["addMessage"]),copyShareURL:function(){let s={name:"events.view",params:{event:this.event.slug}},t=this.$router.resolve(s);this.$copyText(location.protocol+"//"+location.host+t.href),this.addMessage({status:"success",message:"Event URL copied to clipboard."}),this.$router.push(s)}}};var h=function(){var t=this,e=t._self._c;return e("li",{staticClass:"block flex odd:bg-gray-100 hover:bg-white dark:odd:bg-gray-800 dark:hover:bg-black items-center mb-1"},[e("span",{staticClass:"block flex-initial py-4 px-8"},[e("router-link",{attrs:{to:t.eventLink}},[e("event-type-icon",{attrs:{type:t.event.type,size:16,title:t.event.type}})],1)],1),e("div",{staticClass:"flex-auto py-4"},[e("router-link",{attrs:{to:t.eventLink}},[e("h2",{staticClass:"font-serif uppercase text-xl"},[t._v(t._s(t.event.name)+" "),e("span",{staticClass:"text-gray-500"},[t._v("("+t._s(t.ucfirst(t.event.type))+")")])]),e("p",{staticClass:"text-base"},[t._v(" "+t._s(t.time.calendar(t.event.when))+" "),e("span",{staticClass:"font-bold ml-2"},[t.event.fee?e("span",[t._v("$"+t._s(t.event.fee))]):e("span",[t._v("FREE")])])]),t.manager?e("p",{staticClass:"text-sm text-blue-700"},[t._v("You are managing this event.")]):t._e(),t.registered?e("p",{staticClass:"text-sm text-green-700"},[t._v("You are participating in this event.")]):t._e()])],1),t.manager?e("a",{staticClass:"text-center py-6 px-8 flex-initial border-l border-gray-200 link",attrs:{href:""},on:{click:function(n){return n.preventDefault(),t.copyShareURL()}}},[e("svg",{staticClass:"fill-current w-6 h-6",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[e("title",[t._v("Share event")]),e("path",{attrs:{d:"M4 10c0-1.1.9-2 2-2h8c1.1 0 2 .9 2 2v8c0 1.1-.9 2-2 2H6c-1.1 0-2-.9-2-2v-8zm2 0v8h8v-8h-2V8H8v2H6zm3-6.17V16h2V3.83l3.07 3.07 1.42-1.41L10 0l-.7.7-4.8 4.8 1.42 1.4L9 3.84z"}})])]):t._e(),e("span",{staticClass:"text-center py-6 px-8 flex-initial border-l border-gray-200 flex items-center"},[e("svg",{staticClass:"inline-block fill-current w-6 h-6",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[e("path",{attrs:{d:"M5 5a5 5 0 0110 0v2A5 5 0 015 7V5zM0 16.68A19.9 19.9 0 0110 14c3.64 0 7.06.97 10 2.68V20H0v-3.32z"}})]),e("span",{staticClass:"text-2xl ml-2"},[t._v(t._s(t.event.playerCount))])])])},_=[],f=r(d,h,_,!1,null,null,null,null);const g=f.exports,x={components:{Button:u,Crumbs:c,EventItem:g,EventTypeIcon:i,HeaderTitle:v},computed:{...a("session",["user"])},data(){return{crumbs:[{text:"Home",name:"home"},{text:"My Events"}],events:[]}},extends:p((s,t)=>{axios.get("/events").then(e=>{t(function(){this.events=e.data})})})};var y=function(){var t=this,e=t._self._c;return e("div",[e("header-title",{attrs:{title:"My events"}}),e("div",{staticClass:"crumbs font-serif uppercase"},[e("div",{staticClass:"container px-4 py-2 sm:mx-auto flex"},[e("div",{staticClass:"flex-auto"},[e("crumbs",{attrs:{crumbs:t.crumbs}})],1),e("div",{staticClass:"text-right flex-auto"},[t.user.subscription?e("router-link",{staticClass:"rounded-full py-2 px-4 button-primary",attrs:{to:{name:"events.start"}}},[t._v("Schedule an event")]):t._e()],1)])]),e("div",{staticClass:"main-body"},[e("div",{staticClass:"container sm:mx-auto p-4 py-8"},[t.events.length?e("ol",t._l(t.events,function(n){return e("event-item",{key:n.slug,attrs:{event:n}})}),1):e("div",[t._v(" You have not yet registered any events. To register one, click the button top-right. ")])])])],1)},b=[],C=r(x,y,b,!1,null,null,null,null);const E=C.exports;export{E as default};
