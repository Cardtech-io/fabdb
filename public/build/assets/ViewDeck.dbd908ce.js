import{n as a,i as l,I as d,b as o,B as n,H as m,c as u,m as p,_ as r,o as h,a as i}from"./app.7bdea8e6.js";import{C as v}from"./Cards.f6c6433d.js";import{C as k}from"./Colour.7eb81ff4.js";import{S as f,D as _,T as b,a as g}from"./Tabs.a8a8bf92.js";import{D as C}from"./DeckLabel.29de74a2.js";import{D as y,R as w,V as x}from"./Discussion.3bccbd66.js";import{H as z}from"./HeroAvatar.b18ddeff.js";import{L as V}from"./LazyLoader.0379a251.js";import{R as D}from"./Rulings.096e1329.js";import{M}from"./Models.cc4dbaf5.js";import{D as H}from"./Deck.ec4ac683.js";import{V as $}from"./Viewable.4361af2f.js";import"./Avatar.f160be16.js";import"./Badge.b87f50b5.js";import"./Card.f220136b.js";const R={props:{card:{type:Object,required:!0},collapse:{type:Boolean,default:!1,required:!1},useRouter:{type:Boolean,default:!0}},components:{Colour:k},methods:{toggleCard(s){this.$eventHub.$emit("hover-card",s)},total(){return this.card.total-this.card.sideboardTotal}}};var T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center"},[t.card.stats.resource||!t.collapse?e("colour",{staticClass:"mr-2",attrs:{resource:t.card.stats.resource}}):t._e(),e("span",{directives:[{name:"preview-card",rawName:"v-preview-card",value:{stack:[t.card],index:0},expression:"{stack: [card], index: 0}"},{name:"hover-card",rawName:"v-hover-card",value:t.card,expression:"card"}],staticClass:"cursor-help help-underline"},[t._v(t._s(t.card.name))]),t.total()?e("span",{staticClass:"ml-1"},[t._v("("+t._s(t.total())+")")]):t._e(),t.card.sideboardTotal?e("div",{staticClass:"flex items-center ml-auto",attrs:{title:t.card.sideboardTotal+" in sideboard"}},[e("icon",{attrs:{size:4}},[e("path",{attrs:{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}}),e("path",{attrs:{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"}})]),e("div",{staticClass:"ml-1"},[t._v("("+t._s(t.card.sideboardTotal)+")")])],1):t._e()],1)},q=[],S=a(R,T,q,!1,null,null,null,null);const A=S.exports,L={props:{cards:{type:v,required:!0},heading:{type:String,required:!0}},components:{DeckCard:A}};var B=function(){var t=this,e=t._self._c;return e("div",[e("h3",{staticClass:"py-2 px-4 font-serif uppercase text-2xl"},[t._v(t._s(t.heading)+" ("+t._s(t.cards.total())+")")]),e("ol",t._l(t.cards,function(c,K){return e("li",{staticClass:"p-2 pl-4 odd:bg-gray-100 even:bg-gray-200 dark:odd:bg-gray-700 dark:even:bg-gray-600"},[e("deck-card",{attrs:{card:c,collapse:!0,"use-router":!1}})],1)}),0)])},U=[],I=a(L,B,U,!1,null,null,null,null);const E=I.exports,F={props:{url:{required:!0,type:String}},data(){let s=new URLSearchParams("?"+this.url.split("?")[1]);return{actualUrl:this.url.indexOf("embed")!==-1?this.url:"https://www.youtube.com/embed/"+s.get("v")}}};var P=function(){var t=this,e=t._self._c;return e("iframe",{staticClass:"w-full",attrs:{src:t.actualUrl,height:"400",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})},G=[],N=a(F,P,G,!1,null,null,null,null);const O=N.exports,W={mixins:[l,f,d,o,$],components:{Breadcrumbs:n,Cards:E,DeckCurves:_,DeckLabel:C,DeckVideo:O,Discussion:y,HeaderTitle:m,HeroAvatar:z,Icon:u,Respond:w,Rulings:D,TabItem:b,Tabs:g,Votes:x},computed:{...p("session",["user"]),cards(){return this.deck.cards||[]},crumbs(){return[{text:"Home",link:{name:"home"}},{text:"Decks",link:{name:"decks.browse"}},{text:this.deck.name}]},rulings(){let s=r.flatten(this.deck.cards.all().map(t=>r.flatten(t.rulings.map(e=>e.description))));return r.uniq(s)}},data(){return{deck:null,tab:"composition"}},methods:{...h("messages",["addMessage"]),copyDeck(){i.post("/decks/copy",{deck:this.deck.slug}).then(s=>{this.addMessage({status:"success",message:"Deck successfully copied."}),this.$router.push({name:"decks.build",params:{deck:s.data.deck}})})}},metaInfo(){let s="View deck - "+this.deck.name,t=[];return this.deck.hero?(s+=" ("+this.deck.hero.name+")",t=[{vmid:"og:type",property:"og:type",content:"website"},{vmid:"og:title",property:"og:title",content:s},{vmid:"og:description",property:"og:description",content:"A custom "+this.deck.hero.keywords[0]+" deck built at fabdb.net, utilising the hero, '"+this.deck.hero.name+"'."},{vmid:"og:image",property:"og:image",content:this.heroProfile(this.deck.hero,300)},{vmid:"og:image:width",property:"og:image:width",content:"450"},{vmid:"og:image:height",property:"og:image:height",content:"628"}]):t=[{vmid:"og:type",property:"og:type",content:"website"},{vmid:"og:title",property:"og:title",content:s},{vmid:"og:description",property:"og:description",content:"A custom deck built at fabdb.net."}],{title:s,meta:t}},extends:V((s,t)=>{i.get("/decks/"+s.params.deck).then(e=>{t(function(){this.deck=M.hydrate(e.data,H)})})})};var j=function(){var t=this,e=t._self._c;return e("div",[t.deck&&t.deck.hero?e("div",[e("header-title",{attrs:{title:t.deck.name+" ("+t.deck.hero.name+")"}}),e("breadcrumbs",{attrs:{crumbs:t.crumbs}}),e("div",{staticClass:"bg-white dark:bg-gray-800"},[e("div",{staticClass:"container sm:mx-auto px-4 flex"},[e("div",{staticClass:"flex-1 font-serif uppercase py-4 md:px-0"},[t._v(" "+t._s(t.deck.cards.total())+" Cards in deck \xA0 "),e("span",{staticClass:"hidden md:inline"},[t._v(" ( "),e("span",{staticClass:"inline-block rounded-lg h-2 w-2",class:t.resourceColour(3)}),t._v(" "+t._s(t.deck.cards.colouredCount("blue"))+" \xA0 "),e("span",{staticClass:"inline-block rounded-lg h-2 w-2",class:t.resourceColour(2)}),t._v(" "+t._s(t.deck.cards.colouredCount("yellow"))+" \xA0 "),e("span",{staticClass:"inline-block rounded-lg h-2 w-2",class:t.resourceColour(1)}),t._v(" "+t._s(t.deck.cards.colouredCount("red"))+" ) ")])]),e("div",{staticClass:"text-right mt-2"},[e("votes",{attrs:{size:5,total:t.deck.fields.totalVotes,voted:t.deck.fields.myVote,voteable:"deck",foreign:t.deck.slug}})],1)])]),e("div",{staticClass:"main-body"},[e("div",{staticClass:"container sm:mx-auto px-4"},[e("div",{staticClass:"md:flex md:pt-0"},[e("div",{staticClass:"py-4 md:pr-4 md:w-1/4"},[e("card-image",{attrs:{card:t.deck.hero}}),t.deck.label?e("deck-label",{staticClass:"block w-full py-2 text-center rounded-lg mt-4",attrs:{label:t.deck.label}}):t._e(),e("div",{staticClass:"mt-4 rounded-lg bg-gray-100 dark:bg-gray-800 overflow-hidden"},[e("h3",{staticClass:"font-serif uppercase text-xl mb-2 bg-white dark:bg-gray-700 p-2 px-4"},[t._v("Basic stats")]),e("div",{staticClass:"px-4"},[e("ol",{staticClass:"mb-8"},[e("li",{staticClass:"block py-1 w-full"},[t._v("Attack actions: "+t._s(t.deck.other.attackActions().total()))]),e("li",{staticClass:"block py-1 w-full"},[t._v("Attack reactions: "+t._s(t.deck.other.attackReactions().total()))]),e("li",{staticClass:"block py-1 w-full"},[t._v("Defense reactions: "+t._s(t.deck.other.defenseReactions().total()))])]),e("deck-curves",{staticClass:"mb-4",staticStyle:{height:"200px"},attrs:{cards:t.deck.other.withCost(),stat:"cost",strategy:"total"}}),e("deck-curves",{staticStyle:{height:"200px"},attrs:{cards:t.deck.other.withResource(),stat:"resource",strategy:"total"}})],1)])],1),e("div",{staticClass:"w-full md:w-3/4 md:py-4"},[e("tabs",{scopedSlots:t._u([{key:"right",fn:function(){return[e("ul",{staticClass:"flex items-center text-sm space-x-1 md:space-x-2"},[e("li",{staticClass:"pl-1 md:mb-1"},[e("a",{staticClass:"flex items-center w-full sm:w-auto button-primary rounded-full px-2 py-1",attrs:{href:t.buyLink(t.deck),target:"_blank",title:"Buy from TCG Player"}},[e("icon",{attrs:{size:4}},[e("path",{attrs:{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}}),e("path",{attrs:{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z","clip-rule":"evenodd"}})]),e("span",{staticClass:"ml-1 hidden sm:inline"},[t._v("Buy")])],1)]),e("li",{staticClass:"md:mb-1"},[e("button",{staticClass:"sm:flex items-center w-full button-primary rounded-full px-2 py-1",attrs:{title:"Copy deck to my decks"},on:{click:t.copyDeck}},[e("icon",{attrs:{size:4}},[e("path",{attrs:{d:"M6 6V2c0-1.1.9-2 2-2h10a2 2 0 012 2v10a2 2 0 01-2 2h-4v4a2 2 0 01-2 2H2a2 2 0 01-2-2V8c0-1.1.9-2 2-2h4zm2 0h4a2 2 0 012 2v4h4V2H8v4zM2 8v10h10V8H2z"}})]),e("span",{staticClass:"ml-2 hidden sm:block"},[t._v("Copy to my decks")])],1)]),e("li",{staticClass:"md:mb-1"},[e("button",{staticClass:"sm:flex items-center w-full button-primary rounded-full px-2 py-1",attrs:{title:"Copy deck to clipboard"},on:{click:function(c){t.copyToClipboard(t.shareDeckViaText(t.deck),"Deck build copied to clipboard.")}}},[e("icon",{attrs:{size:4}},[e("path",{attrs:{d:"M8 2a1 1 0 000 2h2a1 1 0 100-2H8z"}}),e("path",{attrs:{d:"M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5zM15 11h2a1 1 0 110 2h-2v-2z"}})]),e("span",{staticClass:"ml-1 hidden sm:block"},[t._v("Copy to clipboard")])],1)])])]},proxy:!0}],null,!1,169356478)},[e("tab-item",{attrs:{name:"Composition"}},[t.deck.notes||t.deck.videoUrl?e("div",{staticClass:"md:flex"},[e("div",{staticClass:"w-full md:w-2/3 md:pl-4 md:pr-8"},[t.deck.videoUrl?e("div",{staticClass:"mb-8"},[e("deck-video",{attrs:{url:t.deck.videoUrl}})],1):t._e(),t.deck.notes?e("div",{staticClass:"mb-8",domProps:{innerHTML:t._s(t.minimalMarkdown(t.deck.notes.replace(/(?:https?|ftp):\/\/[\n\S]+/g,"")))}}):t._e(),e("div",{staticClass:"border-t border-gray-400 mt-4"},[e("discussion",{staticClass:"pb-8",attrs:{type:"deck",id:t.deck.slug}})],1)]),e("div",{staticClass:"w-full md:w-1/3"},[t.deck.weapons.total()?e("cards",{staticClass:"mb-8",attrs:{cards:t.deck.weapons,heading:"Weapons"}}):t._e(),t.deck.equipment.total()?e("cards",{staticClass:"mb-8",attrs:{cards:t.deck.equipment,heading:"Equipment"}}):t._e(),t.deck.other.total()?e("cards",{attrs:{cards:t.deck.other,heading:"Main deck"}}):t._e()],1)]):e("div",{staticClass:"md:flex"},[e("div",{staticClass:"w-full md:w-1/3",class:{"pr-4":!t.deck.notes}},[t.deck.weapons.total()?e("cards",{staticClass:"mb-8",attrs:{cards:t.deck.weapons,heading:"Weapons"}}):t._e(),t.deck.equipment.total()?e("cards",{staticClass:"mb-8",attrs:{cards:t.deck.equipment,heading:"Equipment"}}):t._e()],1),e("div",{staticClass:"w-full md:w-1/3"},[t.deck.other.total()?e("cards",{attrs:{cards:t.deck.other,heading:"Main deck"}}):t._e()],1)])]),e("tab-item",{attrs:{name:"Rulings"}},[e("rulings",{attrs:{rulings:t.rulings}})],1)],1)],1)]),t.deck.notes?t._e():e("div",{staticClass:"border-t border-gray-400 mt-4"},[e("discussion",{staticClass:"pb-8",attrs:{type:"deck",id:t.deck.slug}})],1)])])],1):e("div",[e("header-title",{attrs:{title:t.deck.name}}),e("breadcrumbs",{attrs:{crumbs:t.crumbs}}),t._m(0)],1)])},Y=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"bg-gray-200"},[t("div",{staticClass:"container sm:mx-auto py-8 px-4"},[s._v(" This deck is not yet ready for viewing or sharing, possibly because it's missing some required configuration. ")])])}],J=a(W,j,Y,!1,null,null,null,null);const ut=J.exports;export{ut as default};
